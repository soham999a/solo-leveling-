(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function yD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VE={exports:{}},vd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=Symbol.for("react.transitional.element"),xD=Symbol.for("react.fragment");function LE(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:vD,type:t,key:i,ref:e!==void 0?e:null,props:n}}vd.Fragment=xD;vd.jsx=LE;vd.jsxs=LE;VE.exports=vd;var h=VE.exports,UE={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg=Symbol.for("react.transitional.element"),bD=Symbol.for("react.portal"),_D=Symbol.for("react.fragment"),wD=Symbol.for("react.strict_mode"),TD=Symbol.for("react.profiler"),ED=Symbol.for("react.consumer"),SD=Symbol.for("react.context"),AD=Symbol.for("react.forward_ref"),CD=Symbol.for("react.suspense"),RD=Symbol.for("react.memo"),BE=Symbol.for("react.lazy"),Ox=Symbol.iterator;function ID(t){return t===null||typeof t!="object"?null:(t=Ox&&t[Ox]||t["@@iterator"],typeof t=="function"?t:null)}var HE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FE=Object.assign,zE={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||HE}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qE(){}qE.prototype=Ja.prototype;function Kg(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||HE}var Yg=Kg.prototype=new qE;Yg.constructor=Kg;FE(Yg,Ja.prototype);Yg.isPureReactComponent=!0;var Mx=Array.isArray,Re={H:null,A:null,T:null,S:null,V:null},GE=Object.prototype.hasOwnProperty;function Wg(t,e,n,i,s,r){return n=r.ref,{$$typeof:Xg,type:t,key:e,ref:n!==void 0?n:null,props:r}}function ND(t,e){return Wg(t.type,e,void 0,void 0,void 0,t.props)}function Qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xg}function DD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Vx=/\/+/g;function Ff(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DD(""+t.key):e.toString(36)}function Lx(){}function kD(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Lx,Lx):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Yr(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Xg:case bD:a=!0;break;case BE:return a=t._init,Yr(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+Ff(t,0):i,Mx(s)?(n="",a!=null&&(n=a.replace(Vx,"$&/")+"/"),Yr(s,e,n,"",function(u){return u})):s!=null&&(Qg(s)&&(s=ND(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Vx,"$&/")+"/")+a)),e.push(s)),1;a=0;var o=i===""?".":i+":";if(Mx(t))for(var l=0;l<t.length;l++)i=t[l],r=o+Ff(i,l),a+=Yr(i,e,n,r,s);else if(l=ID(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,r=o+Ff(i,l++),a+=Yr(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return Yr(kD(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function fu(t,e,n){if(t==null)return t;var i=[],s=0;return Yr(t,i,"","",function(r){return e.call(n,r,s++)}),i}function PD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ux=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function jD(){}te.Children={map:fu,forEach:function(t,e,n){fu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fu(t,function(){e++}),e},toArray:function(t){return fu(t,function(e){return e})||[]},only:function(t){if(!Qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Ja;te.Fragment=_D;te.Profiler=TD;te.PureComponent=Kg;te.StrictMode=wD;te.Suspense=CD;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Re;te.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Re.H.useMemoCache(t)}};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=FE({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!GE.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}return Wg(t.type,s,void 0,void 0,r,i)};te.createContext=function(t){return t={$$typeof:SD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:ED,_context:t},t};te.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)GE.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Wg(t,r,void 0,void 0,null,s)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:AD,render:t}};te.isValidElement=Qg;te.lazy=function(t){return{$$typeof:BE,_payload:{_status:-1,_result:t},_init:PD}};te.memo=function(t,e){return{$$typeof:RD,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Re.T,n={};Re.T=n;try{var i=t(),s=Re.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(jD,Ux)}catch(r){Ux(r)}finally{Re.T=e}};te.unstable_useCacheRefresh=function(){return Re.H.useCacheRefresh()};te.use=function(t){return Re.H.use(t)};te.useActionState=function(t,e,n){return Re.H.useActionState(t,e,n)};te.useCallback=function(t,e){return Re.H.useCallback(t,e)};te.useContext=function(t){return Re.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return Re.H.useDeferredValue(t,e)};te.useEffect=function(t,e,n){var i=Re.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(t,e)};te.useId=function(){return Re.H.useId()};te.useImperativeHandle=function(t,e,n){return Re.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Re.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Re.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Re.H.useMemo(t,e)};te.useOptimistic=function(t,e){return Re.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return Re.H.useReducer(t,e,n)};te.useRef=function(t){return Re.H.useRef(t)};te.useState=function(t){return Re.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return Re.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Re.H.useTransition()};te.version="19.1.0";UE.exports=te;var D=UE.exports;const Zm=yD(D);var $E={exports:{}},xd={},XE={exports:{}},KE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,$){var X=F.length;F.push($);e:for(;0<X;){var he=X-1>>>1,_e=F[he];if(0<s(_e,$))F[he]=$,F[X]=_e,X=he;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var $=F[0],X=F.pop();if(X!==$){F[0]=X;e:for(var he=0,_e=F.length,Br=_e>>>1;he<Br;){var Gt=2*(he+1)-1,Ge=F[Gt],oi=Gt+1,Mn=F[oi];if(0>s(Ge,X))oi<_e&&0>s(Mn,Ge)?(F[he]=Mn,F[oi]=X,he=oi):(F[he]=Ge,F[Gt]=X,he=Gt);else if(oi<_e&&0>s(Mn,X))F[he]=Mn,F[oi]=X,he=oi;else break e}}return $}function s(F,$){var X=F.sortIndex-$.sortIndex;return X!==0?X:F.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,m=null,f=3,g=!1,w=!1,E=!1,T=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function R(F){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=F)i(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function j(F){if(E=!1,R(F),!w)if(n(l)!==null)w=!0,V||(V=!0,P());else{var $=n(u);$!==null&&Ze(j,$.startTime-F)}}var V=!1,S=-1,_=5,C=-1;function I(){return T?!0:!(t.unstable_now()-C<_)}function k(){if(T=!1,V){var F=t.unstable_now();C=F;var $=!0;try{e:{w=!1,E&&(E=!1,x(S),S=-1),g=!0;var X=f;try{t:{for(R(F),m=n(l);m!==null&&!(m.expirationTime>F&&I());){var he=m.callback;if(typeof he=="function"){m.callback=null,f=m.priorityLevel;var _e=he(m.expirationTime<=F);if(F=t.unstable_now(),typeof _e=="function"){m.callback=_e,R(F),$=!0;break t}m===n(l)&&i(l),R(F)}else i(l);m=n(l)}if(m!==null)$=!0;else{var Br=n(u);Br!==null&&Ze(j,Br.startTime-F),$=!1}}break e}finally{m=null,f=X,g=!1}$=void 0}}finally{$?P():V=!1}}}var P;if(typeof b=="function")P=function(){b(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ke=N.port2;N.port1.onmessage=k,P=function(){ke.postMessage(null)}}else P=function(){v(k,0)};function Ze(F,$){S=v(function(){F(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var X=f;f=$;try{return F()}finally{f=X}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=f;f=F;try{return $()}finally{f=X}},t.unstable_scheduleCallback=function(F,$,X){var he=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?he+X:he):X=he,F){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=X+_e,F={id:d++,callback:$,priorityLevel:F,startTime:X,expirationTime:_e,sortIndex:-1},X>he?(F.sortIndex=X,e(u,F),n(l)===null&&F===n(u)&&(E?(x(S),S=-1):E=!0,Ze(j,X-he))):(F.sortIndex=_e,e(l,F),w||g||(w=!0,V||(V=!0,P()))),F},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(F){var $=f;return function(){var X=f;f=$;try{return F.apply(this,arguments)}finally{f=X}}}})(KE);XE.exports=KE;var OD=XE.exports,YE={exports:{}},Pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD=D;function WE(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qi(){}var Dt={d:{f:qi,r:function(){throw Error(WE(522))},D:qi,C:qi,L:qi,m:qi,X:qi,S:qi,M:qi},p:0,findDOMNode:null},VD=Symbol.for("react.portal");function LD(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:VD,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var nl=MD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(WE(299));return LD(t,e,null,n)};Pt.flushSync=function(t){var e=nl.T,n=Dt.p;try{if(nl.T=null,Dt.p=2,t)return t()}finally{nl.T=e,Dt.p=n,Dt.d.f()}};Pt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Dt.d.C(t,e))};Pt.prefetchDNS=function(t){typeof t=="string"&&Dt.d.D(t)};Pt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=bd(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Dt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Dt.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Pt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=bd(e.as,e.crossOrigin);Dt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Dt.d.M(t)};Pt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=bd(n,e.crossOrigin);Dt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Pt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=bd(e.as,e.crossOrigin);Dt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Dt.d.m(t)};Pt.requestFormReset=function(t){Dt.d.r(t)};Pt.unstable_batchedUpdates=function(t,e){return t(e)};Pt.useFormState=function(t,e,n){return nl.H.useFormState(t,e,n)};Pt.useFormStatus=function(){return nl.H.useHostTransitionStatus()};Pt.version="19.1.0";function QE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QE)}catch(t){console.error(t)}}QE(),YE.exports=Pt;var UD=YE.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it=OD,JE=D,BD=UD;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ZE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bx(t){if(dc(t)!==t)throw Error(H(188))}function HD(t){var e=t.alternate;if(!e){if(e=dc(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Bx(s),t;if(r===i)return Bx(s),e;r=r.sibling}throw Error(H(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,o=s.child;o;){if(o===n){a=!0,n=s,i=r;break}if(o===i){a=!0,i=s,n=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===n){a=!0,n=r,i=s;break}if(o===i){a=!0,i=r,n=s;break}o=o.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==i)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function tS(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=tS(t),e!==null)return e;t=t.sibling}return null}var Ae=Object.assign,FD=Symbol.for("react.element"),mu=Symbol.for("react.transitional.element"),Go=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),nS=Symbol.for("react.strict_mode"),ep=Symbol.for("react.profiler"),zD=Symbol.for("react.provider"),iS=Symbol.for("react.consumer"),yi=Symbol.for("react.context"),Jg=Symbol.for("react.forward_ref"),tp=Symbol.for("react.suspense"),np=Symbol.for("react.suspense_list"),Zg=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),ip=Symbol.for("react.activity"),qD=Symbol.for("react.memo_cache_sentinel"),Hx=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=Hx&&t[Hx]||t["@@iterator"],typeof t=="function"?t:null)}var GD=Symbol.for("react.client.reference");function sp(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===GD?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case ep:return"Profiler";case nS:return"StrictMode";case tp:return"Suspense";case np:return"SuspenseList";case ip:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Go:return"Portal";case yi:return(t.displayName||"Context")+".Provider";case iS:return(t._context.displayName||"Context")+".Consumer";case Jg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zg:return e=t.displayName||null,e!==null?e:sp(t.type)||"Memo";case Yi:e=t._payload,t=t._init;try{return sp(t(e))}catch{}}return null}var $o=Array.isArray,J=JE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=BD.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,or={pending:!1,data:null,method:null,action:null},rp=[],sa=-1;function ii(t){return{current:t}}function lt(t){0>sa||(t.current=rp[sa],rp[sa]=null,sa--)}function Ie(t,e){sa++,rp[sa]=t.current,t.current=e}var Hn=ii(null),Nl=ii(null),us=ii(null),ph=ii(null);function gh(t,e){switch(Ie(us,e),Ie(Nl,t),Ie(Hn,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?$b(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=$b(e),t=bA(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(Hn),Ie(Hn,t)}function Pa(){lt(Hn),lt(Nl),lt(us)}function ap(t){t.memoizedState!==null&&Ie(ph,t);var e=Hn.current,n=bA(e,t.type);e!==n&&(Ie(Nl,t),Ie(Hn,n))}function yh(t){Nl.current===t&&(lt(Hn),lt(Nl)),ph.current===t&&(lt(ph),Bl._currentValue=or)}var op=Object.prototype.hasOwnProperty,ey=it.unstable_scheduleCallback,zf=it.unstable_cancelCallback,$D=it.unstable_shouldYield,XD=it.unstable_requestPaint,Fn=it.unstable_now,KD=it.unstable_getCurrentPriorityLevel,sS=it.unstable_ImmediatePriority,rS=it.unstable_UserBlockingPriority,vh=it.unstable_NormalPriority,YD=it.unstable_LowPriority,aS=it.unstable_IdlePriority,WD=it.log,QD=it.unstable_setDisableYieldValue,fc=null,Jt=null;function rs(t){if(typeof WD=="function"&&QD(t),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(fc,t)}catch{}}var Zt=Math.clz32?Math.clz32:ek,JD=Math.log,ZD=Math.LN2;function ek(t){return t>>>=0,t===0?32:31-(JD(t)/ZD|0)|0}var pu=256,gu=4194304;function Qs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _d(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=i&134217727;return o!==0?(i=o&~r,i!==0?s=Qs(i):(a&=o,a!==0?s=Qs(a):n||(n=o&~t,n!==0&&(s=Qs(n))))):(o=i&~r,o!==0?s=Qs(o):a!==0?s=Qs(a):n||(n=i&~t,n!==0&&(s=Qs(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function mc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function tk(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oS(){var t=pu;return pu<<=1,!(pu&4194048)&&(pu=256),t}function lS(){var t=gu;return gu<<=1,!(gu&62914560)&&(gu=4194304),t}function qf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function pc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function nk(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,u=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Zt(n),m=1<<d;o[d]=0,l[d]=-1;var f=u[d];if(f!==null)for(u[d]=null,d=0;d<f.length;d++){var g=f[d];g!==null&&(g.lane&=-536870913)}n&=~m}i!==0&&cS(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function cS(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Zt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194090}function uS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Zt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function ty(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ny(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function hS(){var t=fe.p;return t!==0?t:(t=window.event,t===void 0?32:NA(t.type))}function ik(t,e){var n=fe.p;try{return fe.p=t,e()}finally{fe.p=n}}var Ms=Math.random().toString(36).slice(2),Et="__reactFiber$"+Ms,zt="__reactProps$"+Ms,Za="__reactContainer$"+Ms,lp="__reactEvents$"+Ms,sk="__reactListeners$"+Ms,rk="__reactHandles$"+Ms,Fx="__reactResources$"+Ms,gc="__reactMarker$"+Ms;function iy(t){delete t[Et],delete t[zt],delete t[lp],delete t[sk],delete t[rk]}function ra(t){var e=t[Et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Za]||n[Et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yb(t);t!==null;){if(n=t[Et])return n;t=Yb(t)}return e}t=n,n=t.parentNode}return null}function eo(t){if(t=t[Et]||t[Za]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Xo(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function ba(t){var e=t[Fx];return e||(e=t[Fx]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function at(t){t[gc]=!0}var dS=new Set,fS={};function Ir(t,e){ja(t,e),ja(t+"Capture",e)}function ja(t,e){for(fS[t]=e,t=0;t<e.length;t++)dS.add(e[t])}var ak=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zx={},qx={};function ok(t){return op.call(qx,t)?!0:op.call(zx,t)?!1:ak.test(t)?qx[t]=!0:(zx[t]=!0,!1)}function Uu(t,e,n){if(ok(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function yu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ui(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}var Gf,Gx;function Wr(t){if(Gf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gf=e&&e[1]||"",Gx=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gf+t+Gx}var $f=!1;function Xf(t,e){if(!t||$f)return"";$f=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(g){var f=g}Reflect.construct(t,[],m)}else{try{m.call()}catch(g){f=g}t.call(m.prototype)}}else{try{throw Error()}catch(g){f=g}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(g){if(g&&f&&typeof g.stack=="string")return[g.stack,f.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split(`
`),u=o.split(`
`);for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===u.length)for(i=l.length-1,s=u.length-1;1<=i&&0<=s&&l[i]!==u[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==u[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==u[s]){var d=`
`+l[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=s);break}}}finally{$f=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Wr(n):""}function lk(t){switch(t.tag){case 26:case 27:case 5:return Wr(t.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 15:return Xf(t.type,!1);case 11:return Xf(t.type.render,!1);case 1:return Xf(t.type,!0);case 31:return Wr("Activity");default:return""}}function $x(t){try{var e="";do e+=lk(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ck(t){var e=mS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xh(t){t._valueTracker||(t._valueTracker=ck(t))}function pS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mS(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function bh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var uk=/[\n"\\]/g;function hn(t){return t.replace(uk,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function cp(t,e,n,i,s,r,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+ln(e)):t.value!==""+ln(e)&&(t.value=""+ln(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?up(t,a,ln(e)):n!=null?up(t,a,ln(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+ln(o):t.removeAttribute("name")}function gS(t,e,n,i,s,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+ln(n):"",e=e!=null?""+ln(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=o?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function up(t,e,n){e==="number"&&bh(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function _a(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yS(t,e,n){if(e!=null&&(e=""+ln(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+ln(n):""}function vS(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(H(92));if($o(i)){if(1<i.length)throw Error(H(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=ln(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Oa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hk=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xx(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||hk.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function xS(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&Xx(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&Xx(t,r,e[r])}function sy(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dk=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fk=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bu(t){return fk.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var hp=null;function ry(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var aa=null,wa=null;function Kx(t){var e=eo(t);if(e&&(t=e.stateNode)){var n=t[zt]||null;e:switch(t=e.stateNode,e.type){case"input":if(cp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+hn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[zt]||null;if(!s)throw Error(H(90));cp(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&pS(i)}break e;case"textarea":yS(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&_a(t,!!n.multiple,e,!1)}}}var Kf=!1;function bS(t,e,n){if(Kf)return t(e,n);Kf=!0;try{var i=t(e);return i}finally{if(Kf=!1,(aa!==null||wa!==null)&&(Dd(),aa&&(e=aa,t=wa,wa=aa=null,Kx(e),t)))for(e=0;e<t.length;e++)Kx(t[e])}}function Dl(t,e){var n=t.stateNode;if(n===null)return null;var i=n[zt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dp=!1;if(Ri)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){dp=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{dp=!1}var as=null,ay=null,Hu=null;function _S(){if(Hu)return Hu;var t,e=ay,n=e.length,i,s="value"in as?as.value:as.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Hu=s.slice(t,1<i?1-i:void 0)}function Fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vu(){return!0}function Yx(){return!1}function qt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?vu:Yx,this.isPropagationStopped=Yx,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),e}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wd=qt(Nr),yc=Ae({},Nr,{view:0,detail:0}),mk=qt(yc),Yf,Wf,Vo,Td=Ae({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(Yf=t.screenX-Vo.screenX,Wf=t.screenY-Vo.screenY):Wf=Yf=0,Vo=t),Yf)},movementY:function(t){return"movementY"in t?t.movementY:Wf}}),Wx=qt(Td),pk=Ae({},Td,{dataTransfer:0}),gk=qt(pk),yk=Ae({},yc,{relatedTarget:0}),Qf=qt(yk),vk=Ae({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),xk=qt(vk),bk=Ae({},Nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_k=qt(bk),wk=Ae({},Nr,{data:0}),Qx=qt(wk),Tk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ak(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sk[t])?!!e[t]:!1}function oy(){return Ak}var Ck=Ae({},yc,{key:function(t){if(t.key){var e=Tk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(t){return t.type==="keypress"?Fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rk=qt(Ck),Ik=Ae({},Td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jx=qt(Ik),Nk=Ae({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),Dk=qt(Nk),kk=Ae({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pk=qt(kk),jk=Ae({},Td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ok=qt(jk),Mk=Ae({},Nr,{newState:0,oldState:0}),Vk=qt(Mk),Lk=[9,13,27,32],ly=Ri&&"CompositionEvent"in window,il=null;Ri&&"documentMode"in document&&(il=document.documentMode);var Uk=Ri&&"TextEvent"in window&&!il,wS=Ri&&(!ly||il&&8<il&&11>=il),Zx=" ",eb=!1;function TS(t,e){switch(t){case"keyup":return Lk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ES(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oa=!1;function Bk(t,e){switch(t){case"compositionend":return ES(e);case"keypress":return e.which!==32?null:(eb=!0,Zx);case"textInput":return t=e.data,t===Zx&&eb?null:t;default:return null}}function Hk(t,e){if(oa)return t==="compositionend"||!ly&&TS(t,e)?(t=_S(),Hu=ay=as=null,oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wS&&e.locale!=="ko"?null:e.data;default:return null}}var Fk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Fk[t.type]:e==="textarea"}function SS(t,e,n,i){aa?wa?wa.push(i):wa=[i]:aa=i,e=Lh(e,"onChange"),0<e.length&&(n=new wd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var sl=null,kl=null;function zk(t){yA(t,0)}function Ed(t){var e=Xo(t);if(pS(e))return t}function nb(t,e){if(t==="change")return e}var AS=!1;if(Ri){var Jf;if(Ri){var Zf="oninput"in document;if(!Zf){var ib=document.createElement("div");ib.setAttribute("oninput","return;"),Zf=typeof ib.oninput=="function"}Jf=Zf}else Jf=!1;AS=Jf&&(!document.documentMode||9<document.documentMode)}function sb(){sl&&(sl.detachEvent("onpropertychange",CS),kl=sl=null)}function CS(t){if(t.propertyName==="value"&&Ed(kl)){var e=[];SS(e,kl,t,ry(t)),bS(zk,e)}}function qk(t,e,n){t==="focusin"?(sb(),sl=e,kl=n,sl.attachEvent("onpropertychange",CS)):t==="focusout"&&sb()}function Gk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ed(kl)}function $k(t,e){if(t==="click")return Ed(e)}function Xk(t,e){if(t==="input"||t==="change")return Ed(e)}function Kk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:Kk;function Pl(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!op.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function rb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ab(t,e){var n=rb(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rb(n)}}function RS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?RS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=bh(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bh(t.document)}return e}function cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Yk=Ri&&"documentMode"in document&&11>=document.documentMode,la=null,fp=null,rl=null,mp=!1;function ob(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mp||la==null||la!==bh(i)||(i=la,"selectionStart"in i&&cy(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rl&&Pl(rl,i)||(rl=i,i=Lh(fp,"onSelect"),0<i.length&&(e=new wd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=la)))}function Ys(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ca={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},em={},NS={};Ri&&(NS=document.createElement("div").style,"AnimationEvent"in window||(delete ca.animationend.animation,delete ca.animationiteration.animation,delete ca.animationstart.animation),"TransitionEvent"in window||delete ca.transitionend.transition);function Dr(t){if(em[t])return em[t];if(!ca[t])return t;var e=ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NS)return em[t]=e[n];return t}var DS=Dr("animationend"),kS=Dr("animationiteration"),PS=Dr("animationstart"),Wk=Dr("transitionrun"),Qk=Dr("transitionstart"),Jk=Dr("transitioncancel"),jS=Dr("transitionend"),OS=new Map,pp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pp.push("scrollEnd");function Dn(t,e){OS.set(t,e),Ir(e,[t])}var lb=new WeakMap;function dn(t,e){if(typeof t=="object"&&t!==null){var n=lb.get(t);return n!==void 0?n:(e={value:t,source:e,stack:$x(e)},lb.set(t,e),e)}return{value:t,source:e,stack:$x(e)}}var on=[],ua=0,uy=0;function Sd(){for(var t=ua,e=uy=ua=0;e<t;){var n=on[e];on[e++]=null;var i=on[e];on[e++]=null;var s=on[e];on[e++]=null;var r=on[e];if(on[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&MS(n,s,r)}}function Ad(t,e,n,i){on[ua++]=t,on[ua++]=e,on[ua++]=n,on[ua++]=i,uy|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function hy(t,e,n,i){return Ad(t,e,n,i),_h(t)}function to(t,e){return Ad(t,null,null,e),_h(t)}function MS(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-Zt(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function _h(t){if(50<pl)throw pl=0,Mp=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ha={};function Zk(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,i){return new Zk(t,e,n,i)}function dy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ei(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function VS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function zu(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")dy(t)&&(a=1);else if(typeof t=="string")a=tj(t,n,Hn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ip:return t=Wt(31,n,e,s),t.elementType=ip,t.lanes=r,t;case ia:return lr(n.children,s,r,e);case nS:a=8,s|=24;break;case ep:return t=Wt(12,n,e,s|2),t.elementType=ep,t.lanes=r,t;case tp:return t=Wt(13,n,e,s),t.elementType=tp,t.lanes=r,t;case np:return t=Wt(19,n,e,s),t.elementType=np,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zD:case yi:a=10;break e;case iS:a=9;break e;case Jg:a=11;break e;case Zg:a=14;break e;case Yi:a=16,i=null;break e}a=29,n=Error(H(130,t===null?"null":typeof t,"")),i=null}return e=Wt(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function lr(t,e,n,i){return t=Wt(7,t,i,e),t.lanes=n,t}function tm(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function nm(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var da=[],fa=0,wh=null,Th=0,cn=[],un=0,cr=null,vi=1,xi="";function Js(t,e){da[fa++]=Th,da[fa++]=wh,wh=t,Th=e}function LS(t,e,n){cn[un++]=vi,cn[un++]=xi,cn[un++]=cr,cr=t;var i=vi;t=xi;var s=32-Zt(i)-1;i&=~(1<<s),n+=1;var r=32-Zt(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,vi=1<<32-Zt(e)+s|n<<s|i,xi=r+t}else vi=1<<r|n<<s|i,xi=t}function fy(t){t.return!==null&&(Js(t,1),LS(t,1,0))}function my(t){for(;t===wh;)wh=da[--fa],da[fa]=null,Th=da[--fa],da[fa]=null;for(;t===cr;)cr=cn[--un],cn[un]=null,xi=cn[--un],cn[un]=null,vi=cn[--un],cn[un]=null}var Nt=null,Le=null,de=!1,ur=null,Un=!1,gp=Error(H(519));function yr(t){var e=Error(H(418,""));throw jl(dn(e,t)),gp}function cb(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Et]=t,e[zt]=i,n){case"dialog":se("cancel",e),se("close",e);break;case"iframe":case"object":case"embed":se("load",e);break;case"video":case"audio":for(n=0;n<Vl.length;n++)se(Vl[n],e);break;case"source":se("error",e);break;case"img":case"image":case"link":se("error",e),se("load",e);break;case"details":se("toggle",e);break;case"input":se("invalid",e),gS(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),xh(e);break;case"select":se("invalid",e);break;case"textarea":se("invalid",e),vS(e,i.value,i.defaultValue,i.children),xh(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||xA(e.textContent,n)?(i.popover!=null&&(se("beforetoggle",e),se("toggle",e)),i.onScroll!=null&&se("scroll",e),i.onScrollEnd!=null&&se("scrollend",e),i.onClick!=null&&(e.onclick=jd),e=!0):e=!1,e||yr(t)}function ub(t){for(Nt=t.return;Nt;)switch(Nt.tag){case 5:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Nt=Nt.return}}function Lo(t){if(t!==Nt)return!1;if(!de)return ub(t),de=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Fp(t.type,t.memoizedProps)),n=!n),n&&Le&&yr(t),ub(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){Le=En(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}Le=null}}else e===27?(e=Le,Vs(t.type)?(t=Gp,Gp=null,Le=t):Le=e):Le=Nt?En(t.stateNode.nextSibling):null;return!0}function vc(){Le=Nt=null,de=!1}function hb(){var t=ur;return t!==null&&(Mt===null?Mt=t:Mt.push.apply(Mt,t),ur=null),t}function jl(t){ur===null?ur=[t]:ur.push(t)}var yp=ii(null),kr=null,bi=null;function Ji(t,e,n){Ie(yp,e._currentValue),e._currentValue=n}function Si(t){t._currentValue=yp.current,lt(yp)}function vp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xp(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=s;for(var l=0;l<e.length;l++)if(o.context===e[l]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),vp(r.return,n,t),i||(a=null);break e}r=o.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(H(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),vp(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function xc(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var o=s.type;sn(s.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(s===ph.current){if(a=s.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(Bl):t=[Bl])}s=s.return}t!==null&&xp(e,t,n,i),e.flags|=262144}function Eh(t){for(t=t.firstContext;t!==null;){if(!sn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vr(t){kr=t,bi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function St(t){return US(kr,t)}function xu(t,e){return kr===null&&vr(t),US(t,e)}function US(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},bi===null){if(t===null)throw Error(H(308));bi=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else bi=bi.next=e;return n}var eP=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},tP=it.unstable_scheduleCallback,nP=it.unstable_NormalPriority,et={$$typeof:yi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function py(){return{controller:new eP,data:new Map,refCount:0}}function bc(t){t.refCount--,t.refCount===0&&tP(nP,function(){t.controller.abort()})}var al=null,bp=0,Ma=0,Ta=null;function iP(t,e){if(al===null){var n=al=[];bp=0,Ma=Ly(),Ta={status:"pending",value:void 0,then:function(i){n.push(i)}}}return bp++,e.then(db,db),e}function db(){if(--bp===0&&al!==null){Ta!==null&&(Ta.status="fulfilled");var t=al;al=null,Ma=0,Ta=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function sP(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var fb=J.S;J.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&iP(t,e),fb!==null&&fb(t,e)};var hr=ii(null);function gy(){var t=hr.current;return t!==null?t:Te.pooledCache}function qu(t,e){e===null?Ie(hr,hr.current):Ie(hr,e.pool)}function BS(){var t=gy();return t===null?null:{parent:et._currentValue,pool:t}}var _c=Error(H(460)),HS=Error(H(474)),Cd=Error(H(542)),_p={then:function(){}};function mb(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bu(){}function FS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(bu,bu),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,gb(t),t;default:if(typeof e.status=="string")e.then(bu,bu);else{if(t=Te,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,gb(t),t}throw ol=e,_c}}var ol=null;function pb(){if(ol===null)throw Error(H(459));var t=ol;return ol=null,t}function gb(t){if(t===_c||t===Cd)throw Error(H(483))}var Wi=!1;function yy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=_h(t),MS(t,null,n),e}return Ad(t,i,e,n),_h(t)}function ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uS(t,n)}}function im(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Tp=!1;function cl(){if(Tp){var t=Ta;if(t!==null)throw t}}function ul(t,e,n,i){Tp=!1;var s=t.updateQueue;Wi=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?r=u:a.next=u,a=l;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(r!==null){var m=s.baseState;a=0,d=u=l=null,o=r;do{var f=o.lane&-536870913,g=f!==o.lane;if(g?(ce&f)===f:(i&f)===f){f!==0&&f===Ma&&(Tp=!0),d!==null&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var w=t,E=o;f=e;var T=n;switch(E.tag){case 1:if(w=E.payload,typeof w=="function"){m=w.call(T,m,f);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,f=typeof w=="function"?w.call(T,m,f):w,f==null)break e;m=Ae({},m,f);break e;case 2:Wi=!0}}f=o.callback,f!==null&&(t.flags|=64,g&&(t.flags|=8192),g=s.callbacks,g===null?s.callbacks=[f]:g.push(f))}else g={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=g,l=m):d=d.next=g,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;g=o,o=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);d===null&&(l=m),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),Ss|=a,t.lanes=a,t.memoizedState=m}}function zS(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function qS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)zS(n[t],e)}var Va=ii(null),Sh=ii(0);function yb(t,e){t=Di,Ie(Sh,t),Ie(Va,e),Di=t|e.baseLanes}function Ep(){Ie(Sh,Di),Ie(Va,Va.current)}function vy(){Di=Sh.current,lt(Va),lt(Sh)}var Ts=0,ie=null,ve=null,Ke=null,Ah=!1,Ea=!1,xr=!1,Ch=0,Ol=0,Sa=null,rP=0;function Be(){throw Error(H(321))}function xy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function by(t,e,n,i,s,r){return Ts=r,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,J.H=t===null||t.memoizedState===null?_1:w1,xr=!1,r=n(i,s),xr=!1,Ea&&(r=$S(e,n,i,s)),GS(t),r}function GS(t){J.H=Rh;var e=ve!==null&&ve.next!==null;if(Ts=0,Ke=ve=ie=null,Ah=!1,Ol=0,Sa=null,e)throw Error(H(300));t===null||ot||(t=t.dependencies,t!==null&&Eh(t)&&(ot=!0))}function $S(t,e,n,i){ie=t;var s=0;do{if(Ea&&(Sa=null),Ol=0,Ea=!1,25<=s)throw Error(H(301));if(s+=1,Ke=ve=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}J.H=dP,r=e(n,i)}while(Ea);return r}function aP(){var t=J.H,e=t.useState()[0];return e=typeof e.then=="function"?wc(e):e,t=t.useState()[0],(ve!==null?ve.memoizedState:null)!==t&&(ie.flags|=1024),e}function _y(){var t=Ch!==0;return Ch=0,t}function wy(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Ty(t){if(Ah){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ah=!1}Ts=0,Ke=ve=ie=null,Ea=!1,Ol=Ch=0,Sa=null}function jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ie.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Qe(){if(ve===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=Ke===null?ie.memoizedState:Ke.next;if(e!==null)Ke=e,ve=t;else{if(t===null)throw ie.alternate===null?Error(H(467)):Error(H(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Ke===null?ie.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Ey(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(t){var e=Ol;return Ol+=1,Sa===null&&(Sa=[]),t=FS(Sa,t,e),e=ie,(Ke===null?e.memoizedState:Ke.next)===null&&(e=e.alternate,J.H=e===null||e.memoizedState===null?_1:w1),t}function Rd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wc(t);if(t.$$typeof===yi)return St(t)}throw Error(H(438,String(t)))}function Sy(t){var e=null,n=ie.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ie.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Ey(),ie.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=qD;return e.index++,n}function Ii(t,e){return typeof e=="function"?e(t):e}function Gu(t){var e=Qe();return Ay(e,ve,t)}function Ay(t,e,n){var i=t.queue;if(i===null)throw Error(H(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var o=a=null,l=null,u=e,d=!1;do{var m=u.lane&-536870913;if(m!==u.lane?(ce&m)===m:(Ts&m)===m){var f=u.revertLane;if(f===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),m===Ma&&(d=!0);else if((Ts&f)===f){u=u.next,f===Ma&&(d=!0);continue}else m={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=m,a=r):l=l.next=m,ie.lanes|=f,Ss|=f;m=u.action,xr&&n(r,m),r=u.hasEagerState?u.eagerState:n(r,m)}else f={lane:m,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(o=l=f,a=r):l=l.next=f,ie.lanes|=m,Ss|=m;u=u.next}while(u!==null&&u!==e);if(l===null?a=r:l.next=o,!sn(r,t.memoizedState)&&(ot=!0,d&&(n=Ta,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=l,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function sm(t){var e=Qe(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);sn(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function XS(t,e,n){var i=ie,s=Qe(),r=de;if(r){if(n===void 0)throw Error(H(407));n=n()}else n=e();var a=!sn((ve||s).memoizedState,n);a&&(s.memoizedState=n,ot=!0),s=s.queue;var o=WS.bind(null,i,s,t);if(Tc(2048,8,o,[t]),s.getSnapshot!==e||a||Ke!==null&&Ke.memoizedState.tag&1){if(i.flags|=2048,La(9,Id(),YS.bind(null,i,s,n,e),null),Te===null)throw Error(H(349));r||Ts&124||KS(i,e,n)}return n}function KS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ie.updateQueue,e===null?(e=Ey(),ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YS(t,e,n,i){e.value=n,e.getSnapshot=i,QS(e)&&JS(t)}function WS(t,e,n){return n(function(){QS(e)&&JS(t)})}function QS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function JS(t){var e=to(t,2);e!==null&&tn(e,t,2)}function Sp(t){var e=jt();if(typeof t=="function"){var n=t;if(t=n(),xr){rs(!0);try{n()}finally{rs(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},e}function ZS(t,e,n,i){return t.baseState=n,Ay(t,ve,typeof i=="function"?i:Ii)}function oP(t,e,n,i,s){if(Nd(t))throw Error(H(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};J.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,e1(e,r)):(r.next=n.next,e.pending=n.next=r)}}function e1(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=J.T,a={};J.T=a;try{var o=n(s,i),l=J.S;l!==null&&l(a,o),vb(t,e,o)}catch(u){Ap(t,e,u)}finally{J.T=r}}else try{r=n(s,i),vb(t,e,r)}catch(u){Ap(t,e,u)}}function vb(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){xb(t,e,i)},function(i){return Ap(t,e,i)}):xb(t,e,n)}function xb(t,e,n){e.status="fulfilled",e.value=n,t1(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,e1(t,n)))}function Ap(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,t1(e),e=e.next;while(e!==i)}t.action=null}function t1(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function n1(t,e){return e}function bb(t,e){if(de){var n=Te.formState;if(n!==null){e:{var i=ie;if(de){if(Le){t:{for(var s=Le,r=Un;s.nodeType!==8;){if(!r){s=null;break t}if(s=En(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){Le=En(s.nextSibling),i=s.data==="F!";break e}}yr(i)}i=!1}i&&(e=n[0])}}return n=jt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n1,lastRenderedState:e},n.queue=i,n=v1.bind(null,ie,i),i.dispatch=n,i=Sp(!1),r=Ny.bind(null,ie,!1,i.queue),i=jt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=oP.bind(null,ie,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function _b(t){var e=Qe();return i1(e,ve,t)}function i1(t,e,n){if(e=Ay(t,e,n1)[0],t=Gu(Ii)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=wc(e)}catch(a){throw a===_c?Cd:a}else i=e;e=Qe();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(ie.flags|=2048,La(9,Id(),lP.bind(null,s,n),null)),[i,r,t]}function lP(t,e){t.action=e}function wb(t){var e=Qe(),n=ve;if(n!==null)return i1(e,n,t);Qe(),e=e.memoizedState,n=Qe();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function La(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ie.updateQueue,e===null&&(e=Ey(),ie.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Id(){return{destroy:void 0,resource:void 0}}function s1(){return Qe().memoizedState}function $u(t,e,n,i){var s=jt();i=i===void 0?null:i,ie.flags|=t,s.memoizedState=La(1|e,Id(),n,i)}function Tc(t,e,n,i){var s=Qe();i=i===void 0?null:i;var r=s.memoizedState.inst;ve!==null&&i!==null&&xy(i,ve.memoizedState.deps)?s.memoizedState=La(e,r,n,i):(ie.flags|=t,s.memoizedState=La(1|e,r,n,i))}function Tb(t,e){$u(8390656,8,t,e)}function r1(t,e){Tc(2048,8,t,e)}function a1(t,e){return Tc(4,2,t,e)}function o1(t,e){return Tc(4,4,t,e)}function l1(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function c1(t,e,n){n=n!=null?n.concat([t]):null,Tc(4,4,l1.bind(null,e,t),n)}function Cy(){}function u1(t,e){var n=Qe();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&xy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function h1(t,e){var n=Qe();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&xy(e,i[1]))return i[0];if(i=t(),xr){rs(!0);try{t()}finally{rs(!1)}}return n.memoizedState=[i,e],i}function Ry(t,e,n){return n===void 0||Ts&1073741824?t.memoizedState=e:(t.memoizedState=n,t=tA(),ie.lanes|=t,Ss|=t,n)}function d1(t,e,n,i){return sn(n,e)?n:Va.current!==null?(t=Ry(t,n,i),sn(t,e)||(ot=!0),t):Ts&42?(t=tA(),ie.lanes|=t,Ss|=t,e):(ot=!0,t.memoizedState=n)}function f1(t,e,n,i,s){var r=fe.p;fe.p=r!==0&&8>r?r:8;var a=J.T,o={};J.T=o,Ny(t,!1,e,n);try{var l=s(),u=J.S;if(u!==null&&u(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=sP(l,i);hl(t,e,d,en(t))}else hl(t,e,i,en(t))}catch(m){hl(t,e,{then:function(){},status:"rejected",reason:m},en())}finally{fe.p=r,J.T=a}}function cP(){}function Cp(t,e,n,i){if(t.tag!==5)throw Error(H(476));var s=m1(t).queue;f1(t,s,e,or,n===null?cP:function(){return p1(t),n(i)})}function m1(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:or,baseState:or,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:or},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function p1(t){var e=m1(t).next.queue;hl(t,e,{},en())}function Iy(){return St(Bl)}function g1(){return Qe().memoizedState}function y1(){return Qe().memoizedState}function uP(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=en();t=hs(n);var i=ds(e,t,n);i!==null&&(tn(i,e,n),ll(i,e,n)),e={cache:py()},t.payload=e;return}e=e.return}}function hP(t,e,n){var i=en();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Nd(t)?x1(e,n):(n=hy(t,e,n,i),n!==null&&(tn(n,t,i),b1(n,e,i)))}function v1(t,e,n){var i=en();hl(t,e,n,i)}function hl(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Nd(t))x1(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,sn(o,a))return Ad(t,e,s,0),Te===null&&Sd(),!1}catch{}finally{}if(n=hy(t,e,s,i),n!==null)return tn(n,t,i),b1(n,e,i),!0}return!1}function Ny(t,e,n,i){if(i={lane:2,revertLane:Ly(),action:i,hasEagerState:!1,eagerState:null,next:null},Nd(t)){if(e)throw Error(H(479))}else e=hy(t,n,i,2),e!==null&&tn(e,t,2)}function Nd(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function x1(t,e){Ea=Ah=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function b1(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,uS(t,n)}}var Rh={readContext:St,use:Rd,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be},_1={readContext:St,use:Rd,useCallback:function(t,e){return jt().memoizedState=[t,e===void 0?null:e],t},useContext:St,useEffect:Tb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,$u(4194308,4,l1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $u(4194308,4,t,e)},useInsertionEffect:function(t,e){$u(4,2,t,e)},useMemo:function(t,e){var n=jt();e=e===void 0?null:e;var i=t();if(xr){rs(!0);try{t()}finally{rs(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=jt();if(n!==void 0){var s=n(e);if(xr){rs(!0);try{n(e)}finally{rs(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=hP.bind(null,ie,t),[i.memoizedState,t]},useRef:function(t){var e=jt();return t={current:t},e.memoizedState=t},useState:function(t){t=Sp(t);var e=t.queue,n=v1.bind(null,ie,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Cy,useDeferredValue:function(t,e){var n=jt();return Ry(n,t,e)},useTransition:function(){var t=Sp(!1);return t=f1.bind(null,ie,t.queue,!0,!1),jt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ie,s=jt();if(de){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Te===null)throw Error(H(349));ce&124||KS(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Tb(WS.bind(null,i,r,t),[t]),i.flags|=2048,La(9,Id(),YS.bind(null,i,r,n,e),null),n},useId:function(){var t=jt(),e=Te.identifierPrefix;if(de){var n=xi,i=vi;n=(i&~(1<<32-Zt(i)-1)).toString(32)+n,e="«"+e+"R"+n,n=Ch++,0<n&&(e+="H"+n.toString(32)),e+="»"}else n=rP++,e="«"+e+"r"+n.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:Iy,useFormState:bb,useActionState:bb,useOptimistic:function(t){var e=jt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Ny.bind(null,ie,!0,n),n.dispatch=e,[t,e]},useMemoCache:Sy,useCacheRefresh:function(){return jt().memoizedState=uP.bind(null,ie)}},w1={readContext:St,use:Rd,useCallback:u1,useContext:St,useEffect:r1,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:Gu,useRef:s1,useState:function(){return Gu(Ii)},useDebugValue:Cy,useDeferredValue:function(t,e){var n=Qe();return d1(n,ve.memoizedState,t,e)},useTransition:function(){var t=Gu(Ii)[0],e=Qe().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:XS,useId:g1,useHostTransitionStatus:Iy,useFormState:_b,useActionState:_b,useOptimistic:function(t,e){var n=Qe();return ZS(n,ve,t,e)},useMemoCache:Sy,useCacheRefresh:y1},dP={readContext:St,use:Rd,useCallback:u1,useContext:St,useEffect:r1,useImperativeHandle:c1,useInsertionEffect:a1,useLayoutEffect:o1,useMemo:h1,useReducer:sm,useRef:s1,useState:function(){return sm(Ii)},useDebugValue:Cy,useDeferredValue:function(t,e){var n=Qe();return ve===null?Ry(n,t,e):d1(n,ve.memoizedState,t,e)},useTransition:function(){var t=sm(Ii)[0],e=Qe().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:XS,useId:g1,useHostTransitionStatus:Iy,useFormState:wb,useActionState:wb,useOptimistic:function(t,e){var n=Qe();return ve!==null?ZS(n,ve,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Sy,useCacheRefresh:y1},Aa=null,Ml=0;function _u(t){var e=Ml;return Ml+=1,Aa===null&&(Aa=[]),FS(Aa,t,e)}function Uo(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function wu(t,e){throw e.$$typeof===FD?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Eb(t){var e=t._init;return e(t._payload)}function T1(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function i(v){for(var x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(v,x){return v=Ei(v,x),v.index=0,v.sibling=null,v}function r(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=67108866,x):b):(v.flags|=67108866,x)):(v.flags|=1048576,x)}function a(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,x,b,R){return x===null||x.tag!==6?(x=tm(b,v.mode,R),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,R){var j=b.type;return j===ia?d(v,x,b.props.children,R,b.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yi&&Eb(j)===x.type)?(x=s(x,b.props),Uo(x,b),x.return=v,x):(x=zu(b.type,b.key,b.props,null,v.mode,R),Uo(x,b),x.return=v,x)}function u(v,x,b,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=nm(b,v.mode,R),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function d(v,x,b,R,j){return x===null||x.tag!==7?(x=lr(b,v.mode,R,j),x.return=v,x):(x=s(x,b),x.return=v,x)}function m(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=tm(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case mu:return b=zu(x.type,x.key,x.props,null,v.mode,b),Uo(b,x),b.return=v,b;case Go:return x=nm(x,v.mode,b),x.return=v,x;case Yi:var R=x._init;return x=R(x._payload),m(v,x,b)}if($o(x)||Oo(x))return x=lr(x,v.mode,b,null),x.return=v,x;if(typeof x.then=="function")return m(v,_u(x),b);if(x.$$typeof===yi)return m(v,xu(v,x),b);wu(v,x)}return null}function f(v,x,b,R){var j=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return j!==null?null:o(v,x,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mu:return b.key===j?l(v,x,b,R):null;case Go:return b.key===j?u(v,x,b,R):null;case Yi:return j=b._init,b=j(b._payload),f(v,x,b,R)}if($o(b)||Oo(b))return j!==null?null:d(v,x,b,R,null);if(typeof b.then=="function")return f(v,x,_u(b),R);if(b.$$typeof===yi)return f(v,x,xu(v,b),R);wu(v,b)}return null}function g(v,x,b,R,j){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return v=v.get(b)||null,o(x,v,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case mu:return v=v.get(R.key===null?b:R.key)||null,l(x,v,R,j);case Go:return v=v.get(R.key===null?b:R.key)||null,u(x,v,R,j);case Yi:var V=R._init;return R=V(R._payload),g(v,x,b,R,j)}if($o(R)||Oo(R))return v=v.get(b)||null,d(x,v,R,j,null);if(typeof R.then=="function")return g(v,x,b,_u(R),j);if(R.$$typeof===yi)return g(v,x,b,xu(x,R),j);wu(x,R)}return null}function w(v,x,b,R){for(var j=null,V=null,S=x,_=x=0,C=null;S!==null&&_<b.length;_++){S.index>_?(C=S,S=null):C=S.sibling;var I=f(v,S,b[_],R);if(I===null){S===null&&(S=C);break}t&&S&&I.alternate===null&&e(v,S),x=r(I,x,_),V===null?j=I:V.sibling=I,V=I,S=C}if(_===b.length)return n(v,S),de&&Js(v,_),j;if(S===null){for(;_<b.length;_++)S=m(v,b[_],R),S!==null&&(x=r(S,x,_),V===null?j=S:V.sibling=S,V=S);return de&&Js(v,_),j}for(S=i(S);_<b.length;_++)C=g(S,v,_,b[_],R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?_:C.key),x=r(C,x,_),V===null?j=C:V.sibling=C,V=C);return t&&S.forEach(function(k){return e(v,k)}),de&&Js(v,_),j}function E(v,x,b,R){if(b==null)throw Error(H(151));for(var j=null,V=null,S=x,_=x=0,C=null,I=b.next();S!==null&&!I.done;_++,I=b.next()){S.index>_?(C=S,S=null):C=S.sibling;var k=f(v,S,I.value,R);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(v,S),x=r(k,x,_),V===null?j=k:V.sibling=k,V=k,S=C}if(I.done)return n(v,S),de&&Js(v,_),j;if(S===null){for(;!I.done;_++,I=b.next())I=m(v,I.value,R),I!==null&&(x=r(I,x,_),V===null?j=I:V.sibling=I,V=I);return de&&Js(v,_),j}for(S=i(S);!I.done;_++,I=b.next())I=g(S,v,_,I.value,R),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?_:I.key),x=r(I,x,_),V===null?j=I:V.sibling=I,V=I);return t&&S.forEach(function(P){return e(v,P)}),de&&Js(v,_),j}function T(v,x,b,R){if(typeof b=="object"&&b!==null&&b.type===ia&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case mu:e:{for(var j=b.key;x!==null;){if(x.key===j){if(j=b.type,j===ia){if(x.tag===7){n(v,x.sibling),R=s(x,b.props.children),R.return=v,v=R;break e}}else if(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Yi&&Eb(j)===x.type){n(v,x.sibling),R=s(x,b.props),Uo(R,b),R.return=v,v=R;break e}n(v,x);break}else e(v,x);x=x.sibling}b.type===ia?(R=lr(b.props.children,v.mode,R,b.key),R.return=v,v=R):(R=zu(b.type,b.key,b.props,null,v.mode,R),Uo(R,b),R.return=v,v=R)}return a(v);case Go:e:{for(j=b.key;x!==null;){if(x.key===j)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),R=s(x,b.children||[]),R.return=v,v=R;break e}else{n(v,x);break}else e(v,x);x=x.sibling}R=nm(b,v.mode,R),R.return=v,v=R}return a(v);case Yi:return j=b._init,b=j(b._payload),T(v,x,b,R)}if($o(b))return w(v,x,b,R);if(Oo(b)){if(j=Oo(b),typeof j!="function")throw Error(H(150));return b=j.call(b),E(v,x,b,R)}if(typeof b.then=="function")return T(v,x,_u(b),R);if(b.$$typeof===yi)return T(v,x,xu(v,b),R);wu(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),R=s(x,b),R.return=v,v=R):(n(v,x),R=tm(b,v.mode,R),R.return=v,v=R),a(v)):n(v,x)}return function(v,x,b,R){try{Ml=0;var j=T(v,x,b,R);return Aa=null,j}catch(S){if(S===_c||S===Cd)throw S;var V=Wt(29,S,null,v.mode);return V.lanes=R,V.return=v,V}finally{}}}var Ua=T1(!0),E1=T1(!1),yn=ii(null),zn=null;function Zi(t){var e=t.alternate;Ie(tt,tt.current&1),Ie(yn,t),zn===null&&(e===null||Va.current!==null||e.memoizedState!==null)&&(zn=t)}function S1(t){if(t.tag===22){if(Ie(tt,tt.current),Ie(yn,t),zn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(zn=t)}}else es()}function es(){Ie(tt,tt.current),Ie(yn,yn.current)}function _i(t){lt(yn),zn===t&&(zn=null),lt(tt)}var tt=ii(0);function Ih(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||qp(n)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function rm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rp={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=en(),s=hs(i);s.payload=e,n!=null&&(s.callback=n),e=ds(t,s,i),e!==null&&(tn(e,t,i),ll(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=en(),s=hs(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ds(t,s,i),e!==null&&(tn(e,t,i),ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),i=hs(n);i.tag=2,e!=null&&(i.callback=e),e=ds(t,i,n),e!==null&&(tn(e,t,n),ll(e,t,n))}};function Sb(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!Pl(n,i)||!Pl(s,r):!0}function Ab(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Rp.enqueueReplaceState(e,e.state,null)}function br(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Ae({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var Nh=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function A1(t){Nh(t)}function C1(t){console.error(t)}function R1(t){Nh(t)}function Dh(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function Cb(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Ip(t,e,n){return n=hs(n),n.tag=3,n.payload={element:null},n.callback=function(){Dh(t,e)},n}function I1(t){return t=hs(t),t.tag=3,t}function N1(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){Cb(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Cb(e,n,i),typeof s!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var o=i.stack;this.componentDidCatch(i.value,{componentStack:o!==null?o:""})})}function fP(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&xc(e,n,s,!0),n=yn.current,n!==null){switch(n.tag){case 13:return zn===null?Vp():n.alternate===null&&Ue===0&&(Ue=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===_p?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),gm(t,i,s)),!1;case 22:return n.flags|=65536,i===_p?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),gm(t,i,s)),!1}throw Error(H(435,n.tag))}return gm(t,i,s),Vp(),!1}if(de)return e=yn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==gp&&(t=Error(H(422),{cause:i}),jl(dn(t,n)))):(i!==gp&&(e=Error(H(423),{cause:i}),jl(dn(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=dn(i,n),s=Ip(t.stateNode,i,s),im(t,s),Ue!==4&&(Ue=2)),!1;var r=Error(H(520),{cause:i});if(r=dn(r,n),ml===null?ml=[r]:ml.push(r),Ue!==4&&(Ue=2),e===null)return!0;i=dn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Ip(n.stateNode,i,t),im(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(fs===null||!fs.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=I1(s),N1(s,t,n,i),im(n,s),!1}n=n.return}while(n!==null);return!1}var D1=Error(H(461)),ot=!1;function ht(t,e,n,i){e.child=t===null?E1(e,null,n,i):Ua(e,t.child,n,i)}function Rb(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}else a=i;return vr(e),i=by(t,e,n,a,r,s),o=_y(),t!==null&&!ot?(wy(t,e,s),Ni(t,e,s)):(de&&o&&fy(e),e.flags|=1,ht(t,e,i,s),e.child)}function Ib(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!dy(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,k1(t,e,r,i,s)):(t=zu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!Dy(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Pl,n(a,i)&&t.ref===e.ref)return Ni(t,e,s)}return e.flags|=1,t=Ei(r,i),t.ref=e.ref,t.return=e,e.child=t}function k1(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Pl(r,i)&&t.ref===e.ref)if(ot=!1,e.pendingProps=i=r,Dy(t,s))t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,Ni(t,e,s)}return Np(t,e,n,i,s)}function P1(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden"){if(e.flags&128){if(i=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return Nb(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(e,r!==null?r.cachePool:null),r!==null?yb(e,r):Ep(),S1(e);else return e.lanes=e.childLanes=536870912,Nb(t,e,r!==null?r.baseLanes|n:n,n)}else r!==null?(qu(e,r.cachePool),yb(e,r),es(),e.memoizedState=null):(t!==null&&qu(e,null),Ep(),es());return ht(t,e,s,n),e.child}function Nb(t,e,n,i){var s=gy();return s=s===null?null:{parent:et._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&qu(e,null),Ep(),S1(e),t!==null&&xc(t,e,i,!0),null}function Xu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Np(t,e,n,i,s){return vr(e),n=by(t,e,n,i,void 0,s),i=_y(),t!==null&&!ot?(wy(t,e,s),Ni(t,e,s)):(de&&i&&fy(e),e.flags|=1,ht(t,e,n,s),e.child)}function Db(t,e,n,i,s,r){return vr(e),e.updateQueue=null,n=$S(e,i,n,s),GS(t),i=_y(),t!==null&&!ot?(wy(t,e,r),Ni(t,e,r)):(de&&i&&fy(e),e.flags|=1,ht(t,e,n,r),e.child)}function kb(t,e,n,i,s){if(vr(e),e.stateNode===null){var r=ha,a=n.contextType;typeof a=="object"&&a!==null&&(r=St(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Rp,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},yy(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?St(a):ha,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(rm(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Rp.enqueueReplaceState(r,r.state,null),ul(e,i,r,s),cl(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,l=br(n,o);r.props=l;var u=r.context,d=n.contextType;a=ha,typeof d=="object"&&d!==null&&(a=St(d));var m=n.getDerivedStateFromProps;d=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||u!==a)&&Ab(e,r,i,a),Wi=!1;var f=e.memoizedState;r.state=f,ul(e,i,r,s),cl(),u=e.memoizedState,o||f!==u||Wi?(typeof m=="function"&&(rm(e,n,m,i),u=e.memoizedState),(l=Wi||Sb(e,n,l,i,f,u,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),r.props=i,r.state=u,r.context=a,i=l):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,wp(t,e),a=e.memoizedProps,d=br(n,a),r.props=d,m=e.pendingProps,f=r.context,u=n.contextType,l=ha,typeof u=="object"&&u!==null&&(l=St(u)),o=n.getDerivedStateFromProps,(u=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==m||f!==l)&&Ab(e,r,i,l),Wi=!1,f=e.memoizedState,r.state=f,ul(e,i,r,s),cl();var g=e.memoizedState;a!==m||f!==g||Wi||t!==null&&t.dependencies!==null&&Eh(t.dependencies)?(typeof o=="function"&&(rm(e,n,o,i),g=e.memoizedState),(d=Wi||Sb(e,n,d,i,f,g,l)||t!==null&&t.dependencies!==null&&Eh(t.dependencies))?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,g,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,g,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),r.props=i,r.state=g,r.context=l,i=d):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Xu(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Ua(e,t.child,null,s),e.child=Ua(e,null,n,s)):ht(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Ni(t,e,s),t}function Pb(t,e,n,i){return vc(),e.flags|=256,ht(t,e,n,i),e.child}var am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function om(t){return{baseLanes:t,cachePool:BS()}}function lm(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=mn),t}function j1(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(tt.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(s?Zi(e):es(),de){var o=Le,l;if(l=o){e:{for(l=o,o=Un;l.nodeType!==8;){if(!o){o=null;break e}if(l=En(l.nextSibling),l===null){o=null;break e}}o=l}o!==null?(e.memoizedState={dehydrated:o,treeContext:cr!==null?{id:vi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},l=Wt(18,null,null,0),l.stateNode=o,l.return=e,e.child=l,Nt=e,Le=null,l=!0):l=!1}l||yr(e)}if(o=e.memoizedState,o!==null&&(o=o.dehydrated,o!==null))return qp(o)?e.lanes=32:e.lanes=536870912,null;_i(e)}return o=i.children,i=i.fallback,s?(es(),s=e.mode,o=kh({mode:"hidden",children:o},s),i=lr(i,s,n,null),o.return=e,i.return=e,o.sibling=i,e.child=o,s=e.child,s.memoizedState=om(n),s.childLanes=lm(t,a,n),e.memoizedState=am,i):(Zi(e),Dp(e,o))}if(l=t.memoizedState,l!==null&&(o=l.dehydrated,o!==null)){if(r)e.flags&256?(Zi(e),e.flags&=-257,e=cm(t,e,n)):e.memoizedState!==null?(es(),e.child=t.child,e.flags|=128,e=null):(es(),s=i.fallback,o=e.mode,i=kh({mode:"visible",children:i.children},o),s=lr(s,o,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,Ua(e,t.child,null,n),i=e.child,i.memoizedState=om(n),i.childLanes=lm(t,a,n),e.memoizedState=am,e=s);else if(Zi(e),qp(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var u=a.dgst;a=u,i=Error(H(419)),i.stack="",i.digest=a,jl({value:i,source:null,stack:null}),e=cm(t,e,n)}else if(ot||xc(t,e,n,!1),a=(n&t.childLanes)!==0,ot||a){if(a=Te,a!==null&&(i=n&-n,i=i&42?1:ty(i),i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==l.retryLane))throw l.retryLane=i,to(t,i),tn(a,t,i),D1;o.data==="$?"||Vp(),e=cm(t,e,n)}else o.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Le=En(o.nextSibling),Nt=e,de=!0,ur=null,Un=!1,t!==null&&(cn[un++]=vi,cn[un++]=xi,cn[un++]=cr,vi=t.id,xi=t.overflow,cr=e),e=Dp(e,i.children),e.flags|=4096);return e}return s?(es(),s=i.fallback,o=e.mode,l=t.child,u=l.sibling,i=Ei(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,u!==null?s=Ei(u,s):(s=lr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o===null?o=om(n):(l=o.cachePool,l!==null?(u=et._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=BS(),o={baseLanes:o.baseLanes|n,cachePool:l}),s.memoizedState=o,s.childLanes=lm(t,a,n),e.memoizedState=am,i):(Zi(e),n=t.child,t=n.sibling,n=Ei(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Dp(t,e){return e=kh({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function kh(t,e){return t=Wt(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function cm(t,e,n){return Ua(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jb(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),vp(t.return,e,n)}function um(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function O1(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(ht(t,e,i.children,n),i=tt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jb(t,n,e);else if(t.tag===19)jb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Ie(tt,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ih(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),um(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ih(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}um(e,!0,n,null,r);break;case"together":um(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))if(t!==null){if(xc(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Dy(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Eh(t)))}function mP(t,e,n){switch(e.tag){case 3:gh(e,e.stateNode.containerInfo),Ji(e,et,t.memoizedState.cache),vc();break;case 27:case 5:ap(e);break;case 4:gh(e,e.stateNode.containerInfo);break;case 10:Ji(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(Zi(e),e.flags|=128,null):n&e.child.childLanes?j1(t,e,n):(Zi(e),t=Ni(t,e,n),t!==null?t.sibling:null);Zi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(xc(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return O1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(tt,tt.current),i)break;return null;case 22:case 23:return e.lanes=0,P1(t,e,n);case 24:Ji(e,et,t.memoizedState.cache)}return Ni(t,e,n)}function M1(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)ot=!0;else{if(!Dy(t,n)&&!(e.flags&128))return ot=!1,mP(t,e,n);ot=!!(t.flags&131072)}else ot=!1,de&&e.flags&1048576&&LS(e,Th,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")dy(i)?(t=br(i,t),e.tag=1,e=kb(null,e,i,t,n)):(e.tag=0,e=Np(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===Jg){e.tag=11,e=Rb(null,e,i,t,n);break e}else if(s===Zg){e.tag=14,e=Ib(null,e,i,t,n);break e}}throw e=sp(i)||i,Error(H(306,e,""))}}return e;case 0:return Np(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=br(i,e.pendingProps),kb(t,e,i,s,n);case 3:e:{if(gh(e,e.stateNode.containerInfo),t===null)throw Error(H(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,wp(t,e),ul(e,i,null,n);var a=e.memoizedState;if(i=a.cache,Ji(e,et,i),i!==r.cache&&xp(e,[et],n,!0),cl(),i=a.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Pb(t,e,i,n);break e}else if(i!==s){s=dn(Error(H(424)),e),jl(s),e=Pb(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Le=En(t.firstChild),Nt=e,de=!0,ur=null,Un=!0,n=E1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(vc(),i===s){e=Ni(t,e,n);break e}ht(t,e,i,n)}e=e.child}return e;case 26:return Xu(t,e),t===null?(n=Qb(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,i=Uh(us.current).createElement(n),i[Et]=e,i[zt]=t,pt(i,n,t),at(i),e.stateNode=i):e.memoizedState=Qb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ap(e),t===null&&de&&(i=e.stateNode=wA(e.type,e.pendingProps,us.current),Nt=e,Un=!0,s=Le,Vs(e.type)?(Gp=s,Le=En(i.firstChild)):Le=s),ht(t,e,e.pendingProps.children,n),Xu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&de&&((s=i=Le)&&(i=FP(i,e.type,e.pendingProps,Un),i!==null?(e.stateNode=i,Nt=e,Le=En(i.firstChild),Un=!1,s=!0):s=!1),s||yr(e)),ap(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,Fp(s,r)?i=null:a!==null&&Fp(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=by(t,e,aP,null,null,n),Bl._currentValue=s),Xu(t,e),ht(t,e,i,n),e.child;case 6:return t===null&&de&&((t=n=Le)&&(n=zP(n,e.pendingProps,Un),n!==null?(e.stateNode=n,Nt=e,Le=null,t=!0):t=!1),t||yr(e)),null;case 13:return j1(t,e,n);case 4:return gh(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ua(e,null,i,n):ht(t,e,i,n),e.child;case 11:return Rb(t,e,e.type,e.pendingProps,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ji(e,e.type,i.value),ht(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,vr(e),s=St(s),i=i(s),e.flags|=1,ht(t,e,i,n),e.child;case 14:return Ib(t,e,e.type,e.pendingProps,n);case 15:return k1(t,e,e.type,e.pendingProps,n);case 19:return O1(t,e,n);case 31:return i=e.pendingProps,n=e.mode,i={mode:i.mode,children:i.children},t===null?(n=kh(i,n),n.ref=e.ref,e.child=n,n.return=e,e=n):(n=Ei(t.child,i),n.ref=e.ref,e.child=n,n.return=e,e=n),e;case 22:return P1(t,e,n);case 24:return vr(e),i=St(et),t===null?(s=gy(),s===null&&(s=Te,r=py(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},yy(e),Ji(e,et,s)):(t.lanes&n&&(wp(t,e),ul(e,null,null,n),cl()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Ji(e,et,i)):(i=r.cache,Ji(e,et,i),i!==s.cache&&xp(e,[et],n,!0))),ht(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function hi(t){t.flags|=4}function Ob(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!SA(e)){if(e=yn.current,e!==null&&((ce&4194048)===ce?zn!==null:(ce&62914560)!==ce&&!(ce&536870912)||e!==zn))throw ol=_p,HS;t.flags|=8192}}function Tu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?lS():536870912,t.lanes|=e,Ba|=e)}function Bo(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function pP(t,e,n){var i=e.pendingProps;switch(my(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(e),null;case 1:return Pe(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Si(et),Pa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Lo(e)?hi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hb())),Pe(e),null;case 26:return n=e.memoizedState,t===null?(hi(e),n!==null?(Pe(e),Ob(e,n)):(Pe(e),e.flags&=-16777217)):n?n!==t.memoizedState?(hi(e),Pe(e),Ob(e,n)):(Pe(e),e.flags&=-16777217):(t.memoizedProps!==i&&hi(e),Pe(e),e.flags&=-16777217),null;case 27:yh(e),n=us.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&hi(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return Pe(e),null}t=Hn.current,Lo(e)?cb(e):(t=wA(s,i,n),e.stateNode=t,hi(e))}return Pe(e),null;case 5:if(yh(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&hi(e);else{if(!i){if(e.stateNode===null)throw Error(H(166));return Pe(e),null}if(t=Hn.current,Lo(e))cb(e);else{switch(s=Uh(us.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[Et]=e,t[zt]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(pt(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&hi(e)}}return Pe(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&hi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(H(166));if(t=us.current,Lo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=Nt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[Et]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||xA(t.nodeValue,n)),t||yr(e)}else t=Uh(t).createTextNode(i),t[Et]=e,e.stateNode=t}return Pe(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Lo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Et]=e}else vc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Pe(e),s=!1}else s=hb(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(_i(e),e):(_i(e),null)}if(_i(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Tu(e,e.updateQueue),Pe(e),null;case 4:return Pa(),t===null&&Uy(e.stateNode.containerInfo),Pe(e),null;case 10:return Si(e.type),Pe(e),null;case 19:if(lt(tt),s=e.memoizedState,s===null)return Pe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Bo(s,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Ih(t),r!==null){for(e.flags|=128,Bo(s,!1),t=r.updateQueue,e.updateQueue=t,Tu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)VS(n,t),n=n.sibling;return Ie(tt,tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fn()>jh&&(e.flags|=128,i=!0,Bo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ih(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Tu(e,t),Bo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!de)return Pe(e),null}else 2*Fn()-s.renderingStartTime>jh&&n!==536870912&&(e.flags|=128,i=!0,Bo(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fn(),e.sibling=null,t=tt.current,Ie(tt,i?t&1|2:t&1),e):(Pe(e),null);case 22:case 23:return _i(e),vy(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Pe(e),e.subtreeFlags&6&&(e.flags|=8192)):Pe(e),n=e.updateQueue,n!==null&&Tu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&lt(hr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Si(et),Pe(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function gP(t,e){switch(my(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Si(et),Pa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return yh(e),null;case 13:if(_i(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));vc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(tt),null;case 4:return Pa(),null;case 10:return Si(e.type),null;case 22:case 23:return _i(e),vy(),t!==null&&lt(hr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Si(et),null;case 25:return null;default:return null}}function V1(t,e){switch(my(e),e.tag){case 3:Si(et),Pa();break;case 26:case 27:case 5:yh(e);break;case 4:Pa();break;case 13:_i(e);break;case 19:lt(tt);break;case 10:Si(e.type);break;case 22:case 23:_i(e),vy(),t!==null&&lt(hr);break;case 24:Si(et)}}function Ec(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(o){be(e,e.return,o)}}function Es(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,s=e;var l=n,u=o;try{u()}catch(d){be(s,l,d)}}}i=i.next}while(i!==r)}}catch(d){be(e,e.return,d)}}function L1(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{qS(e,n)}catch(i){be(t,t.return,i)}}}function U1(t,e,n){n.props=br(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){be(t,e,i)}}function dl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){be(t,e,s)}}function Bn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){be(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){be(t,e,s)}else n.current=null}function B1(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){be(t,t.return,s)}}function hm(t,e,n){try{var i=t.stateNode;VP(i,t.type,n,e),i[zt]=e}catch(s){be(t,t.return,s)}}function H1(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vs(t.type)||t.tag===4}function dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kp(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jd));else if(i!==4&&(i===27&&Vs(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(kp(t,e,n),t=t.sibling;t!==null;)kp(t,e,n),t=t.sibling}function Ph(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Vs(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Ph(t,e,n),t=t.sibling;t!==null;)Ph(t,e,n),t=t.sibling}function F1(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);pt(e,i,n),e[Et]=t,e[zt]=n}catch(r){be(t,t.return,r)}}var pi=!1,Fe=!1,fm=!1,Mb=typeof WeakSet=="function"?WeakSet:Set,rt=null;function yP(t,e){if(t=t.containerInfo,Bp=zh,t=IS(t),cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,u=0,d=0,m=t,f=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(o=a+s),m!==r||i!==0&&m.nodeType!==3||(l=a+i),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)f=m,m=g;for(;;){if(m===t)break t;if(f===n&&++u===s&&(o=a),f===r&&++d===i&&(l=a),(g=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=g}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hp={focusedElem:t,selectionRange:n},zh=!1,rt=e;rt!==null;)if(e=rt,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,rt=t;else for(;rt!==null;){switch(e=rt,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var w=br(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(w,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(E){be(n,n.return,E)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)zp(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":zp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,rt=t;break}rt=e.return}}function z1(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Gi(t,n),i&4&&Ec(5,n);break;case 1:if(Gi(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){be(n,n.return,a)}else{var s=br(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){be(n,n.return,a)}}i&64&&L1(n),i&512&&dl(n,n.return);break;case 3:if(Gi(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{qS(t,e)}catch(a){be(n,n.return,a)}}break;case 27:e===null&&i&4&&F1(n);case 26:case 5:Gi(t,n),e===null&&i&4&&B1(n),i&512&&dl(n,n.return);break;case 12:Gi(t,n);break;case 13:Gi(t,n),i&4&&$1(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=AP.bind(null,n),qP(t,n))));break;case 22:if(i=n.memoizedState!==null||pi,!i){e=e!==null&&e.memoizedState!==null||Fe,s=pi;var r=Fe;pi=i,(Fe=e)&&!r?Xi(t,n,(n.subtreeFlags&8772)!==0):Gi(t,n),pi=s,Fe=r}break;case 30:break;default:Gi(t,n)}}function q1(t){var e=t.alternate;e!==null&&(t.alternate=null,q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&iy(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ce=null,Ot=!1;function di(t,e,n){for(n=n.child;n!==null;)G1(t,e,n),n=n.sibling}function G1(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(fc,n)}catch{}switch(n.tag){case 26:Fe||Bn(n,e),di(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Fe||Bn(n,e);var i=Ce,s=Ot;Vs(n.type)&&(Ce=n.stateNode,Ot=!1),di(t,e,n),gl(n.stateNode),Ce=i,Ot=s;break;case 5:Fe||Bn(n,e);case 6:if(i=Ce,s=Ot,Ce=null,di(t,e,n),Ce=i,Ot=s,Ce!==null)if(Ot)try{(Ce.nodeType===9?Ce.body:Ce.nodeName==="HTML"?Ce.ownerDocument.body:Ce).removeChild(n.stateNode)}catch(r){be(n,e,r)}else try{Ce.removeChild(n.stateNode)}catch(r){be(n,e,r)}break;case 18:Ce!==null&&(Ot?(t=Ce,Kb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),zl(t)):Kb(Ce,n.stateNode));break;case 4:i=Ce,s=Ot,Ce=n.stateNode.containerInfo,Ot=!0,di(t,e,n),Ce=i,Ot=s;break;case 0:case 11:case 14:case 15:Fe||Es(2,n,e),Fe||Es(4,n,e),di(t,e,n);break;case 1:Fe||(Bn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&U1(n,e,i)),di(t,e,n);break;case 21:di(t,e,n);break;case 22:Fe=(i=Fe)||n.memoizedState!==null,di(t,e,n),Fe=i;break;default:di(t,e,n)}}function $1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zl(t)}catch(n){be(e,e.return,n)}}function vP(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Mb),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Mb),e;default:throw Error(H(435,t.tag))}}function mm(t,e){var n=vP(t);e.forEach(function(i){var s=CP.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function Xt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(Vs(o.type)){Ce=o.stateNode,Ot=!1;break e}break;case 5:Ce=o.stateNode,Ot=!1;break e;case 3:case 4:Ce=o.stateNode.containerInfo,Ot=!0;break e}o=o.return}if(Ce===null)throw Error(H(160));G1(r,a,s),Ce=null,Ot=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)X1(e,t),e=e.sibling}var wn=null;function X1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Xt(e,t),Kt(t),i&4&&(Es(3,t,t.return),Ec(3,t),Es(5,t,t.return));break;case 1:Xt(e,t),Kt(t),i&512&&(Fe||n===null||Bn(n,n.return)),i&64&&pi&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=wn;if(Xt(e,t),Kt(t),i&512&&(Fe||n===null||Bn(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[gc]||r[Et]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),pt(r,i,n),r[Et]=t,at(r),i=r;break e;case"link":var a=Zb("link","href",s).get(i+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}r=s.createElement(i),pt(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Zb("meta","content",s).get(i+(n.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}r=s.createElement(i),pt(r,i,n),s.head.appendChild(r);break;default:throw Error(H(468,i))}r[Et]=t,at(r),i=r}t.stateNode=i}else e_(s,t.type,t.stateNode);else t.stateNode=Jb(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?e_(s,t.type,t.stateNode):Jb(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&hm(t,t.memoizedProps,n.memoizedProps)}break;case 27:Xt(e,t),Kt(t),i&512&&(Fe||n===null||Bn(n,n.return)),n!==null&&i&4&&hm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Xt(e,t),Kt(t),i&512&&(Fe||n===null||Bn(n,n.return)),t.flags&32){s=t.stateNode;try{Oa(s,"")}catch(g){be(t,t.return,g)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,hm(t,s,n!==null?n.memoizedProps:s)),i&1024&&(fm=!0);break;case 6:if(Xt(e,t),Kt(t),i&4){if(t.stateNode===null)throw Error(H(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(g){be(t,t.return,g)}}break;case 3:if(Wu=null,s=wn,wn=Bh(e.containerInfo),Xt(e,t),wn=s,Kt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{zl(e.containerInfo)}catch(g){be(t,t.return,g)}fm&&(fm=!1,K1(t));break;case 4:i=wn,wn=Bh(t.stateNode.containerInfo),Xt(e,t),Kt(t),wn=i;break;case 12:Xt(e,t),Kt(t);break;case 13:Xt(e,t),Kt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(My=Fn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mm(t,i)));break;case 22:s=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=pi,d=Fe;if(pi=u||s,Fe=d||l,Xt(e,t),Fe=d,pi=u,Kt(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||l||pi||Fe||Zs(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(r=l.stateNode,s)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var m=l.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null;o.style.display=f==null||typeof f=="boolean"?"":(""+f).trim()}}catch(g){be(l,l.return,g)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(g){be(l,l.return,g)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,mm(t,n))));break;case 19:Xt(e,t),Kt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mm(t,i)));break;case 30:break;case 21:break;default:Xt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(H1(i)){n=i;break}i=i.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var s=n.stateNode,r=dm(t);Ph(t,r,s);break;case 5:var a=n.stateNode;n.flags&32&&(Oa(a,""),n.flags&=-33);var o=dm(t);Ph(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,u=dm(t);kp(t,u,l);break;default:throw Error(H(161))}}catch(d){be(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function K1(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;K1(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Gi(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)z1(t,e.alternate,e),e=e.sibling}function Zs(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Es(4,e,e.return),Zs(e);break;case 1:Bn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&U1(e,e.return,n),Zs(e);break;case 27:gl(e.stateNode);case 26:case 5:Bn(e,e.return),Zs(e);break;case 22:e.memoizedState===null&&Zs(e);break;case 30:Zs(e);break;default:Zs(e)}t=t.sibling}}function Xi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:Xi(s,r,n),Ec(4,r);break;case 1:if(Xi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){be(i,i.return,u)}if(i=r,s=i.updateQueue,s!==null){var o=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)zS(l[s],o)}catch(u){be(i,i.return,u)}}n&&a&64&&L1(r),dl(r,r.return);break;case 27:F1(r);case 26:case 5:Xi(s,r,n),n&&i===null&&a&4&&B1(r),dl(r,r.return);break;case 12:Xi(s,r,n);break;case 13:Xi(s,r,n),n&&a&4&&$1(s,r);break;case 22:r.memoizedState===null&&Xi(s,r,n),dl(r,r.return);break;case 30:break;default:Xi(s,r,n)}e=e.sibling}}function ky(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&bc(n))}function Py(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&bc(t))}function Vn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Y1(t,e,n,i),e=e.sibling}function Y1(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Vn(t,e,n,i),s&2048&&Ec(9,e);break;case 1:Vn(t,e,n,i);break;case 3:Vn(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&bc(t)));break;case 12:if(s&2048){Vn(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){be(e,e.return,l)}}else Vn(t,e,n,i);break;case 13:Vn(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?Vn(t,e,n,i):fl(t,e):r._visibility&2?Vn(t,e,n,i):(r._visibility|=2,Qr(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&ky(a,e);break;case 24:Vn(t,e,n,i),s&2048&&Py(e.alternate,e);break;default:Vn(t,e,n,i)}}function Qr(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,o=n,l=i,u=a.flags;switch(a.tag){case 0:case 11:case 15:Qr(r,a,o,l,s),Ec(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&2?Qr(r,a,o,l,s):fl(r,a):(d._visibility|=2,Qr(r,a,o,l,s)),s&&u&2048&&ky(a.alternate,a);break;case 24:Qr(r,a,o,l,s),s&&u&2048&&Py(a.alternate,a);break;default:Qr(r,a,o,l,s)}e=e.sibling}}function fl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:fl(n,i),s&2048&&ky(i.alternate,i);break;case 24:fl(n,i),s&2048&&Py(i.alternate,i);break;default:fl(n,i)}e=e.sibling}}var Ko=8192;function Gr(t){if(t.subtreeFlags&Ko)for(t=t.child;t!==null;)W1(t),t=t.sibling}function W1(t){switch(t.tag){case 26:Gr(t),t.flags&Ko&&t.memoizedState!==null&&ij(wn,t.memoizedState,t.memoizedProps);break;case 5:Gr(t);break;case 3:case 4:var e=wn;wn=Bh(t.stateNode.containerInfo),Gr(t),wn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Ko,Ko=16777216,Gr(t),Ko=e):Gr(t));break;default:Gr(t)}}function Q1(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ho(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];rt=i,Z1(i,t)}Q1(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)J1(t),t=t.sibling}function J1(t){switch(t.tag){case 0:case 11:case 15:Ho(t),t.flags&2048&&Es(9,t,t.return);break;case 3:Ho(t);break;case 12:Ho(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ku(t)):Ho(t);break;default:Ho(t)}}function Ku(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];rt=i,Z1(i,t)}Q1(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Es(8,e,e.return),Ku(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Ku(e));break;default:Ku(e)}t=t.sibling}}function Z1(t,e){for(;rt!==null;){var n=rt;switch(n.tag){case 0:case 11:case 15:Es(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:bc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,rt=i;else e:for(n=t;rt!==null;){i=rt;var s=i.sibling,r=i.return;if(q1(i),i===n){rt=null;break e}if(s!==null){s.return=r,rt=s;break e}rt=r}}}var xP={getCacheForType:function(t){var e=St(et),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},bP=typeof WeakMap=="function"?WeakMap:Map,ge=0,Te=null,re=null,ce=0,pe=0,Yt=null,os=!1,no=!1,jy=!1,Di=0,Ue=0,Ss=0,dr=0,Oy=0,mn=0,Ba=0,ml=null,Mt=null,Pp=!1,My=0,jh=1/0,Oh=null,fs=null,ft=0,ms=null,Ha=null,Ca=0,jp=0,Op=null,eA=null,pl=0,Mp=null;function en(){if(ge&2&&ce!==0)return ce&-ce;if(J.T!==null){var t=Ma;return t!==0?t:Ly()}return hS()}function tA(){mn===0&&(mn=!(ce&536870912)||de?oS():536870912);var t=yn.current;return t!==null&&(t.flags|=32),mn}function tn(t,e,n){(t===Te&&(pe===2||pe===9)||t.cancelPendingCommit!==null)&&(Fa(t,0),ls(t,ce,mn,!1)),pc(t,n),(!(ge&2)||t!==Te)&&(t===Te&&(!(ge&2)&&(dr|=n),Ue===4&&ls(t,ce,mn,!1)),si(t))}function nA(t,e,n){if(ge&6)throw Error(H(327));var i=!n&&(e&124)===0&&(e&t.expiredLanes)===0||mc(t,e),s=i?TP(t,e):pm(t,e,!0),r=i;do{if(s===0){no&&!i&&ls(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!_P(n)){s=pm(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;s=ml;var l=o.current.memoizedState.isDehydrated;if(l&&(Fa(o,a).flags|=256),a=pm(o,a,!1),a!==2){if(jy&&!l){o.errorRecoveryDisabledLanes|=r,dr|=r,s=4;break e}r=Mt,Mt=s,r!==null&&(Mt===null?Mt=r:Mt.push.apply(Mt,r))}s=a}if(r=!1,s!==2)continue}}if(s===1){Fa(t,0),ls(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:ls(i,e,mn,!os);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(s=My+300-Fn(),10<s)){if(ls(i,e,mn,!os),_d(i,0,!0)!==0)break e;i.timeoutHandle=_A(Vb.bind(null,i,n,Mt,Oh,Pp,e,mn,dr,Ba,os,r,2,-0,0),s);break e}Vb(i,n,Mt,Oh,Pp,e,mn,dr,Ba,os,r,0,-0,0)}}break}while(!0);si(t)}function Vb(t,e,n,i,s,r,a,o,l,u,d,m,f,g){if(t.timeoutHandle=-1,m=e.subtreeFlags,(m&8192||(m&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:nj},W1(e),m=sj(),m!==null)){t.cancelPendingCommit=m(Ub.bind(null,t,e,r,n,i,s,a,o,l,d,1,f,g)),ls(t,r,a,!u);return}Ub(t,e,r,n,i,s,a,o,l)}function _P(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!sn(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e,n,i){e&=~Oy,e&=~dr,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-Zt(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&cS(t,n,e)}function Dd(){return ge&6?!0:(Sc(0),!1)}function Vy(){if(re!==null){if(pe===0)var t=re.return;else t=re,bi=kr=null,Ty(t),Aa=null,Ml=0,t=re;for(;t!==null;)V1(t.alternate,t),t=t.return;re=null}}function Fa(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,UP(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Vy(),Te=t,re=n=Ei(t.current,null),ce=e,pe=0,Yt=null,os=!1,no=mc(t,e),jy=!1,Ba=mn=Oy=dr=Ss=Ue=0,Mt=ml=null,Pp=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Zt(i),r=1<<s;e|=t[s],i&=~r}return Di=e,Sd(),n}function iA(t,e){ie=null,J.H=Rh,e===_c||e===Cd?(e=pb(),pe=3):e===HS?(e=pb(),pe=4):pe=e===D1?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Yt=e,re===null&&(Ue=1,Dh(t,dn(e,t.current)))}function sA(){var t=J.H;return J.H=Rh,t===null?Rh:t}function rA(){var t=J.A;return J.A=xP,t}function Vp(){Ue=4,os||(ce&4194048)!==ce&&yn.current!==null||(no=!0),!(Ss&134217727)&&!(dr&134217727)||Te===null||ls(Te,ce,mn,!1)}function pm(t,e,n){var i=ge;ge|=2;var s=sA(),r=rA();(Te!==t||ce!==e)&&(Oh=null,Fa(t,e)),e=!1;var a=Ue;e:do try{if(pe!==0&&re!==null){var o=re,l=Yt;switch(pe){case 8:Vy(),a=6;break e;case 3:case 2:case 9:case 6:yn.current===null&&(e=!0);var u=pe;if(pe=0,Yt=null,ma(t,o,l,u),n&&no){a=0;break e}break;default:u=pe,pe=0,Yt=null,ma(t,o,l,u)}}wP(),a=Ue;break}catch(d){iA(t,d)}while(!0);return e&&t.shellSuspendCounter++,bi=kr=null,ge=i,J.H=s,J.A=r,re===null&&(Te=null,ce=0,Sd()),a}function wP(){for(;re!==null;)aA(re)}function TP(t,e){var n=ge;ge|=2;var i=sA(),s=rA();Te!==t||ce!==e?(Oh=null,jh=Fn()+500,Fa(t,e)):no=mc(t,e);e:do try{if(pe!==0&&re!==null){e=re;var r=Yt;t:switch(pe){case 1:pe=0,Yt=null,ma(t,e,r,1);break;case 2:case 9:if(mb(r)){pe=0,Yt=null,Lb(e);break}e=function(){pe!==2&&pe!==9||Te!==t||(pe=7),si(t)},r.then(e,e);break e;case 3:pe=7;break e;case 4:pe=5;break e;case 7:mb(r)?(pe=0,Yt=null,Lb(e)):(pe=0,Yt=null,ma(t,e,r,7));break;case 5:var a=null;switch(re.tag){case 26:a=re.memoizedState;case 5:case 27:var o=re;if(!a||SA(a)){pe=0,Yt=null;var l=o.sibling;if(l!==null)re=l;else{var u=o.return;u!==null?(re=u,kd(u)):re=null}break t}}pe=0,Yt=null,ma(t,e,r,5);break;case 6:pe=0,Yt=null,ma(t,e,r,6);break;case 8:Vy(),Ue=6;break e;default:throw Error(H(462))}}EP();break}catch(d){iA(t,d)}while(!0);return bi=kr=null,J.H=i,J.A=s,ge=n,re!==null?0:(Te=null,ce=0,Sd(),Ue)}function EP(){for(;re!==null&&!$D();)aA(re)}function aA(t){var e=M1(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?kd(t):re=e}function Lb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Db(n,e,e.pendingProps,e.type,void 0,ce);break;case 11:e=Db(n,e,e.pendingProps,e.type.render,e.ref,ce);break;case 5:Ty(e);default:V1(n,e),e=re=VS(e,Di),e=M1(n,e,Di)}t.memoizedProps=t.pendingProps,e===null?kd(t):re=e}function ma(t,e,n,i){bi=kr=null,Ty(e),Aa=null,Ml=0;var s=e.return;try{if(fP(t,s,e,n,ce)){Ue=1,Dh(t,dn(n,t.current)),re=null;return}}catch(r){if(s!==null)throw re=s,r;Ue=1,Dh(t,dn(n,t.current)),re=null;return}e.flags&32768?(de||i===1?t=!0:no||ce&536870912?t=!1:(os=t=!0,(i===2||i===9||i===3||i===6)&&(i=yn.current,i!==null&&i.tag===13&&(i.flags|=16384))),oA(e,t)):kd(e)}function kd(t){var e=t;do{if(e.flags&32768){oA(e,os);return}t=e.return;var n=pP(e.alternate,e,Di);if(n!==null){re=n;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);Ue===0&&(Ue=5)}function oA(t,e){do{var n=gP(t.alternate,t);if(n!==null){n.flags&=32767,re=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){re=t;return}re=t=n}while(t!==null);Ue=6,re=null}function Ub(t,e,n,i,s,r,a,o,l){t.cancelPendingCommit=null;do Pd();while(ft!==0);if(ge&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(r=e.lanes|e.childLanes,r|=uy,nk(t,n,r,a,o,l),t===Te&&(re=Te=null,ce=0),Ha=e,ms=t,Ca=n,jp=r,Op=s,eA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,RP(vh,function(){return dA(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=J.T,J.T=null,s=fe.p,fe.p=2,a=ge,ge|=4;try{yP(t,e,n)}finally{ge=a,fe.p=s,J.T=i}}ft=1,lA(),cA(),uA()}}function lA(){if(ft===1){ft=0;var t=ms,e=Ha,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=J.T,J.T=null;var i=fe.p;fe.p=2;var s=ge;ge|=4;try{X1(e,t);var r=Hp,a=IS(t.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&RS(o.ownerDocument.documentElement,o)){if(l!==null&&cy(o)){var u=l.start,d=l.end;if(d===void 0&&(d=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(d,o.value.length);else{var m=o.ownerDocument||document,f=m&&m.defaultView||window;if(f.getSelection){var g=f.getSelection(),w=o.textContent.length,E=Math.min(l.start,w),T=l.end===void 0?E:Math.min(l.end,w);!g.extend&&E>T&&(a=T,T=E,E=a);var v=ab(o,E),x=ab(o,T);if(v&&x&&(g.rangeCount!==1||g.anchorNode!==v.node||g.anchorOffset!==v.offset||g.focusNode!==x.node||g.focusOffset!==x.offset)){var b=m.createRange();b.setStart(v.node,v.offset),g.removeAllRanges(),E>T?(g.addRange(b),g.extend(x.node,x.offset)):(b.setEnd(x.node,x.offset),g.addRange(b))}}}}for(m=[],g=o;g=g.parentNode;)g.nodeType===1&&m.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<m.length;o++){var R=m[o];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}zh=!!Bp,Hp=Bp=null}finally{ge=s,fe.p=i,J.T=n}}t.current=e,ft=2}}function cA(){if(ft===2){ft=0;var t=ms,e=Ha,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=J.T,J.T=null;var i=fe.p;fe.p=2;var s=ge;ge|=4;try{z1(t,e.alternate,e)}finally{ge=s,fe.p=i,J.T=n}}ft=3}}function uA(){if(ft===4||ft===3){ft=0,XD();var t=ms,e=Ha,n=Ca,i=eA;e.subtreeFlags&10256||e.flags&10256?ft=5:(ft=0,Ha=ms=null,hA(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(fs=null),ny(n),e=e.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(fc,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=J.T,s=fe.p,fe.p=2,J.T=null;try{for(var r=t.onRecoverableError,a=0;a<i.length;a++){var o=i[a];r(o.value,{componentStack:o.stack})}}finally{J.T=e,fe.p=s}}Ca&3&&Pd(),si(t),s=t.pendingLanes,n&4194090&&s&42?t===Mp?pl++:(pl=0,Mp=t):pl=0,Sc(0)}}function hA(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,bc(e)))}function Pd(t){return lA(),cA(),uA(),dA()}function dA(){if(ft!==5)return!1;var t=ms,e=jp;jp=0;var n=ny(Ca),i=J.T,s=fe.p;try{fe.p=32>n?32:n,J.T=null,n=Op,Op=null;var r=ms,a=Ca;if(ft=0,Ha=ms=null,Ca=0,ge&6)throw Error(H(331));var o=ge;if(ge|=4,J1(r.current),Y1(r,r.current,a,n),ge=o,Sc(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(fc,r)}catch{}return!0}finally{fe.p=s,J.T=i,hA(t,e)}}function Bb(t,e,n){e=dn(n,e),e=Ip(t.stateNode,e,2),t=ds(t,e,2),t!==null&&(pc(t,2),si(t))}function be(t,e,n){if(t.tag===3)Bb(t,t,n);else for(;e!==null;){if(e.tag===3){Bb(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fs===null||!fs.has(i))){t=dn(n,t),n=I1(2),i=ds(e,n,2),i!==null&&(N1(n,i,e,t),pc(i,2),si(i));break}}e=e.return}}function gm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(jy=!0,s.add(n),t=SP.bind(null,t,e,n),e.then(t,t))}function SP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Te===t&&(ce&n)===n&&(Ue===4||Ue===3&&(ce&62914560)===ce&&300>Fn()-My?!(ge&2)&&Fa(t,0):Oy|=n,Ba===ce&&(Ba=0)),si(t)}function fA(t,e){e===0&&(e=lS()),t=to(t,e),t!==null&&(pc(t,e),si(t))}function AP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fA(t,n)}function CP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(H(314))}i!==null&&i.delete(e),fA(t,n)}function RP(t,e){return ey(t,e)}var Mh=null,Jr=null,Lp=!1,Vh=!1,ym=!1,fr=0;function si(t){t!==Jr&&t.next===null&&(Jr===null?Mh=Jr=t:Jr=Jr.next=t),Vh=!0,Lp||(Lp=!0,NP())}function Sc(t,e){if(!ym&&Vh){ym=!0;do for(var n=!1,i=Mh;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-Zt(42|t)+1)-1,r&=s&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Hb(i,r))}else r=ce,r=_d(i,i===Te?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||mc(i,r)||(n=!0,Hb(i,r));i=i.next}while(n);ym=!1}}function IP(){mA()}function mA(){Vh=Lp=!1;var t=0;fr!==0&&(LP()&&(t=fr),fr=0);for(var e=Fn(),n=null,i=Mh;i!==null;){var s=i.next,r=pA(i,e);r===0?(i.next=null,n===null?Mh=s:n.next=s,s===null&&(Jr=n)):(n=i,(t!==0||r&3)&&(Vh=!0)),i=s}Sc(t)}function pA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-Zt(r),o=1<<a,l=s[a];l===-1?(!(o&n)||o&i)&&(s[a]=tk(o,e)):l<=e&&(t.expiredLanes|=o),r&=~o}if(e=Te,n=ce,n=_d(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(pe===2||pe===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&zf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||mc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&zf(i),ny(n)){case 2:case 8:n=rS;break;case 32:n=vh;break;case 268435456:n=aS;break;default:n=vh}return i=gA.bind(null,t),n=ey(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&zf(i),t.callbackPriority=2,t.callbackNode=null,2}function gA(t,e){if(ft!==0&&ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Pd()&&t.callbackNode!==n)return null;var i=ce;return i=_d(t,t===Te?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(nA(t,i,e),pA(t,Fn()),t.callbackNode!=null&&t.callbackNode===n?gA.bind(null,t):null)}function Hb(t,e){if(Pd())return null;nA(t,e,!0)}function NP(){BP(function(){ge&6?ey(sS,IP):mA()})}function Ly(){return fr===0&&(fr=oS()),fr}function Fb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bu(""+t)}function zb(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function DP(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=Fb((s[zt]||null).action),a=i.submitter;a&&(e=(e=a[zt]||null)?Fb(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var o=new wd("action","action",null,i,s);t.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fr!==0){var l=a?zb(s,a):new FormData(s);Cp(n,{pending:!0,data:l,method:s.method,action:r},null,l)}}else typeof r=="function"&&(o.preventDefault(),l=a?zb(s,a):new FormData(s),Cp(n,{pending:!0,data:l,method:s.method,action:r},r,l))},currentTarget:s}]})}}for(var vm=0;vm<pp.length;vm++){var xm=pp[vm],kP=xm.toLowerCase(),PP=xm[0].toUpperCase()+xm.slice(1);Dn(kP,"on"+PP)}Dn(DS,"onAnimationEnd");Dn(kS,"onAnimationIteration");Dn(PS,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(Wk,"onTransitionRun");Dn(Qk,"onTransitionStart");Dn(Jk,"onTransitionCancel");Dn(jS,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function yA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(d){Nh(d)}s.currentTarget=null,r=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=u;try{r(s)}catch(d){Nh(d)}s.currentTarget=null,r=l}}}}function se(t,e){var n=e[lp];n===void 0&&(n=e[lp]=new Set);var i=t+"__bubble";n.has(i)||(vA(e,t,2,!1),n.add(i))}function bm(t,e,n){var i=0;e&&(i|=4),vA(n,t,i,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function Uy(t){if(!t[Eu]){t[Eu]=!0,dS.forEach(function(n){n!=="selectionchange"&&(jP.has(n)||bm(n,!1,t),bm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,bm("selectionchange",!1,e))}}function vA(t,e,n,i){switch(NA(e)){case 2:var s=oj;break;case 8:s=lj;break;default:s=zy}n=s.bind(null,e,n,t),s=void 0,!dp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _m(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===s)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===s)return;a=a.return}for(;o!==null;){if(a=ra(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){i=r=a;continue e}o=o.parentNode}}i=i.return}bS(function(){var u=r,d=ry(n),m=[];e:{var f=OS.get(t);if(f!==void 0){var g=wd,w=t;switch(t){case"keypress":if(Fu(n)===0)break e;case"keydown":case"keyup":g=Rk;break;case"focusin":w="focus",g=Qf;break;case"focusout":w="blur",g=Qf;break;case"beforeblur":case"afterblur":g=Qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Wx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Dk;break;case DS:case kS:case PS:g=xk;break;case jS:g=Pk;break;case"scroll":case"scrollend":g=mk;break;case"wheel":g=Ok;break;case"copy":case"cut":case"paste":g=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Jx;break;case"toggle":case"beforetoggle":g=Vk}var E=(e&4)!==0,T=!E&&(t==="scroll"||t==="scrollend"),v=E?f!==null?f+"Capture":null:f;E=[];for(var x=u,b;x!==null;){var R=x;if(b=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||b===null||v===null||(R=Dl(x,v),R!=null&&E.push(Ll(x,R,b))),T)break;x=x.return}0<E.length&&(f=new g(f,w,null,n,d),m.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==hp&&(w=n.relatedTarget||n.fromElement)&&(ra(w)||w[Za]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?ra(w):null,w!==null&&(T=dc(w),E=w.tag,w!==T||E!==5&&E!==27&&E!==6)&&(w=null)):(g=null,w=u),g!==w)){if(E=Wx,R="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(E=Jx,R="onPointerLeave",v="onPointerEnter",x="pointer"),T=g==null?f:Xo(g),b=w==null?f:Xo(w),f=new E(R,x+"leave",g,n,d),f.target=T,f.relatedTarget=b,R=null,ra(d)===u&&(E=new E(v,x+"enter",w,n,d),E.target=b,E.relatedTarget=T,R=E),T=R,g&&w)t:{for(E=g,v=w,x=0,b=E;b;b=$r(b))x++;for(b=0,R=v;R;R=$r(R))b++;for(;0<x-b;)E=$r(E),x--;for(;0<b-x;)v=$r(v),b--;for(;x--;){if(E===v||v!==null&&E===v.alternate)break t;E=$r(E),v=$r(v)}E=null}else E=null;g!==null&&qb(m,f,g,E,!1),w!==null&&T!==null&&qb(m,T,w,E,!0)}}e:{if(f=u?Xo(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=nb;else if(tb(f))if(AS)j=Xk;else{j=Gk;var V=qk}else g=f.nodeName,!g||g.toLowerCase()!=="input"||f.type!=="checkbox"&&f.type!=="radio"?u&&sy(u.elementType)&&(j=nb):j=$k;if(j&&(j=j(t,u))){SS(m,j,n,d);break e}V&&V(t,f,u),t==="focusout"&&u&&f.type==="number"&&u.memoizedProps.value!=null&&up(f,"number",f.value)}switch(V=u?Xo(u):window,t){case"focusin":(tb(V)||V.contentEditable==="true")&&(la=V,fp=u,rl=null);break;case"focusout":rl=fp=la=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,ob(m,n,d);break;case"selectionchange":if(Yk)break;case"keydown":case"keyup":ob(m,n,d)}var S;if(ly)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else oa?TS(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(wS&&n.locale!=="ko"&&(oa||_!=="onCompositionStart"?_==="onCompositionEnd"&&oa&&(S=_S()):(as=d,ay="value"in as?as.value:as.textContent,oa=!0)),V=Lh(u,_),0<V.length&&(_=new Qx(_,t,null,n,d),m.push({event:_,listeners:V}),S?_.data=S:(S=ES(n),S!==null&&(_.data=S)))),(S=Uk?Bk(t,n):Hk(t,n))&&(_=Lh(u,"onBeforeInput"),0<_.length&&(V=new Qx("onBeforeInput","beforeinput",null,n,d),m.push({event:V,listeners:_}),V.data=S)),DP(m,t,u,n,d)}yA(m,e)})}function Ll(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lh(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Dl(t,n),s!=null&&i.unshift(Ll(t,s,r)),s=Dl(t,e),s!=null&&i.push(Ll(t,s,r))),t.tag===3)return i;t=t.return}return[]}function $r(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function qb(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var o=n,l=o.alternate,u=o.stateNode;if(o=o.tag,l!==null&&l===i)break;o!==5&&o!==26&&o!==27||u===null||(l=u,s?(u=Dl(n,r),u!=null&&a.unshift(Ll(n,u,l))):s||(u=Dl(n,r),u!=null&&a.push(Ll(n,u,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var OP=/\r\n?/g,MP=/\u0000|\uFFFD/g;function Gb(t){return(typeof t=="string"?t:""+t).replace(OP,`
`).replace(MP,"")}function xA(t,e){return e=Gb(e),Gb(t)===e}function jd(){}function ye(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Oa(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Oa(t,""+i);break;case"className":yu(t,"class",i);break;case"tabIndex":yu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":yu(t,n,i);break;case"style":xS(t,i,r);break;case"data":if(e!=="object"){yu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&ye(t,e,"name",s.name,s,null),ye(t,e,"formEncType",s.formEncType,s,null),ye(t,e,"formMethod",s.formMethod,s,null),ye(t,e,"formTarget",s.formTarget,s,null)):(ye(t,e,"encType",s.encType,s,null),ye(t,e,"method",s.method,s,null),ye(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Bu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=jd);break;case"onScroll":i!=null&&se("scroll",t);break;case"onScrollEnd":i!=null&&se("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Bu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":se("beforetoggle",t),se("toggle",t),Uu(t,"popover",i);break;case"xlinkActuate":ui(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ui(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ui(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ui(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ui(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ui(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ui(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ui(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ui(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Uu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=dk.get(n)||n,Uu(t,n,i))}}function Up(t,e,n,i,s,r){switch(n){case"style":xS(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(H(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Oa(t,i):(typeof i=="number"||typeof i=="bigint")&&Oa(t,""+i);break;case"onScroll":i!=null&&se("scroll",t);break;case"onScrollEnd":i!=null&&se("scrollend",t);break;case"onClick":i!=null&&(t.onclick=jd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fS.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[zt]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Uu(t,n,i)}}}function pt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":se("error",t),se("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:ye(t,e,r,a,n,null)}}s&&ye(t,e,"srcSet",n.srcSet,n,null),i&&ye(t,e,"src",n.src,n,null);return;case"input":se("invalid",t);var o=r=a=s=null,l=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":l=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":o=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(H(137,e));break;default:ye(t,e,i,d,n,null)}}gS(t,r,o,l,u,a,s,!1),xh(t);return;case"select":se("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(o=n[s],o!=null))switch(s){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":i=o;default:ye(t,e,s,o,n,null)}e=r,n=a,t.multiple=!!i,e!=null?_a(t,!!i,e,!1):n!=null&&_a(t,!!i,n,!0);return;case"textarea":se("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":i=o;break;case"defaultValue":s=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(H(91));break;default:ye(t,e,a,o,n,null)}vS(t,i,s,r),xh(t);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ye(t,e,l,i,n,null)}return;case"dialog":se("beforetoggle",t),se("toggle",t),se("cancel",t),se("close",t);break;case"iframe":case"object":se("load",t);break;case"video":case"audio":for(i=0;i<Vl.length;i++)se(Vl[i],t);break;case"image":se("error",t),se("load",t);break;case"details":se("toggle",t);break;case"embed":case"source":case"link":se("error",t),se("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:ye(t,e,u,i,n,null)}return;default:if(sy(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Up(t,e,d,i,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(i=n[o],i!=null&&ye(t,e,o,i,n,null))}function VP(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,o=null,l=null,u=null,d=null;for(g in n){var m=n[g];if(n.hasOwnProperty(g)&&m!=null)switch(g){case"checked":break;case"value":break;case"defaultValue":l=m;default:i.hasOwnProperty(g)||ye(t,e,g,null,i,m)}}for(var f in i){var g=i[f];if(m=n[f],i.hasOwnProperty(f)&&(g!=null||m!=null))switch(f){case"type":r=g;break;case"name":s=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":a=g;break;case"defaultValue":o=g;break;case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(H(137,e));break;default:g!==m&&ye(t,e,f,g,i,m)}}cp(t,a,o,l,u,d,r,s);return;case"select":g=a=o=f=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":g=l;default:i.hasOwnProperty(r)||ye(t,e,r,null,i,l)}for(s in i)if(r=i[s],l=n[s],i.hasOwnProperty(s)&&(r!=null||l!=null))switch(s){case"value":f=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==l&&ye(t,e,s,r,i,l)}e=o,n=a,i=g,f!=null?_a(t,!!n,f,!1):!!i!=!!n&&(e!=null?_a(t,!!n,e,!0):_a(t,!!n,n?[]:"",!1));return;case"textarea":g=f=null;for(o in n)if(s=n[o],n.hasOwnProperty(o)&&s!=null&&!i.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:ye(t,e,o,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":f=s;break;case"defaultValue":g=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(H(91));break;default:s!==r&&ye(t,e,a,s,i,r)}yS(t,f,g);return;case"option":for(var w in n)if(f=n[w],n.hasOwnProperty(w)&&f!=null&&!i.hasOwnProperty(w))switch(w){case"selected":t.selected=!1;break;default:ye(t,e,w,null,i,f)}for(l in i)if(f=i[l],g=n[l],i.hasOwnProperty(l)&&f!==g&&(f!=null||g!=null))switch(l){case"selected":t.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ye(t,e,l,f,i,g)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var E in n)f=n[E],n.hasOwnProperty(E)&&f!=null&&!i.hasOwnProperty(E)&&ye(t,e,E,null,i,f);for(u in i)if(f=i[u],g=n[u],i.hasOwnProperty(u)&&f!==g&&(f!=null||g!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,e));break;default:ye(t,e,u,f,i,g)}return;default:if(sy(e)){for(var T in n)f=n[T],n.hasOwnProperty(T)&&f!==void 0&&!i.hasOwnProperty(T)&&Up(t,e,T,void 0,i,f);for(d in i)f=i[d],g=n[d],!i.hasOwnProperty(d)||f===g||f===void 0&&g===void 0||Up(t,e,d,f,i,g);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&f!=null&&!i.hasOwnProperty(v)&&ye(t,e,v,null,i,f);for(m in i)f=i[m],g=n[m],!i.hasOwnProperty(m)||f===g||f==null&&g==null||ye(t,e,m,f,i,g)}var Bp=null,Hp=null;function Uh(t){return t.nodeType===9?t:t.ownerDocument}function $b(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bA(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Fp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wm=null;function LP(){var t=window.event;return t&&t.type==="popstate"?t===wm?!1:(wm=t,!0):(wm=null,!1)}var _A=typeof setTimeout=="function"?setTimeout:void 0,UP=typeof clearTimeout=="function"?clearTimeout:void 0,Xb=typeof Promise=="function"?Promise:void 0,BP=typeof queueMicrotask=="function"?queueMicrotask:typeof Xb<"u"?function(t){return Xb.resolve(null).then(t).catch(HP)}:_A;function HP(t){setTimeout(function(){throw t})}function Vs(t){return t==="head"}function Kb(t,e){var n=e,i=0,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(0<i&&8>i){n=i;var a=t.ownerDocument;if(n&1&&gl(a.documentElement),n&2&&gl(a.body),n&4)for(n=a.head,gl(n),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[gc]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=o}}if(s===0){t.removeChild(r),zl(e);return}s--}else n==="$"||n==="$?"||n==="$!"?s++:i=n.charCodeAt(0)-48;else i=0;n=r}while(n);zl(e)}function zp(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":zp(n),iy(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function FP(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[gc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=En(t.nextSibling),t===null)break}return null}function zP(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=En(t.nextSibling),t===null))return null;return t}function qp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function qP(t,e){var n=t.ownerDocument;if(t.data!=="$?"||n.readyState==="complete")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function En(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Gp=null;function Yb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function wA(t,e,n){switch(e=Uh(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function gl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);iy(t)}var vn=new Map,Wb=new Set;function Bh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Bi=fe.d;fe.d={f:GP,r:$P,D:XP,C:KP,L:YP,m:WP,X:JP,S:QP,M:ZP};function GP(){var t=Bi.f(),e=Dd();return t||e}function $P(t){var e=eo(t);e!==null&&e.tag===5&&e.type==="form"?p1(e):Bi.r(t)}var io=typeof document>"u"?null:document;function TA(t,e,n){var i=io;if(i&&typeof e=="string"&&e){var s=hn(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Wb.has(s)||(Wb.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),pt(e,"link",t),at(e),i.head.appendChild(e)))}}function XP(t){Bi.D(t),TA("dns-prefetch",t,null)}function KP(t,e){Bi.C(t,e),TA("preconnect",t,e)}function YP(t,e,n){Bi.L(t,e,n);var i=io;if(i&&t&&e){var s='link[rel="preload"][as="'+hn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+hn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+hn(n.imageSizes)+'"]')):s+='[href="'+hn(t)+'"]';var r=s;switch(e){case"style":r=za(t);break;case"script":r=so(t)}vn.has(r)||(t=Ae({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),vn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Ac(r))||e==="script"&&i.querySelector(Cc(r))||(e=i.createElement("link"),pt(e,"link",t),at(e),i.head.appendChild(e)))}}function WP(t,e){Bi.m(t,e);var n=io;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+hn(i)+'"][href="'+hn(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=so(t)}if(!vn.has(r)&&(t=Ae({rel:"modulepreload",href:t},e),vn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cc(r)))return}i=n.createElement("link"),pt(i,"link",t),at(i),n.head.appendChild(i)}}}function QP(t,e,n){Bi.S(t,e,n);var i=io;if(i&&t){var s=ba(i).hoistableStyles,r=za(t);e=e||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Ac(r)))o.loading=5;else{t=Ae({rel:"stylesheet",href:t,"data-precedence":e},n),(n=vn.get(r))&&By(t,n);var l=a=i.createElement("link");at(l),pt(l,"link",t),l._p=new Promise(function(u,d){l.onload=u,l.onerror=d}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Yu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}}function JP(t,e){Bi.X(t,e);var n=io;if(n&&t){var i=ba(n).hoistableScripts,s=so(t),r=i.get(s);r||(r=n.querySelector(Cc(s)),r||(t=Ae({src:t,async:!0},e),(e=vn.get(s))&&Hy(t,e),r=n.createElement("script"),at(r),pt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function ZP(t,e){Bi.M(t,e);var n=io;if(n&&t){var i=ba(n).hoistableScripts,s=so(t),r=i.get(s);r||(r=n.querySelector(Cc(s)),r||(t=Ae({src:t,async:!0,type:"module"},e),(e=vn.get(s))&&Hy(t,e),r=n.createElement("script"),at(r),pt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Qb(t,e,n,i){var s=(s=us.current)?Bh(s):null;if(!s)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=za(n.href),n=ba(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=za(n.href);var r=ba(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(Ac(t)))&&!r._p&&(a.instance=r,a.state.loading=5),vn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},vn.set(t,n),r||ej(s,t,n,a.state))),e&&i===null)throw Error(H(528,""));return a}if(e&&i!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=so(n),n=ba(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function za(t){return'href="'+hn(t)+'"'}function Ac(t){return'link[rel="stylesheet"]['+t+"]"}function EA(t){return Ae({},t,{"data-precedence":t.precedence,precedence:null})}function ej(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),pt(e,"link",n),at(e),t.head.appendChild(e))}function so(t){return'[src="'+hn(t)+'"]'}function Cc(t){return"script[async]"+t}function Jb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+hn(n.href)+'"]');if(i)return e.instance=i,at(i),i;var s=Ae({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),at(i),pt(i,"style",s),Yu(i,n.precedence,t),e.instance=i;case"stylesheet":s=za(n.href);var r=t.querySelector(Ac(s));if(r)return e.state.loading|=4,e.instance=r,at(r),r;i=EA(n),(s=vn.get(s))&&By(i,s),r=(t.ownerDocument||t).createElement("link"),at(r);var a=r;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),pt(r,"link",i),e.state.loading|=4,Yu(r,n.precedence,t),e.instance=r;case"script":return r=so(n.src),(s=t.querySelector(Cc(r)))?(e.instance=s,at(s),s):(i=n,(s=vn.get(r))&&(i=Ae({},n),Hy(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),at(s),pt(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Yu(i,n.precedence,t));return e.instance}function Yu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===e)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function By(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Hy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Wu=null;function Zb(t,e,n){if(Wu===null){var i=new Map,s=Wu=new Map;s.set(n,i)}else s=Wu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[gc]||r[Et]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var o=i.get(a);o?o.push(r):i.set(a,[r])}}return i}function e_(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function tj(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function SA(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Ul=null;function nj(){}function ij(t,e,n){if(Ul===null)throw Error(H(475));var i=Ul;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=za(n.href),r=t.querySelector(Ac(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Hh.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,at(r);return}r=t.ownerDocument||t,n=EA(n),(s=vn.get(s))&&By(n,s),r=r.createElement("link"),at(r);var a=r;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),pt(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Hh.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function sj(){if(Ul===null)throw Error(H(475));var t=Ul;return t.stylesheets&&t.count===0&&$p(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&$p(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Hh(){if(this.count--,this.count===0){if(this.stylesheets)$p(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Fh=null;function $p(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Fh=new Map,e.forEach(rj,t),Fh=null,Hh.call(t))}function rj(t,e){if(!(e.state.loading&4)){var n=Fh.get(t);if(n)var i=n.get(null);else{n=new Map,Fh.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Hh.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var Bl={$$typeof:yi,Provider:null,Consumer:null,_currentValue:or,_currentValue2:or,_threadCount:0};function aj(t,e,n,i,s,r,a,o){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qf(0),this.hiddenUpdates=qf(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function AA(t,e,n,i,s,r,a,o,l,u,d,m){return t=new aj(t,e,n,a,o,l,u,m),e=1,r===!0&&(e|=24),r=Wt(3,null,null,e),t.current=r,r.stateNode=t,e=py(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},yy(r),t}function CA(t){return t?(t=ha,t):ha}function RA(t,e,n,i,s,r){s=CA(s),i.context===null?i.context=s:i.pendingContext=s,i=hs(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=ds(t,i,e),n!==null&&(tn(n,t,e),ll(n,t,e))}function t_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fy(t,e){t_(t,e),(t=t.alternate)&&t_(t,e)}function IA(t){if(t.tag===13){var e=to(t,67108864);e!==null&&tn(e,t,67108864),Fy(t,67108864)}}var zh=!0;function oj(t,e,n,i){var s=J.T;J.T=null;var r=fe.p;try{fe.p=2,zy(t,e,n,i)}finally{fe.p=r,J.T=s}}function lj(t,e,n,i){var s=J.T;J.T=null;var r=fe.p;try{fe.p=8,zy(t,e,n,i)}finally{fe.p=r,J.T=s}}function zy(t,e,n,i){if(zh){var s=Xp(i);if(s===null)_m(t,e,i,qh,n),n_(t,i);else if(uj(s,t,e,n,i))i.stopPropagation();else if(n_(t,i),e&4&&-1<cj.indexOf(t)){for(;s!==null;){var r=eo(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Qs(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Zt(a);o.entanglements[1]|=l,a&=~l}si(r),!(ge&6)&&(jh=Fn()+500,Sc(0))}}break;case 13:o=to(r,2),o!==null&&tn(o,r,2),Dd(),Fy(r,2)}if(r=Xp(i),r===null&&_m(t,e,i,qh,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else _m(t,e,i,null,n)}}function Xp(t){return t=ry(t),qy(t)}var qh=null;function qy(t){if(qh=null,t=ra(t),t!==null){var e=dc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=eS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return qh=t,null}function NA(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(KD()){case sS:return 2;case rS:return 8;case vh:case YD:return 32;case aS:return 268435456;default:return 32}default:return 32}}var Kp=!1,ps=null,gs=null,ys=null,Hl=new Map,Fl=new Map,ts=[],cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n_(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(e.pointerId)}}function Fo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=eo(e),e!==null&&IA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function uj(t,e,n,i,s){switch(e){case"focusin":return ps=Fo(ps,t,e,n,i,s),!0;case"dragenter":return gs=Fo(gs,t,e,n,i,s),!0;case"mouseover":return ys=Fo(ys,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Hl.set(r,Fo(Hl.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Fl.set(r,Fo(Fl.get(r)||null,t,e,n,i,s)),!0}return!1}function DA(t){var e=ra(t.target);if(e!==null){var n=dc(e);if(n!==null){if(e=n.tag,e===13){if(e=eS(n),e!==null){t.blockedOn=e,ik(t.priority,function(){if(n.tag===13){var i=en();i=ty(i);var s=to(n,i);s!==null&&tn(s,n,i),Fy(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xp(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hp=i,n.target.dispatchEvent(i),hp=null}else return e=eo(n),e!==null&&IA(e),t.blockedOn=n,!1;e.shift()}return!0}function i_(t,e,n){Qu(t)&&n.delete(e)}function hj(){Kp=!1,ps!==null&&Qu(ps)&&(ps=null),gs!==null&&Qu(gs)&&(gs=null),ys!==null&&Qu(ys)&&(ys=null),Hl.forEach(i_),Fl.forEach(i_)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,Kp||(Kp=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,hj)))}var Au=null;function s_(t){Au!==t&&(Au=t,it.unstable_scheduleCallback(it.unstable_NormalPriority,function(){Au===t&&(Au=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(qy(i||n)===null)continue;break}var r=eo(n);r!==null&&(t.splice(e,3),e-=3,Cp(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function zl(t){function e(l){return Su(l,t)}ps!==null&&Su(ps,t),gs!==null&&Su(gs,t),ys!==null&&Su(ys,t),Hl.forEach(e),Fl.forEach(e);for(var n=0;n<ts.length;n++){var i=ts[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)DA(n),n.blockedOn===null&&ts.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[zt]||null;if(typeof r=="function")a||s_(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[zt]||null)o=a.formAction;else if(qy(s)!==null)continue}else o=a.action;typeof o=="function"?n[i+1]=o:(n.splice(i,3),i-=3),s_(n)}}}function Gy(t){this._internalRoot=t}Od.prototype.render=Gy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,i=en();RA(n,i,t,e,null,null)};Od.prototype.unmount=Gy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;RA(t.current,2,null,t,null,null),Dd(),e[Za]=null}};function Od(t){this._internalRoot=t}Od.prototype.unstable_scheduleHydration=function(t){if(t){var e=hS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&DA(t)}};var r_=JE.version;if(r_!=="19.1.0")throw Error(H(527,r_,"19.1.0"));fe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=HD(e),t=t!==null?tS(t):null,t=t===null?null:t.stateNode,t};var dj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{fc=Cu.inject(dj),Jt=Cu}catch{}}xd.createRoot=function(t,e){if(!ZE(t))throw Error(H(299));var n=!1,i="",s=A1,r=C1,a=R1,o=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(o=e.unstable_transitionCallbacks)),e=AA(t,1,!1,null,null,n,i,s,r,a,o,null),t[Za]=e.current,Uy(t),new Gy(e)};xd.hydrateRoot=function(t,e,n){if(!ZE(t))throw Error(H(299));var i=!1,s="",r=A1,a=C1,o=R1,l=null,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(l=n.unstable_transitionCallbacks),n.formState!==void 0&&(u=n.formState)),e=AA(t,1,!0,e,n??null,i,s,r,a,o,l,u),e.context=CA(null),n=e.current,i=en(),i=ty(i),s=hs(i),s.callback=null,ds(n,s,i),n=i,e.current.lanes=n,pc(e,n),si(e),t[Za]=e.current,Uy(t),new Od(e)};xd.version="19.1.0";function kA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kA)}catch(t){console.error(t)}}kA(),$E.exports=xd;var fj=$E.exports,$y={};Object.defineProperty($y,"__esModule",{value:!0});$y.parse=bj;$y.serialize=_j;const mj=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,pj=/^[\u0021-\u003A\u003C-\u007E]*$/,gj=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,yj=/^[\u0020-\u003A\u003D-\u007E]*$/,vj=Object.prototype.toString,xj=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function bj(t,e){const n=new xj,i=t.length;if(i<2)return n;const s=(e==null?void 0:e.decode)||wj;let r=0;do{const a=t.indexOf("=",r);if(a===-1)break;const o=t.indexOf(";",r),l=o===-1?i:o;if(a>l){r=t.lastIndexOf(";",a-1)+1;continue}const u=a_(t,r,a),d=o_(t,a,u),m=t.slice(u,d);if(n[m]===void 0){let f=a_(t,a+1,l),g=o_(t,l,f);const w=s(t.slice(f,g));n[m]=w}r=l+1}while(r<i);return n}function a_(t,e,n){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<n);return n}function o_(t,e,n){for(;e>n;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return n}function _j(t,e,n){const i=(n==null?void 0:n.encode)||encodeURIComponent;if(!mj.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!pj.test(s))throw new TypeError(`argument val is invalid: ${e}`);let r=t+"="+s;if(!n)return r;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);r+="; Max-Age="+n.maxAge}if(n.domain){if(!gj.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);r+="; Domain="+n.domain}if(n.path){if(!yj.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);r+="; Path="+n.path}if(n.expires){if(!Tj(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.partitioned&&(r+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"none":r+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return r}function wj(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Tj(t){return vj.call(t)==="[object Date]"}var l_="popstate";function Ej(t={}){function e(i,s){let{pathname:r,search:a,hash:o}=i.location;return Yp("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:ql(s)}return Aj(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Sj(){return Math.random().toString(36).substring(2,10)}function c_(t,e){return{usr:t.state,key:t.key,idx:e}}function Yp(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ro(e):e,state:n,key:e&&e.key||i||Sj()}}function ql({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Aj(t,e,n,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,o="POP",l=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function m(){o="POP";let T=d(),v=T==null?null:T-u;u=T,l&&l({action:o,location:E.location,delta:v})}function f(T,v){o="PUSH";let x=Yp(E.location,T,v);u=d()+1;let b=c_(x,u),R=E.createHref(x);try{a.pushState(b,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}r&&l&&l({action:o,location:E.location,delta:1})}function g(T,v){o="REPLACE";let x=Yp(E.location,T,v);u=d();let b=c_(x,u),R=E.createHref(x);a.replaceState(b,"",R),r&&l&&l({action:o,location:E.location,delta:0})}function w(T){return Cj(T)}let E={get action(){return o},get location(){return t(s,a)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(l_,m),l=T,()=>{s.removeEventListener(l_,m),l=null}},createHref(T){return e(s,T)},createURL:w,encodeLocation(T){let v=w(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(T){return a.go(T)}};return E}function Cj(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),De(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ql(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function PA(t,e,n="/"){return Rj(t,e,n,!1)}function Rj(t,e,n,i){let s=typeof e=="string"?ro(e):e,r=ki(s.pathname||"/",n);if(r==null)return null;let a=jA(t);Ij(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=Bj(r);o=Lj(a[l],u,i)}return o}function jA(t,e=[],n=[],i=""){let s=(r,a,o)=>{let l={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(De(l.relativePath.startsWith(i),`Absolute route path "${l.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(i.length));let u=Ai([i,l.relativePath]),d=n.concat(l);r.children&&r.children.length>0&&(De(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),jA(r.children,e,d,u)),!(r.path==null&&!r.index)&&e.push({path:u,score:Mj(u,r.index),routesMeta:d})};return t.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))s(r,a);else for(let l of OA(r.path))s(r,a,l)}),e}function OA(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let a=OA(i.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),s&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Ij(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Vj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Nj=/^:[\w-]+$/,Dj=3,kj=2,Pj=1,jj=10,Oj=-2,u_=t=>t==="*";function Mj(t,e){let n=t.split("/"),i=n.length;return n.some(u_)&&(i+=Oj),e&&(i+=kj),n.filter(s=>!u_(s)).reduce((s,r)=>s+(Nj.test(r)?Dj:r===""?Pj:jj),i)}function Vj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Lj(t,e,n=!1){let{routesMeta:i}=t,s={},r="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],u=o===i.length-1,d=r==="/"?e:e.slice(r.length)||"/",m=Gh({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!m&&u&&n&&!i[i.length-1].route.index&&(m=Gh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Ai([r,m.pathname]),pathnameBase:qj(Ai([r,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(r=Ai([r,m.pathnameBase]))}return a}function Gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Uj(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((u,{paramName:d,isOptional:m},f)=>{if(d==="*"){let w=o[f]||"";a=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const g=o[f];return m&&!g?u[d]=void 0:u[d]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:a,pattern:t}}function Uj(t,e=!1,n=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Bj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ki(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function Hj(t,e="/"){let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?ro(t):t;return{pathname:n?n.startsWith("/")?n:Fj(n,e):e,search:Gj(i),hash:$j(s)}}function Fj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Tm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xy(t){let e=zj(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Ky(t,e,n,i=!1){let s;typeof t=="string"?s=ro(t):(s={...t},De(!s.pathname||!s.pathname.includes("?"),Tm("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),Tm("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),Tm("#","search","hash",s)));let r=t===""||s.pathname==="",a=r?"/":s.pathname,o;if(a==null)o=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),m-=1;s.pathname=f.join("/")}o=m>=0?e[m]:"/"}let l=Hj(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(r||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ai=t=>t.join("/").replace(/\/\/+/g,"/"),qj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,$j=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Xj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var MA=["POST","PUT","PATCH","DELETE"];new Set(MA);var Kj=["GET",...MA];new Set(Kj);var ao=D.createContext(null);ao.displayName="DataRouter";var Md=D.createContext(null);Md.displayName="DataRouterState";var VA=D.createContext({isTransitioning:!1});VA.displayName="ViewTransition";var Yj=D.createContext(new Map);Yj.displayName="Fetchers";var Wj=D.createContext(null);Wj.displayName="Await";var kn=D.createContext(null);kn.displayName="Navigation";var Rc=D.createContext(null);Rc.displayName="Location";var ri=D.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var Yy=D.createContext(null);Yy.displayName="RouteError";function Qj(t,{relative:e}={}){De(oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(kn),{hash:s,pathname:r,search:a}=Ic(t,{relative:e}),o=r;return n!=="/"&&(o=r==="/"?n:Ai([n,r])),i.createHref({pathname:o,search:a,hash:s})}function oo(){return D.useContext(Rc)!=null}function Ls(){return De(oo(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Rc).location}var LA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UA(t){D.useContext(kn).static||D.useLayoutEffect(t)}function Us(){let{isDataRoute:t}=D.useContext(ri);return t?uO():Jj()}function Jj(){De(oo(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(ao),{basename:e,navigator:n}=D.useContext(kn),{matches:i}=D.useContext(ri),{pathname:s}=Ls(),r=JSON.stringify(Xy(i)),a=D.useRef(!1);return UA(()=>{a.current=!0}),D.useCallback((l,u={})=>{if(Rn(a.current,LA),!a.current)return;if(typeof l=="number"){n.go(l);return}let d=Ky(l,JSON.parse(r),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ai([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,r,s,t])}D.createContext(null);function Ic(t,{relative:e}={}){let{matches:n}=D.useContext(ri),{pathname:i}=Ls(),s=JSON.stringify(Xy(n));return D.useMemo(()=>Ky(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function Zj(t,e){return BA(t,e)}function BA(t,e,n,i){var v;De(oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(kn),{matches:r}=D.useContext(ri),a=r[r.length-1],o=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";HA(l,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=Ls(),f;if(e){let x=typeof e=="string"?ro(e):e;De(u==="/"||((v=x.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=m;let g=f.pathname||"/",w=g;if(u!=="/"){let x=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=PA(t,{pathname:w});Rn(d||E!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Rn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=sO(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Ai([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Ai([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),r,n,i);return e&&T?D.createElement(Rc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},T):T}function eO(){let t=cO(),e=Xj(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:r},"ErrorBoundary")," or"," ",D.createElement("code",{style:r},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,a)}var tO=D.createElement(eO,null),nO=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement(ri.Provider,{value:this.props.routeContext},D.createElement(Yy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function iO({routeContext:t,match:e,children:n}){let i=D.useContext(ao);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(ri.Provider,{value:t},n)}function sO(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,r=n==null?void 0:n.errors;if(r!=null){let l=s.findIndex(u=>u.route.id&&(r==null?void 0:r[u.route.id])!==void 0);De(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,o=-1;if(n)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:d,errors:m}=n,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!m||m[u.route.id]===void 0);if(u.route.lazy||f){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,u,d)=>{let m,f=!1,g=null,w=null;n&&(m=r&&u.route.id?r[u.route.id]:void 0,g=u.route.errorElement||tO,a&&(o<0&&d===0?(HA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,w=null):o===d&&(f=!0,w=u.route.hydrateFallbackElement||null)));let E=e.concat(s.slice(0,d+1)),T=()=>{let v;return m?v=g:f?v=w:u.route.Component?v=D.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=l,D.createElement(iO,{match:u,routeContext:{outlet:l,matches:E,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?D.createElement(nO,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):T()},null)}function Wy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rO(t){let e=D.useContext(ao);return De(e,Wy(t)),e}function aO(t){let e=D.useContext(Md);return De(e,Wy(t)),e}function oO(t){let e=D.useContext(ri);return De(e,Wy(t)),e}function Qy(t){let e=oO(t),n=e.matches[e.matches.length-1];return De(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lO(){return Qy("useRouteId")}function cO(){var i;let t=D.useContext(Yy),e=aO("useRouteError"),n=Qy("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}function uO(){let{router:t}=rO("useNavigate"),e=Qy("useNavigate"),n=D.useRef(!1);return UA(()=>{n.current=!0}),D.useCallback(async(s,r={})=>{Rn(n.current,LA),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...r}))},[t,e])}var h_={};function HA(t,e,n){!e&&!h_[t]&&(h_[t]=!0,Rn(!1,n))}D.memo(hO);function hO({routes:t,future:e,state:n}){return BA(t,void 0,n,e)}function fi({to:t,replace:e,state:n,relative:i}){De(oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=D.useContext(kn);Rn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=D.useContext(ri),{pathname:a}=Ls(),o=Us(),l=Ky(t,Xy(r),a,i==="path"),u=JSON.stringify(l);return D.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:i})},[o,u,i,e,n]),null}function mi(t){De(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dO({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:s,static:r=!1}){De(!oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),o=D.useMemo(()=>({basename:a,navigator:s,static:r,future:{}}),[a,s,r]);typeof n=="string"&&(n=ro(n));let{pathname:l="/",search:u="",hash:d="",state:m=null,key:f="default"}=n,g=D.useMemo(()=>{let w=ki(l,a);return w==null?null:{location:{pathname:w,search:u,hash:d,state:m,key:f},navigationType:i}},[a,l,u,d,m,f,i]);return Rn(g!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:D.createElement(kn.Provider,{value:o},D.createElement(Rc.Provider,{children:e,value:g}))}function fO({children:t,location:e}){return Zj(Wp(t),e)}function Wp(t,e=[]){let n=[];return D.Children.forEach(t,(i,s)=>{if(!D.isValidElement(i))return;let r=[...e,s];if(i.type===D.Fragment){n.push.apply(n,Wp(i.props.children,r));return}De(i.type===mi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),De(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Wp(i.props.children,r)),n.push(a)}),n}var Ju="get",Zu="application/x-www-form-urlencoded";function Vd(t){return t!=null&&typeof t.tagName=="string"}function mO(t){return Vd(t)&&t.tagName.toLowerCase()==="button"}function pO(t){return Vd(t)&&t.tagName.toLowerCase()==="form"}function gO(t){return Vd(t)&&t.tagName.toLowerCase()==="input"}function yO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vO(t,e){return t.button===0&&(!e||e==="_self")&&!yO(t)}var Ru=null;function xO(){if(Ru===null)try{new FormData(document.createElement("form"),0),Ru=!1}catch{Ru=!0}return Ru}var bO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Em(t){return t!=null&&!bO.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zu}"`),null):t}function _O(t,e){let n,i,s,r,a;if(pO(t)){let o=t.getAttribute("action");i=o?ki(o,e):null,n=t.getAttribute("method")||Ju,s=Em(t.getAttribute("enctype"))||Zu,r=new FormData(t)}else if(mO(t)||gO(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?ki(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||Ju,s=Em(t.getAttribute("formenctype"))||Em(o.getAttribute("enctype"))||Zu,r=new FormData(o,t),!xO()){let{name:u,type:d,value:m}=t;if(d==="image"){let f=u?`${u}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else u&&r.append(u,m)}}else{if(Vd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ju,i=null,s=Zu,a=t}return r&&s==="text/plain"&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}function Jy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function wO(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TO(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function EO(t,e,n){let i=await Promise.all(t.map(async s=>{let r=e.routes[s.route.id];if(r){let a=await wO(r,n);return a.links?a.links():[]}return[]}));return RO(i.flat(1).filter(TO).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function d_(t,e,n,i,s,r){let a=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>{var d;return n[u].pathname!==l.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):r==="data"?e.filter((l,u)=>{var m;let d=i.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function SO(t,e,{includeHydrateFallback:n}={}){return AO(t.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function AO(t){return[...new Set(t)]}function CO(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function RO(t,e){let n=new Set;return new Set(e),t.reduce((i,s)=>{let r=JSON.stringify(CO(s));return n.has(r)||(n.add(r),i.push({key:r,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IO=new Set([100,101,204,205]);function NO(t,e){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname="_root.data":e&&ki(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function FA(){let t=D.useContext(ao);return Jy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function DO(){let t=D.useContext(Md);return Jy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zy=D.createContext(void 0);Zy.displayName="FrameworkContext";function zA(){let t=D.useContext(Zy);return Jy(t,"You must render this element inside a <HydratedRouter> element"),t}function kO(t,e){let n=D.useContext(Zy),[i,s]=D.useState(!1),[r,a]=D.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:m}=e,f=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let E=v=>{v.forEach(x=>{a(x.isIntersecting)})},T=new IntersectionObserver(E,{threshold:.5});return f.current&&T.observe(f.current),()=>{T.disconnect()}}},[t]),D.useEffect(()=>{if(i){let E=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(E)}}},[i]);let g=()=>{s(!0)},w=()=>{s(!1),a(!1)};return n?t!=="intent"?[r,f,{}]:[r,f,{onFocus:zo(o,g),onBlur:zo(l,w),onMouseEnter:zo(u,g),onMouseLeave:zo(d,w),onTouchStart:zo(m,g)}]:[!1,f,{}]}function zo(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function PO({page:t,...e}){let{router:n}=FA(),i=D.useMemo(()=>PA(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(OO,{page:t,matches:i,...e}):null}function jO(t){let{manifest:e,routeModules:n}=zA(),[i,s]=D.useState([]);return D.useEffect(()=>{let r=!1;return EO(t,e,n).then(a=>{r||s(a)}),()=>{r=!0}},[t,e,n]),i}function OO({page:t,matches:e,...n}){let i=Ls(),{manifest:s,routeModules:r}=zA(),{basename:a}=FA(),{loaderData:o,matches:l}=DO(),u=D.useMemo(()=>d_(t,e,l,s,i,"data"),[t,e,l,s,i]),d=D.useMemo(()=>d_(t,e,l,s,i,"assets"),[t,e,l,s,i]),m=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,E=!1;if(e.forEach(v=>{var b;let x=s.routes[v.route.id];!x||!x.hasLoader||(!u.some(R=>R.route.id===v.route.id)&&v.route.id in o&&((b=r[v.route.id])!=null&&b.shouldRevalidate)||x.hasClientLoader?E=!0:w.add(v.route.id))}),w.size===0)return[];let T=NO(t,a);return E&&w.size>0&&T.searchParams.set("_routes",e.filter(v=>w.has(v.route.id)).map(v=>v.route.id).join(",")),[T.pathname+T.search]},[a,o,i,s,u,e,t,r]),f=D.useMemo(()=>SO(d,s),[d,s]),g=jO(d);return D.createElement(D.Fragment,null,m.map(w=>D.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),f.map(w=>D.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),g.map(({key:w,link:E})=>D.createElement("link",{key:w,...E})))}function MO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var qA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qA&&(window.__reactRouterVersion="7.6.3")}catch{}function VO({basename:t,children:e,window:n}){let i=D.useRef();i.current==null&&(i.current=Ej({window:n,v5Compat:!0}));let s=i.current,[r,a]=D.useState({action:s.action,location:s.location}),o=D.useCallback(l=>{D.startTransition(()=>a(l))},[a]);return D.useLayoutEffect(()=>s.listen(o),[s,o]),D.createElement(dO,{basename:t,children:e,location:r.location,navigationType:r.action,navigator:s})}var GA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ld=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:s,reloadDocument:r,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:m,...f},g){let{basename:w}=D.useContext(kn),E=typeof u=="string"&&GA.test(u),T,v=!1;if(typeof u=="string"&&E&&(T=u,qA))try{let C=new URL(window.location.href),I=u.startsWith("//")?new URL(C.protocol+u):new URL(u),k=ki(I.pathname,w);I.origin===C.origin&&k!=null?u=k+I.search+I.hash:v=!0}catch{Rn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Qj(u,{relative:s}),[b,R,j]=kO(i,f),V=HO(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:m});function S(C){e&&e(C),C.defaultPrevented||V(C)}let _=D.createElement("a",{...f,...j,href:T||x,onClick:v||r?e:S,ref:MO(g,R),target:l,"data-discover":!E&&n==="render"?"true":void 0});return b&&!E?D.createElement(D.Fragment,null,_,D.createElement(PO,{page:x})):_});Ld.displayName="Link";var LO=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:s=!1,style:r,to:a,viewTransition:o,children:l,...u},d){let m=Ic(a,{relative:u.relative}),f=Ls(),g=D.useContext(Md),{navigator:w,basename:E}=D.useContext(kn),T=g!=null&&$O(m)&&o===!0,v=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,x=f.pathname,b=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(x=x.toLowerCase(),b=b?b.toLowerCase():null,v=v.toLowerCase()),b&&E&&(b=ki(b,E)||b);const R=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let j=x===v||!s&&x.startsWith(v)&&x.charAt(R)==="/",V=b!=null&&(b===v||!s&&b.startsWith(v)&&b.charAt(v.length)==="/"),S={isActive:j,isPending:V,isTransitioning:T},_=j?e:void 0,C;typeof i=="function"?C=i(S):C=[i,j?"active":null,V?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let I=typeof r=="function"?r(S):r;return D.createElement(Ld,{...u,"aria-current":_,className:C,ref:d,style:I,to:a,viewTransition:o},typeof l=="function"?l(S):l)});LO.displayName="NavLink";var UO=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:s,state:r,method:a=Ju,action:o,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:m,...f},g)=>{let w=qO(),E=GO(o,{relative:u}),T=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&GA.test(o),x=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,j=(R==null?void 0:R.getAttribute("formmethod"))||a;w(R||b.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:s,state:r,relative:u,preventScrollReset:d,viewTransition:m})};return D.createElement("form",{ref:g,method:T,action:E,onSubmit:i?l:x,...f,"data-discover":!v&&t==="render"?"true":void 0})});UO.displayName="Form";function BO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $A(t){let e=D.useContext(ao);return De(e,BO(t)),e}function HO(t,{target:e,replace:n,state:i,preventScrollReset:s,relative:r,viewTransition:a}={}){let o=Us(),l=Ls(),u=Ic(t,{relative:r});return D.useCallback(d=>{if(vO(d,e)){d.preventDefault();let m=n!==void 0?n:ql(l)===ql(u);o(t,{replace:m,state:i,preventScrollReset:s,relative:r,viewTransition:a})}},[l,o,u,n,i,e,t,s,r,a])}var FO=0,zO=()=>`__${String(++FO)}__`;function qO(){let{router:t}=$A("useSubmit"),{basename:e}=D.useContext(kn),n=lO();return D.useCallback(async(i,s={})=>{let{action:r,method:a,encType:o,formData:l,body:u}=_O(i,e);if(s.navigate===!1){let d=s.fetcherKey||zO();await t.fetch(d,n,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await t.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function GO(t,{relative:e}={}){let{basename:n}=D.useContext(kn),i=D.useContext(ri);De(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Ic(t||".",{relative:e})},a=Ls();if(t==null){r.search=a.search;let o=new URLSearchParams(r.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(m=>m).forEach(m=>o.append("index",m));let d=o.toString();r.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(r.pathname=r.pathname==="/"?n:Ai([n,r.pathname])),ql(r)}function $O(t,e={}){let n=D.useContext(VA);De(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=$A("useViewTransitionState"),s=Ic(t,{relative:e.relative});if(!n.isTransitioning)return!1;let r=ki(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=ki(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Gh(s.pathname,a)!=null||Gh(s.pathname,r)!=null}[...IO];const f_=t=>{let e;const n=new Set,i=(u,d)=>{const m=typeof u=="function"?u(e):u;if(!Object.is(m,e)){const f=e;e=d??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(g=>g(e,f))}},s=()=>e,o={setState:i,getState:s,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(i,s,o);return o},XO=t=>t?f_(t):f_,KO=t=>t;function YO(t,e=KO){const n=Zm.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Zm.useDebugValue(n),n}const m_=t=>{const e=XO(t),n=i=>YO(e,i);return Object.assign(n,e),n},Nc=t=>t?m_(t):m_;function WO(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var r;const a=l=>l===null?null:JSON.parse(l,void 0),o=(r=n.getItem(s))!=null?r:null;return o instanceof Promise?o.then(a):a(o)},setItem:(s,r)=>n.setItem(s,JSON.stringify(r,void 0)),removeItem:s=>n.removeItem(s)}}const Qp=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return Qp(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Qp(i)(n)}}}},QO=(t,e)=>(n,i,s)=>{let r={storage:WO(()=>localStorage),partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...e},a=!1;const o=new Set,l=new Set;let u=r.storage;if(!u)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...E)},i,s);const d=()=>{const E=r.partialize({...i()});return u.setItem(r.name,{state:E,version:r.version})},m=s.setState;s.setState=(E,T)=>{m(E,T),d()};const f=t((...E)=>{n(...E),d()},i,s);s.getInitialState=()=>f;let g;const w=()=>{var E,T;if(!u)return;a=!1,o.forEach(x=>{var b;return x((b=i())!=null?b:f)});const v=((T=r.onRehydrateStorage)==null?void 0:T.call(r,(E=i())!=null?E:f))||void 0;return Qp(u.getItem.bind(u))(r.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==r.version){if(r.migrate){const b=r.migrate(x.state,x.version);return b instanceof Promise?b.then(R=>[!0,R]):[!0,b]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[R,j]=x;if(g=r.merge(j,(b=i())!=null?b:f),n(g,!0),R)return d()}).then(()=>{v==null||v(g,void 0),g=i(),a=!0,l.forEach(x=>x(g))}).catch(x=>{v==null||v(void 0,x)})};return s.persist={setOptions:E=>{r={...r,...E},E.storage&&(u=E.storage)},clearStorage:()=>{u==null||u.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>w(),hasHydrated:()=>a,onHydrate:E=>(o.add(E),()=>{o.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},r.skipHydration||w(),g||f},Ud=QO,JO=()=>{};var p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ZO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],o=t[n++],l=((s&7)<<18|(r&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},KA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,o=a?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=r>>2,m=(r&3)<<4|o>>4;let f=(o&15)<<2|u>>6,g=u&63;l||(g=64,a||(f=64)),i.push(n[d],n[m],n[f],n[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],o=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||o==null||u==null||m==null)throw new eM;const f=r<<2|o>>4;if(i.push(f),u!==64){const g=o<<4&240|u>>2;if(i.push(g),m!==64){const w=u<<6&192|m;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tM=function(t){const e=XA(t);return KA.encodeByteArray(e,!0)},$h=function(t){return tM(t).replace(/\./g,"")},YA=function(t){try{return KA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=()=>nM().__FIREBASE_DEFAULTS__,sM=()=>{if(typeof process>"u"||typeof p_>"u")return;const t=p_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YA(t[1]);return e&&JSON.parse(e)},Bd=()=>{try{return JO()||iM()||sM()||rM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WA=t=>{var e,n;return(n=(e=Bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aM=t=>{const e=WA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},QA=()=>{var t;return(t=Bd())===null||t===void 0?void 0:t.config},JA=t=>{var e;return(e=Bd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$h(JSON.stringify(n)),$h(JSON.stringify(a)),""].join(".")}const yl={};function cM(){const t={prod:[],emulator:[]};for(const e of Object.keys(yl))yl[e]?t.emulator.push(e):t.prod.push(e);return t}function uM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let g_=!1;function eC(t,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||yl[t]===e||yl[t]||g_)return;yl[t]=e;function n(f){return`__firebase__banner__${f}`}const i="__firebase__banner",r=cM().prod.length>0;function a(){const f=document.getElementById(i);f&&f.remove()}function o(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{g_=!0,a()},f}function d(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=uM(i),g=n("text"),w=document.getElementById(g)||document.createElement("span"),E=n("learnmore"),T=document.getElementById(E)||document.createElement("a"),v=n("preprendIcon"),x=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;o(b),d(T,E);const R=u();l(x,v),b.append(x,w,T,R),document.body.appendChild(b)}r?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function dM(){var t;const e=(t=Bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pM(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gM(){return!dM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nC(){try{return typeof indexedDB=="object"}catch{return!1}}function iC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function yM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM="FirebaseError";class Pn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=vM,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pr.prototype.create)}}class Pr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?xM(r,i):"Error",o=`${this.serviceName}: ${a} (${s}).`;return new Pn(s,o,i)}}function xM(t,e){return t.replace(bM,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const bM=/\{\$([^}]+)}/g;function _M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function As(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(y_(r)&&y_(a)){if(!As(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function y_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Wo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wM(t,e){const n=new TM(t,e);return n.subscribe.bind(n)}class TM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");EM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=1e3,AM=2,CM=4*60*60*1e3,RM=.5;function v_(t,e=SM,n=AM){const i=e*Math.pow(n,t),s=Math.round(RM*i*(Math.random()-.5)*2);return Math.min(CM,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class In{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new oM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DM(e))try{this.getOrInitializeService({instanceIdentifier:er})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=er){return this.instances.has(e)}getOptions(e=er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(r);i===o&&a.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:NM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=er){return this.component?this.component.multipleInstances?e:er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NM(t){return t===er?void 0:t}function DM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const PM={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},jM=ae.INFO,OM={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},MM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=OM[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hd{constructor(e){this.name=e,this._logLevel=jM,this._logHandler=MM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const VM=(t,e)=>e.some(n=>t instanceof n);let x_,b_;function LM(){return x_||(x_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UM(){return b_||(b_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sC=new WeakMap,Jp=new WeakMap,rC=new WeakMap,Am=new WeakMap,e0=new WeakMap;function BM(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(vs(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&sC.set(n,t)}).catch(()=>{}),e0.set(e,t),e}function HM(t){if(Jp.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});Jp.set(t,e)}let Zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FM(t){Zp=t(Zp)}function zM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Cm(this),e,...n);return rC.set(i,e.sort?e.sort():[e]),vs(i)}:UM().includes(t)?function(...e){return t.apply(Cm(this),e),vs(sC.get(this))}:function(...e){return vs(t.apply(Cm(this),e))}}function qM(t){return typeof t=="function"?zM(t):(t instanceof IDBTransaction&&HM(t),VM(t,LM())?new Proxy(t,Zp):t)}function vs(t){if(t instanceof IDBRequest)return BM(t);if(Am.has(t))return Am.get(t);const e=qM(t);return e!==t&&(Am.set(t,e),e0.set(e,t)),e}const Cm=t=>e0.get(t);function aC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),o=vs(a);return i&&a.addEventListener("upgradeneeded",l=>{i(vs(a.result),l.oldVersion,l.newVersion,vs(a.transaction),l)}),n&&a.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const GM=["get","getKey","getAll","getAllKeys","count"],$M=["put","add","delete","clear"],Rm=new Map;function __(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=$M.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||GM.includes(n)))return;const r=async function(a,...o){const l=this.transaction(a,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&l.done]))[0]};return Rm.set(e,r),r}FM(t=>({...t,get:(e,n,i)=>__(e,n)||t.get(e,n,i),has:(e,n)=>!!__(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KM(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function KM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eg="@firebase/app",w_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Hd("@firebase/app"),YM="@firebase/app-compat",WM="@firebase/analytics-compat",QM="@firebase/analytics",JM="@firebase/app-check-compat",ZM="@firebase/app-check",e4="@firebase/auth",t4="@firebase/auth-compat",n4="@firebase/database",i4="@firebase/data-connect",s4="@firebase/database-compat",r4="@firebase/functions",a4="@firebase/functions-compat",o4="@firebase/installations",l4="@firebase/installations-compat",c4="@firebase/messaging",u4="@firebase/messaging-compat",h4="@firebase/performance",d4="@firebase/performance-compat",f4="@firebase/remote-config",m4="@firebase/remote-config-compat",p4="@firebase/storage",g4="@firebase/storage-compat",y4="@firebase/firestore",v4="@firebase/ai",x4="@firebase/firestore-compat",b4="firebase",_4="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="[DEFAULT]",w4={[eg]:"fire-core",[YM]:"fire-core-compat",[QM]:"fire-analytics",[WM]:"fire-analytics-compat",[ZM]:"fire-app-check",[JM]:"fire-app-check-compat",[e4]:"fire-auth",[t4]:"fire-auth-compat",[n4]:"fire-rtdb",[i4]:"fire-data-connect",[s4]:"fire-rtdb-compat",[r4]:"fire-fn",[a4]:"fire-fn-compat",[o4]:"fire-iid",[l4]:"fire-iid-compat",[c4]:"fire-fcm",[u4]:"fire-fcm-compat",[h4]:"fire-perf",[d4]:"fire-perf-compat",[f4]:"fire-rc",[m4]:"fire-rc-compat",[p4]:"fire-gcs",[g4]:"fire-gcs-compat",[y4]:"fire-fst",[x4]:"fire-fst-compat",[v4]:"fire-vertex","fire-js":"fire-js",[b4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new Map,T4=new Map,ng=new Map;function T_(t,e){try{t.container.addComponent(e)}catch(n){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Zn(t){const e=t.name;if(ng.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,t);for(const n of Xh.values())T_(n,t);for(const n of T4.values())T_(n,t);return!0}function jr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Pr("app","Firebase",E4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new In("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=_4;function oC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:tg,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw xs.create("bad-app-name",{appName:String(s)});if(n||(n=QA()),!n)throw xs.create("no-options");const r=Xh.get(s);if(r){if(As(n,r.options)&&As(i,r.config))return r;throw xs.create("duplicate-app",{appName:s})}const a=new kM(s);for(const l of ng.values())a.addComponent(l);const o=new S4(n,i,a);return Xh.set(s,o),o}function t0(t=tg){const e=Xh.get(t);if(!e&&t===tg&&QA())return oC();if(!e)throw xs.create("no-app",{appName:t});return e}function pn(t,e,n){var i;let s=(i=w4[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(o.join(" "));return}Zn(new In(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="firebase-heartbeat-database",C4=1,Gl="firebase-heartbeat-store";let Im=null;function lC(){return Im||(Im=aC(A4,C4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),Im}async function R4(t){try{const n=(await lC()).transaction(Gl),i=await n.objectStore(Gl).get(cC(t));return await n.done,i}catch(e){if(e instanceof Pn)Pi.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(n.message)}}}async function E_(t,e){try{const i=(await lC()).transaction(Gl,"readwrite");await i.objectStore(Gl).put(e,cC(t)),await i.done}catch(n){if(n instanceof Pn)Pi.warn(n.message);else{const i=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pi.warn(i.message)}}}function cC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=1024,N4=30;class D4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=S_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>N4){const a=j4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Pi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=S_(),{heartbeatsToSend:i,unsentEntries:s}=k4(this._heartbeatsCache.heartbeats),r=$h(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Pi.warn(n),""}}}function S_(){return new Date().toISOString().substring(0,10)}function k4(t,e=I4){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),A_(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),A_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class P4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nC()?iC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await R4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return E_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return E_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function A_(t){return $h(JSON.stringify({version:2,heartbeats:t})).length}function j4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){Zn(new In("platform-logger",e=>new XM(e),"PRIVATE")),Zn(new In("heartbeat",e=>new D4(e),"PRIVATE")),pn(eg,w_,t),pn(eg,w_,"esm2017"),pn("fire-js","")}O4("");var M4="firebase",V4="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(M4,V4,"app");const uC="@firebase/installations",n0="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=1e4,dC=`w:${n0}`,fC="FIS_v2",L4="https://firebaseinstallations.googleapis.com/v1",U4=60*60*1e3,B4="installations",H4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_r=new Pr(B4,H4,F4);function mC(t){return t instanceof Pn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC({projectId:t}){return`${L4}/projects/${t}/installations`}function gC(t){return{token:t.token,requestStatus:2,expiresIn:q4(t.expiresIn),creationTime:Date.now()}}async function yC(t,e){const i=(await e.json()).error;return _r.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function vC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function z4(t,{refreshToken:e}){const n=vC(t);return n.append("Authorization",G4(e)),n}async function xC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function q4(t){return Number(t.replace("s","000"))}function G4(t){return`${fC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=pC(t),s=vC(t),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={fid:n,authVersion:fC,appId:t.appId,sdkVersion:dC},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await xC(()=>fetch(i,o));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:gC(u.authToken)}}else throw await yC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=/^[cdef][\w-]{21}$/,ig="";function Y4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=W4(t);return K4.test(n)?n:ig}catch{return ig}}function W4(t){return X4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Map;function wC(t,e){const n=Fd(t);TC(n,e),Q4(n,e)}function TC(t,e){const n=_C.get(t);if(n)for(const i of n)i(e)}function Q4(t,e){const n=J4();n&&n.postMessage({key:t,fid:e}),Z4()}let nr=null;function J4(){return!nr&&"BroadcastChannel"in self&&(nr=new BroadcastChannel("[Firebase] FID Change"),nr.onmessage=t=>{TC(t.data.key,t.data.fid)}),nr}function Z4(){_C.size===0&&nr&&(nr.close(),nr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="firebase-installations-database",tV=1,wr="firebase-installations-store";let Nm=null;function i0(){return Nm||(Nm=aC(eV,tV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wr)}}})),Nm}async function Kh(t,e){const n=Fd(t),s=(await i0()).transaction(wr,"readwrite"),r=s.objectStore(wr),a=await r.get(n);return await r.put(e,n),await s.done,(!a||a.fid!==e.fid)&&wC(t,e.fid),e}async function EC(t){const e=Fd(t),i=(await i0()).transaction(wr,"readwrite");await i.objectStore(wr).delete(e),await i.done}async function zd(t,e){const n=Fd(t),s=(await i0()).transaction(wr,"readwrite"),r=s.objectStore(wr),a=await r.get(n),o=e(a);return o===void 0?await r.delete(n):await r.put(o,n),await s.done,o&&(!a||a.fid!==o.fid)&&wC(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t){let e;const n=await zd(t.appConfig,i=>{const s=nV(i),r=iV(t,s);return e=r.registrationPromise,r.installationEntry});return n.fid===ig?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function nV(t){const e=t||{fid:Y4(),registrationStatus:0};return SC(e)}function iV(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(_r.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=sV(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rV(t)}:{installationEntry:e}}async function sV(t,e){try{const n=await $4(t,e);return Kh(t.appConfig,n)}catch(n){throw mC(n)&&n.customData.serverCode===409?await EC(t.appConfig):await Kh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function rV(t){let e=await C_(t.appConfig);for(;e.registrationStatus===1;)await bC(100),e=await C_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await s0(t);return i||n}return e}function C_(t){return zd(t,e=>{if(!e)throw _r.create("installation-not-found");return SC(e)})}function SC(t){return aV(t)?{fid:t.fid,registrationStatus:0}:t}function aV(t){return t.registrationStatus===1&&t.registrationTime+hC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oV({appConfig:t,heartbeatServiceProvider:e},n){const i=lV(t,n),s=z4(t,n),r=e.getImmediate({optional:!0});if(r){const u=await r.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const a={installation:{sdkVersion:dC,appId:t.appId}},o={method:"POST",headers:s,body:JSON.stringify(a)},l=await xC(()=>fetch(i,o));if(l.ok){const u=await l.json();return gC(u)}else throw await yC("Generate Auth Token",l)}function lV(t,{fid:e}){return`${pC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(t,e=!1){let n;const i=await zd(t.appConfig,r=>{if(!AC(r))throw _r.create("not-registered");const a=r.authToken;if(!e&&hV(a))return r;if(a.requestStatus===1)return n=cV(t,e),r;{if(!navigator.onLine)throw _r.create("app-offline");const o=fV(r);return n=uV(t,o),o}});return n?await n:i.authToken}async function cV(t,e){let n=await R_(t.appConfig);for(;n.authToken.requestStatus===1;)await bC(100),n=await R_(t.appConfig);const i=n.authToken;return i.requestStatus===0?r0(t,e):i}function R_(t){return zd(t,e=>{if(!AC(e))throw _r.create("not-registered");const n=e.authToken;return mV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function uV(t,e){try{const n=await oV(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Kh(t.appConfig,i),n}catch(n){if(mC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await EC(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Kh(t.appConfig,i)}throw n}}function AC(t){return t!==void 0&&t.registrationStatus===2}function hV(t){return t.requestStatus===2&&!dV(t)}function dV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+U4}function fV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function mV(t){return t.requestStatus===1&&t.requestTime+hC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t){const e=t,{installationEntry:n,registrationPromise:i}=await s0(e);return i?i.catch(console.error):r0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e=!1){const n=t;return await yV(n),(await r0(n,e)).token}async function yV(t){const{registrationPromise:e}=await s0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){if(!t||!t.options)throw Dm("App Configuration");if(!t.name)throw Dm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Dm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Dm(t){return _r.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="installations",xV="installations-internal",bV=t=>{const e=t.getProvider("app").getImmediate(),n=vV(e),i=jr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},_V=t=>{const e=t.getProvider("app").getImmediate(),n=jr(e,CC).getImmediate();return{getId:()=>pV(n),getToken:s=>gV(n,s)}};function wV(){Zn(new In(CC,bV,"PUBLIC")),Zn(new In(xV,_V,"PRIVATE"))}wV();pn(uC,n0);pn(uC,n0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh="analytics",TV="firebase_id",EV="origin",SV=60*1e3,AV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",a0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Hd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nn=new Pr("analytics","Analytics",CV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t){if(!t.startsWith(a0)){const e=nn.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function RC(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function IV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function NV(t,e){const n=IV("firebase-js-sdk-policy",{createScriptURL:RV}),i=document.createElement("script"),s=`${a0}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function DV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kV(t,e,n,i,s,r){const a=i[s];try{if(a)await e[a];else{const l=(await RC(n)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(o){Ft.error(o)}t("config",s,r)}async function PV(t,e,n,i,s){try{let r=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const o=await RC(n);for(const l of a){const u=o.find(m=>m.measurementId===l),d=u&&e[u.appId];if(d)r.push(d);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),t("event",i,s||{})}catch(r){Ft.error(r)}}function jV(t,e,n,i){async function s(r,...a){try{if(r==="event"){const[o,l]=a;await PV(t,e,n,o,l)}else if(r==="config"){const[o,l]=a;await kV(t,e,n,i,o,l)}else if(r==="consent"){const[o,l]=a;t("consent",o,l)}else if(r==="get"){const[o,l,u]=a;t("get",o,l,u)}else if(r==="set"){const[o]=a;t("set",o)}else t(r,...a)}catch(o){Ft.error(o)}}return s}function OV(t,e,n,i,s){let r=function(...a){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=jV(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function MV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(a0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=30,LV=1e3;class UV{constructor(e={},n=LV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IC=new UV;function BV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function HV(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:BV(i)},r=AV.replace("{app-id}",n),a=await fetch(r,s);if(a.status!==200&&a.status!==304){let o="";try{const l=await a.json();!((e=l.error)===null||e===void 0)&&e.message&&(o=l.error.message)}catch{}throw nn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:o})}return a.json()}async function FV(t,e=IC,n){const{appId:i,apiKey:s,measurementId:r}=t.options;if(!i)throw nn.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:i};throw nn.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new GV;return setTimeout(async()=>{o.abort()},SV),NC({appId:i,apiKey:s,measurementId:r},a,o,e)}async function NC(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=IC){var r;const{appId:a,measurementId:o}=t;try{await zV(i,e)}catch(l){if(o)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:a,measurementId:o};throw l}try{const l=await HV(t);return s.deleteThrottleMetadata(a),l}catch(l){const u=l;if(!qV(u)){if(s.deleteThrottleMetadata(a),o)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw l}const d=Number((r=u==null?void 0:u.customData)===null||r===void 0?void 0:r.httpStatus)===503?v_(n,s.intervalMillis,VV):v_(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(a,m),Ft.debug(`Calling attemptFetch again in ${d} millis`),NC(t,m,i,s)}}function zV(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function qV(t){if(!(t instanceof Pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class GV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function $V(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const r=await e,a=Object.assign(Object.assign({},i),{send_to:r});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(){if(nC())try{await iC()}catch(t){return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function KV(t,e,n,i,s,r,a){var o;const l=FV(t);l.then(g=>{n[g.measurementId]=g.appId,t.options.measurementId&&g.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ft.error(g)),e.push(l);const u=XV().then(g=>{if(g)return i.getId()}),[d,m]=await Promise.all([l,u]);MV(r)||NV(r,d.measurementId),s("js",new Date);const f=(o=a==null?void 0:a.config)!==null&&o!==void 0?o:{};return f[EV]="firebase",f.update=!0,m!=null&&(f[TV]=m),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.app=e}_delete(){return delete vl[this.app.options.appId],Promise.resolve()}}let vl={},I_=[];const N_={};let km="dataLayer",WV="gtag",D_,DC,k_=!1;function QV(){const t=[];if(tC()&&t.push("This is a browser extension environment."),yM()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=nn.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function JV(t,e,n){QV();const i=t.options.appId;if(!i)throw nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nn.create("no-api-key");if(vl[i]!=null)throw nn.create("already-exists",{id:i});if(!k_){DV(km);const{wrappedGtag:r,gtagCore:a}=OV(vl,I_,N_,km,WV);DC=r,D_=a,k_=!0}return vl[i]=KV(t,I_,N_,e,D_,km,n),new YV(t)}function ZV(t=t0()){t=Je(t);const e=jr(t,Yh);return e.isInitialized()?e.getImmediate():eL(t)}function eL(t,e={}){const n=jr(t,Yh);if(n.isInitialized()){const s=n.getImmediate();if(As(e,n.getOptions()))return s;throw nn.create("already-initialized")}return n.initialize({options:e})}function tL(t,e,n,i){t=Je(t),$V(DC,vl[t.app.options.appId],e,n,i).catch(s=>Ft.error(s))}const P_="@firebase/analytics",j_="0.10.17";function nL(){Zn(new In(Yh,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return JV(i,s,n)},"PUBLIC")),Zn(new In("analytics-internal",t,"PRIVATE")),pn(P_,j_),pn(P_,j_,"esm2017");function t(e){try{const n=e.getProvider(Yh).getImmediate();return{logEvent:(i,s,r)=>tL(n,i,s,r)}}catch(n){throw nn.create("interop-component-reg-failed",{reason:n})}}}nL();function o0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function kC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iL=kC,PC=new Pr("auth","Firebase",kC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new Hd("@firebase/auth");function sL(t,...e){Wh.logLevel<=ae.WARN&&Wh.warn(`Auth (${co}): ${t}`,...e)}function eh(t,...e){Wh.logLevel<=ae.ERROR&&Wh.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw c0(t,...e)}function Sn(t,...e){return c0(t,...e)}function l0(t,e,n){const i=Object.assign(Object.assign({},iL()),{[e]:n});return new Pr("auth","Firebase",i).create(e,{appName:t.name})}function qn(t){return l0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jC(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&xn(t,"argument-error"),l0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function c0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return PC.create(t,...e)}function Y(t,e,...n){if(!t)throw c0(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eh(e),new Error(e)}function ji(t,e){t||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rL(){return O_()==="http:"||O_()==="https:"}function O_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rL()||tC()||"connection"in navigator)?navigator.onLine:!0}function oL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=hM()||mM()}get(){return aL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){ji(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uL=new kc(3e4,6e4);function Bs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hs(t,e,n,i,s={}){return MC(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const o=Dc(Object.assign({key:t.config.apiKey},a)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},r);return fM()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&lo(t.emulatorConfig.host)&&(u.credentials="include"),OC.fetch()(await VC(t,t.config.apiHost,n,o),u)})}async function MC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},lL),e);try{const s=new dL(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Iu(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const o=r.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Iu(t,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Iu(t,"email-already-in-use",a);if(l==="USER_DISABLED")throw Iu(t,"user-disabled",a);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l0(t,d,u);xn(t,d)}}catch(s){if(s instanceof Pn)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function Pc(t,e,n,i,s={}){const r=await Hs(t,e,n,i,s);return"mfaPendingCredential"in r&&xn(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function VC(t,e,n,i){const s=`${e}${n}?${i}`,r=t,a=r.config.emulator?u0(t.config,s):`${t.config.apiScheme}://${s}`;return cL.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(a).toString():a}function hL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Sn(this.auth,"network-request-failed")),uL.get())})}}function Iu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Sn(t,e,i);return s.customData._tokenResponse=n,s}function M_(t){return t!==void 0&&t.enterprise!==void 0}class fL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mL(t,e){return Hs(t,"GET","/v2/recaptchaConfig",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t,e){return Hs(t,"POST","/v1/accounts:delete",e)}async function Qh(t,e){return Hs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gL(t,e=!1){const n=Je(t),i=await n.getIdToken(e),s=h0(i);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:xl(Pm(s.auth_time)),issuedAtTime:xl(Pm(s.iat)),expirationTime:xl(Pm(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Pm(t){return Number(t)*1e3}function h0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return eh("JWT malformed, contained fewer than 3 sections"),null;try{const s=YA(n);return s?JSON.parse(s):(eh("Failed to decode base64 JWT payload"),null)}catch(s){return eh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function V_(t){const e=h0(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Pn&&yL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function yL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xl(this.lastLoginAt),this.creationTime=xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jh(t){var e;const n=t.auth,i=await t.getIdToken(),s=await $l(t,Qh(n,{idToken:i}));Y(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?LC(r.providerUserInfo):[],o=bL(t.providerData,a),l=t.isAnonymous,u=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new rg(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function xL(t){const e=Je(t);await Jh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function LC(t){return t.map(e=>{var{providerId:n}=e,i=o0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e){const n=await MC(t,{},async()=>{const i=Dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=await VC(t,s,"/v1/token",`key=${r}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:i};return t.emulatorConfig&&lo(t.emulatorConfig.host)&&(l.credentials="include"),OC.fetch()(a,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wL(t,e){return Hs(t,"POST","/v2/accounts:revokeToken",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=V_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await _L(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Ra;return i&&(Y(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(Y(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(Y(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tn{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=o0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new rg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await $l(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gL(this,e)}reload(){return xL(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Jh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await $l(this,pL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,a,o,l,u,d;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,g=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,w=(a=n.photoURL)!==null&&a!==void 0?a:void 0,E=(o=n.tenantId)!==null&&o!==void 0?o:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(u=n.createdAt)!==null&&u!==void 0?u:void 0,x=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:S}=n;Y(b&&S,e,"internal-error");const _=Ra.fromJSON(this.name,S);Y(typeof b=="string",e,"internal-error"),$i(m,e.name),$i(f,e.name),Y(typeof R=="boolean",e,"internal-error"),Y(typeof j=="boolean",e,"internal-error"),$i(g,e.name),$i(w,e.name),$i(E,e.name),$i(T,e.name),$i(v,e.name),$i(x,e.name);const C=new Tn({uid:b,auth:e,email:f,emailVerified:R,displayName:m,isAnonymous:j,photoURL:w,phoneNumber:g,tenantId:E,stsTokenManager:_,createdAt:v,lastLoginAt:x});return V&&Array.isArray(V)&&(C.providerData=V.map(I=>Object.assign({},I))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,n,i=!1){const s=new Ra;s.updateFromServerResponse(n);const r=new Tn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Jh(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?LC(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),o=new Ra;o.updateFromIdToken(i);const l=new Tn({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new rg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=new Map;function Ti(t){ji(t instanceof Function,"Expected a class definition");let e=L_.get(t);return e?(ji(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,L_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}UC.type="NONE";const U_=UC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t,e,n){return`firebase:${t}:${e}:${n}`}class Ia{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=th(this.userKey,s.apiKey,r),this.fullPersistenceKey=th("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qh(this.auth,{idToken:e}).catch(()=>{});return n?Tn._fromGetAccountInfoResponse(this.auth,n,e):null}return Tn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ia(Ti(U_),e,i);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||Ti(U_);const a=th(i,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){let m;if(typeof d=="string"){const f=await Qh(e,{idToken:d}).catch(()=>{});if(!f)break;m=await Tn._fromGetAccountInfoResponse(e,f,d)}else m=Tn._fromJSON(e,d);u!==r&&(o=m),r=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Ia(r,e,i):(r=l[0],o&&await r._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==r)try{await u._remove(a)}catch{}})),new Ia(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GC(e))return"Blackberry";if($C(e))return"Webos";if(HC(e))return"Safari";if((e.includes("chrome/")||FC(e))&&!e.includes("edge/"))return"Chrome";if(qC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function BC(t=Ct()){return/firefox\//i.test(t)}function HC(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FC(t=Ct()){return/crios\//i.test(t)}function zC(t=Ct()){return/iemobile/i.test(t)}function qC(t=Ct()){return/android/i.test(t)}function GC(t=Ct()){return/blackberry/i.test(t)}function $C(t=Ct()){return/webos/i.test(t)}function d0(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TL(t=Ct()){var e;return d0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function EL(){return pM()&&document.documentMode===10}function XC(t=Ct()){return d0(t)||qC(t)||$C(t)||GC(t)||/windows phone/i.test(t)||zC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(t,e=[]){let n;switch(t){case"Browser":n=B_(Ct());break;case"Worker":n=`${B_(Ct())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,o)=>{try{const l=e(r);a(l)}catch(l){o(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",Bs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=6;class RL{constructor(e){var n,i,s,r;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:CL,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,a,o;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(o=l.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new SL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ti(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qh(this,{idToken:e}),i=await Tn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ut(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!a||a===o)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Jh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(qn(this));const n=e?Je(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AL(this),n=new RL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await wL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ti(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[Ti(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(o,this,"internal-error"),o.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,s);return()=>{a=!0,l()}}else{const l=e.addObserver(n);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ai(t){return Je(t)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=wM(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(t){qd=t}function YC(t){return qd.loadJS(t)}function DL(){return qd.recaptchaEnterpriseScript}function kL(){return qd.gapiScript}function PL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jL{constructor(){this.enterprise=new OL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ML="recaptcha-enterprise",WC="NO_RECAPTCHA";class VL{constructor(e){this.type=ML,this.auth=ai(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,o)=>{mL(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new fL(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,a(u.siteKey)}}).catch(l=>{o(l)})})}function s(r,a,o){const l=window.grecaptcha;M_(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(u=>{a(u)}).catch(()=>{a(WC)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jL().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(o=>{if(!n&&M_(window.grecaptcha))s(o,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=DL();l.length!==0&&(l+=o),YC(l).then(()=>{s(o,r,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function F_(t,e,n,i=!1,s=!1){const r=new VL(t);let a;if(s)a=WC;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const o=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return i?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ag(t,e,n,i,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await F_(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await F_(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LL(t,e){const n=jr(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(As(r,e??{}))return s;xn(s,"already-initialized")}return n.initialize({options:e})}function UL(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Ti);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function BL(t,e,n){const i=ai(t);Y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=QC(e),{host:a,port:o}=HL(e),l=o===null?"":`:${o}`,u={url:`${r}//${a}${l}/`},d=Object.freeze({host:a,port:o,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Y(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Y(As(u,i.config.emulator)&&As(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,lo(a)?(ZA(`${r}//${a}${l}`),eC("Auth",!0)):FL()}function QC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HL(t){const e=QC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:z_(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:z_(a)}}}function z_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function zL(t,e){return Hs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(t,e){return Pc(t,"POST","/v1/accounts:signInWithPassword",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}async function $L(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends f0{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Xl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,n,"signInWithPassword",qL);case"emailLink":return GL(e,{email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ag(e,i,"signUpPassword",zL);case"emailLink":return $L(e,{idToken:n,email:this._email,oobCode:this._password});default:xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e){return Pc(t,"POST","/v1/accounts:signInWithIdp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL="http://localhost";class Tr extends f0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=o0(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Tr(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Na(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Na(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Na(e,n)}buildRequest(){const e={requestUri:XL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Dc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YL(t){const e=Yo(Wo(t)).link,n=e?Yo(Wo(e)).deep_link_id:null,i=Yo(Wo(t)).deep_link_id;return(i?Yo(Wo(i)).link:null)||i||n||e||t}class m0{constructor(e){var n,i,s,r,a,o;const l=Yo(Wo(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(i=l.oobCode)!==null&&i!==void 0?i:null,m=KL((s=l.mode)!==null&&s!==void 0?s:null);Y(u&&d&&m,"argument-error"),this.apiKey=u,this.operation=m,this.code=d,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(o=l.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=YL(e);try{return new m0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.providerId=uo.PROVIDER_ID}static credential(e,n){return Xl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=m0.parseLink(n);return Y(i,"argument-error"),Xl._fromEmailAndCode(e,i.code,i.tenantId)}}uo.PROVIDER_ID="password";uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Gd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends jc{constructor(){super("facebook.com")}static credential(e){return Tr._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Tr._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return gi.credential(n,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends jc{constructor(){super("github.com")}static credential(e){return Tr._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.GITHUB_SIGN_IN_METHOD="github.com";is.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends jc{constructor(){super("twitter.com")}static credential(e,n){return Tr._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ss.credential(n,i)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){return Pc(t,"POST","/v1/accounts:signUp",Bs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Tn._fromIdTokenResponse(e,i,s),a=q_(i);return new Er({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=q_(i);return new Er({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function q_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh extends Pn{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Zh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Zh(e,n,i,s)}}function JC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Zh._fromErrorAndOperation(t,r,e,i):r})}async function QL(t,e,n=!1){const i=await $l(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Er._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e,n=!1){const{auth:i}=t;if(Ut(i.app))return Promise.reject(qn(i));const s="reauthenticate";try{const r=await $l(t,JC(i,s,e,t),n);Y(r.idToken,i,"internal-error");const a=h0(r.idToken);Y(a,i,"internal-error");const{sub:o}=a;return Y(t.uid===o,i,"user-mismatch"),Er._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&xn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e,n=!1){if(Ut(t.app))return Promise.reject(qn(t));const i="signIn",s=await JC(t,i,e),r=await Er._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function ZL(t,e){return ZC(ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t){const e=ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e3(t,e,n){if(Ut(t.app))return Promise.reject(qn(t));const i=ai(t),a=await ag(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&eR(t),l}),o=await Er._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(o.user),o}function t3(t,e,n){return Ut(t.app)?Promise.reject(qn(t)):ZL(Je(t),uo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&eR(t),i})}function n3(t,e,n,i){return Je(t).onIdTokenChanged(e,n,i)}function i3(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function s3(t,e,n,i){return Je(t).onAuthStateChanged(e,n,i)}function r3(t){return Je(t).signOut()}const ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ed,"1"),this.storage.removeItem(ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=1e3,o3=10;class nR extends tR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);EL()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,o3):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},a3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nR.type="LOCAL";const l3=nR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR extends tR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iR.type="SESSION";const sR=iR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new $d(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const o=Array.from(a).map(async u=>u(n.origin,r)),l=await c3(o);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((o,l)=>{const u=p0("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(m){const f=m;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(f.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function h3(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function d3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function f3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function m3(){return rR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="firebaseLocalStorageDb",p3=1,td="firebaseLocalStorage",oR="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xd(t,e){return t.transaction([td],e?"readwrite":"readonly").objectStore(td)}function g3(){const t=indexedDB.deleteDatabase(aR);return new Oc(t).toPromise()}function og(){const t=indexedDB.open(aR,p3);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(td,{keyPath:oR})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(td)?e(i):(i.close(),await g3(),e(await og()))})})}async function G_(t,e,n){const i=Xd(t,!0).put({[oR]:e,value:n});return new Oc(i).toPromise()}async function y3(t,e){const n=Xd(t,!1).get(e),i=await new Oc(n).toPromise();return i===void 0?null:i.value}function $_(t,e){const n=Xd(t,!0).delete(e);return new Oc(n).toPromise()}const v3=800,x3=3;class lR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await og(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>x3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(m3()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await d3(),!this.activeServiceWorker)return;this.sender=new u3(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||f3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await og();return await G_(e,ed,"1"),await $_(e,ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>G_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>y3(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>$_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Xd(s,!1).getAll();return new Oc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lR.type="LOCAL";const b3=lR;new kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t,e){return e?Ti(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends f0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Na(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Na(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Na(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _3(t){return ZC(t.auth,new y0(t),t.bypassAuthState)}function w3(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),JL(n,new y0(t),t.bypassAuthState)}async function T3(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),QL(n,new y0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _3;case"linkViaPopup":case"linkViaRedirect":return T3;case"reauthViaPopup":case"reauthViaRedirect":return w3;default:xn(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=new kc(2e3,1e4);async function S3(t,e,n){if(Ut(t.app))return Promise.reject(Sn(t,"operation-not-supported-in-this-environment"));const i=ai(t);jC(t,e,Gd);const s=g0(i,n);return new ir(i,"signInViaPopup",e,s).executeNotNull()}class ir extends cR{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,ir.currentPopupAction&&ir.currentPopupAction.cancel(),ir.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=p0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ir.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E3.get())};e()}}ir.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="pendingRedirect",nh=new Map;class C3 extends cR{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=nh.get(this.auth._key());if(!e){try{const i=await R3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}nh.set(this.auth._key(),e)}return this.bypassAuthState||nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R3(t,e){const n=hR(e),i=uR(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}async function I3(t,e){return uR(t)._set(hR(e),"true")}function N3(t,e){nh.set(t._key(),e)}function uR(t){return Ti(t._redirectPersistence)}function hR(t){return th(A3,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t,e,n){return k3(t,e,n)}async function k3(t,e,n){if(Ut(t.app))return Promise.reject(qn(t));const i=ai(t);jC(t,e,Gd),await i._initializationPromise;const s=g0(i,n);return await I3(s,i),s._openRedirect(i,e,"signInViaRedirect")}async function P3(t,e){return await ai(t)._initializationPromise,dR(t,e,!1)}async function dR(t,e,n=!1){if(Ut(t.app))return Promise.reject(qn(t));const i=ai(t),s=g0(i,e),a=await new C3(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=10*60*1e3;class O3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!fR(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j3&&this.cachedEventUids.clear(),this.cachedEventUids.has(X_(e))}saveEventToCache(e){this.cachedEventUids.add(X_(e)),this.lastProcessedEventTime=Date.now()}}function X_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V3(t,e={}){return Hs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,U3=/^https?/;async function B3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await V3(t);for(const n of e)try{if(H3(n))return}catch{}xn(t,"unauthorized-domain")}function H3(t){const e=sg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!U3.test(n))return!1;if(L3.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=new kc(3e4,6e4);function K_(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function z3(t){return new Promise((e,n)=>{var i,s,r;function a(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(Sn(t,"network-request-failed"))},timeout:F3.get()})}if(!((s=(i=Gn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Gn().gapi)===null||r===void 0)&&r.load)a();else{const o=PL("iframefcb");return Gn()[o]=()=>{gapi.load?a():n(Sn(t,"network-request-failed"))},YC(`${kL()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw ih=null,e})}let ih=null;function q3(t){return ih=ih||z3(t),ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=new kc(5e3,15e3),$3="__/auth/iframe",X3="emulator/auth/iframe",K3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W3(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?u0(e,X3):`https://${t.config.authDomain}/${$3}`,i={apiKey:e.apiKey,appName:t.name,v:co},s=Y3.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Dc(i).slice(1)}`}async function Q3(t){const e=await q3(t),n=Gn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:W3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K3,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=Sn(t,"network-request-failed"),o=Gn().setTimeout(()=>{r(a)},G3.get());function l(){Gn().clearTimeout(o),s(i)}i.ping(l).then(l,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z3=500,e5=600,t5="_blank",n5="http://localhost";class Y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i5(t,e,n,i=Z3,s=e5){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const l=Object.assign(Object.assign({},J3),{width:i.toString(),height:s.toString(),top:r,left:a}),u=Ct().toLowerCase();n&&(o=FC(u)?t5:n),BC(u)&&(e=e||n5,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[g,w])=>`${f}${g}=${w},`,"");if(TL(u)&&o!=="_self")return s5(e||"",o),new Y_(null);const m=window.open(e||"",o,d);Y(m,t,"popup-blocked");try{m.focus()}catch{}return new Y_(m)}function s5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="__/auth/handler",a5="emulator/auth/handler",o5=encodeURIComponent("fac");async function W_(t,e,n,i,s,r){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:co,eventId:s};if(e instanceof Gd){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",_M(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))a[d]=m}if(e instanceof jc){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${o5}=${encodeURIComponent(l)}`:"";return`${l5(t)}?${Dc(o).slice(1)}${u}`}function l5({config:t}){return t.emulator?u0(t,a5):`https://${t.authDomain}/${r5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class c5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sR,this._completeRedirectFn=dR,this._overrideRedirectResult=N3}async _openPopup(e,n,i,s){var r;ji((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await W_(e,n,i,sg(),s);return i5(e,a,p0())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await W_(e,n,i,sg(),s);return h3(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(ji(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Q3(e),i=new O3(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jm,{type:jm},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[jm];a!==void 0&&n(!!a),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XC()||HC()||d0()}}const u5=c5;var Q_="@firebase/auth",J_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f5(t){Zn(new In("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Y(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KC(t)},u=new IL(i,s,r,l);return UL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Zn(new In("auth-internal",e=>{const n=ai(e.getProvider("auth").getImmediate());return(i=>new h5(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(Q_,J_,d5(t)),pn(Q_,J_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=5*60,p5=JA("authIdTokenMaxAge")||m5;let Z_=null;const g5=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>p5)return;const s=n==null?void 0:n.token;Z_!==s&&(Z_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function y5(t=t0()){const e=jr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LL(t,{popupRedirectResolver:u5,persistence:[b3,l3,sR]}),i=JA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=g5(r.toString());i3(n,a,()=>a(n.currentUser)),n3(n,o=>a(o))}}const s=WA("auth");return s&&BL(n,`http://${s}`),n}function v5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NL({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Sn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",v5().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f5("Browser");var ew=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,mR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function C(){}C.prototype=_.prototype,S.D=_.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(I,k,P){for(var N=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)N[ke-2]=arguments[ke];return _.prototype[k].apply(I,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,_,C){C||(C=0);var I=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)I[k]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(k=0;16>k;++k)I[k]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=S.g[0],C=S.g[1],k=S.g[2];var P=S.g[3],N=_+(P^C&(k^P))+I[0]+3614090360&4294967295;_=C+(N<<7&4294967295|N>>>25),N=P+(k^_&(C^k))+I[1]+3905402710&4294967295,P=_+(N<<12&4294967295|N>>>20),N=k+(C^P&(_^C))+I[2]+606105819&4294967295,k=P+(N<<17&4294967295|N>>>15),N=C+(_^k&(P^_))+I[3]+3250441966&4294967295,C=k+(N<<22&4294967295|N>>>10),N=_+(P^C&(k^P))+I[4]+4118548399&4294967295,_=C+(N<<7&4294967295|N>>>25),N=P+(k^_&(C^k))+I[5]+1200080426&4294967295,P=_+(N<<12&4294967295|N>>>20),N=k+(C^P&(_^C))+I[6]+2821735955&4294967295,k=P+(N<<17&4294967295|N>>>15),N=C+(_^k&(P^_))+I[7]+4249261313&4294967295,C=k+(N<<22&4294967295|N>>>10),N=_+(P^C&(k^P))+I[8]+1770035416&4294967295,_=C+(N<<7&4294967295|N>>>25),N=P+(k^_&(C^k))+I[9]+2336552879&4294967295,P=_+(N<<12&4294967295|N>>>20),N=k+(C^P&(_^C))+I[10]+4294925233&4294967295,k=P+(N<<17&4294967295|N>>>15),N=C+(_^k&(P^_))+I[11]+2304563134&4294967295,C=k+(N<<22&4294967295|N>>>10),N=_+(P^C&(k^P))+I[12]+1804603682&4294967295,_=C+(N<<7&4294967295|N>>>25),N=P+(k^_&(C^k))+I[13]+4254626195&4294967295,P=_+(N<<12&4294967295|N>>>20),N=k+(C^P&(_^C))+I[14]+2792965006&4294967295,k=P+(N<<17&4294967295|N>>>15),N=C+(_^k&(P^_))+I[15]+1236535329&4294967295,C=k+(N<<22&4294967295|N>>>10),N=_+(k^P&(C^k))+I[1]+4129170786&4294967295,_=C+(N<<5&4294967295|N>>>27),N=P+(C^k&(_^C))+I[6]+3225465664&4294967295,P=_+(N<<9&4294967295|N>>>23),N=k+(_^C&(P^_))+I[11]+643717713&4294967295,k=P+(N<<14&4294967295|N>>>18),N=C+(P^_&(k^P))+I[0]+3921069994&4294967295,C=k+(N<<20&4294967295|N>>>12),N=_+(k^P&(C^k))+I[5]+3593408605&4294967295,_=C+(N<<5&4294967295|N>>>27),N=P+(C^k&(_^C))+I[10]+38016083&4294967295,P=_+(N<<9&4294967295|N>>>23),N=k+(_^C&(P^_))+I[15]+3634488961&4294967295,k=P+(N<<14&4294967295|N>>>18),N=C+(P^_&(k^P))+I[4]+3889429448&4294967295,C=k+(N<<20&4294967295|N>>>12),N=_+(k^P&(C^k))+I[9]+568446438&4294967295,_=C+(N<<5&4294967295|N>>>27),N=P+(C^k&(_^C))+I[14]+3275163606&4294967295,P=_+(N<<9&4294967295|N>>>23),N=k+(_^C&(P^_))+I[3]+4107603335&4294967295,k=P+(N<<14&4294967295|N>>>18),N=C+(P^_&(k^P))+I[8]+1163531501&4294967295,C=k+(N<<20&4294967295|N>>>12),N=_+(k^P&(C^k))+I[13]+2850285829&4294967295,_=C+(N<<5&4294967295|N>>>27),N=P+(C^k&(_^C))+I[2]+4243563512&4294967295,P=_+(N<<9&4294967295|N>>>23),N=k+(_^C&(P^_))+I[7]+1735328473&4294967295,k=P+(N<<14&4294967295|N>>>18),N=C+(P^_&(k^P))+I[12]+2368359562&4294967295,C=k+(N<<20&4294967295|N>>>12),N=_+(C^k^P)+I[5]+4294588738&4294967295,_=C+(N<<4&4294967295|N>>>28),N=P+(_^C^k)+I[8]+2272392833&4294967295,P=_+(N<<11&4294967295|N>>>21),N=k+(P^_^C)+I[11]+1839030562&4294967295,k=P+(N<<16&4294967295|N>>>16),N=C+(k^P^_)+I[14]+4259657740&4294967295,C=k+(N<<23&4294967295|N>>>9),N=_+(C^k^P)+I[1]+2763975236&4294967295,_=C+(N<<4&4294967295|N>>>28),N=P+(_^C^k)+I[4]+1272893353&4294967295,P=_+(N<<11&4294967295|N>>>21),N=k+(P^_^C)+I[7]+4139469664&4294967295,k=P+(N<<16&4294967295|N>>>16),N=C+(k^P^_)+I[10]+3200236656&4294967295,C=k+(N<<23&4294967295|N>>>9),N=_+(C^k^P)+I[13]+681279174&4294967295,_=C+(N<<4&4294967295|N>>>28),N=P+(_^C^k)+I[0]+3936430074&4294967295,P=_+(N<<11&4294967295|N>>>21),N=k+(P^_^C)+I[3]+3572445317&4294967295,k=P+(N<<16&4294967295|N>>>16),N=C+(k^P^_)+I[6]+76029189&4294967295,C=k+(N<<23&4294967295|N>>>9),N=_+(C^k^P)+I[9]+3654602809&4294967295,_=C+(N<<4&4294967295|N>>>28),N=P+(_^C^k)+I[12]+3873151461&4294967295,P=_+(N<<11&4294967295|N>>>21),N=k+(P^_^C)+I[15]+530742520&4294967295,k=P+(N<<16&4294967295|N>>>16),N=C+(k^P^_)+I[2]+3299628645&4294967295,C=k+(N<<23&4294967295|N>>>9),N=_+(k^(C|~P))+I[0]+4096336452&4294967295,_=C+(N<<6&4294967295|N>>>26),N=P+(C^(_|~k))+I[7]+1126891415&4294967295,P=_+(N<<10&4294967295|N>>>22),N=k+(_^(P|~C))+I[14]+2878612391&4294967295,k=P+(N<<15&4294967295|N>>>17),N=C+(P^(k|~_))+I[5]+4237533241&4294967295,C=k+(N<<21&4294967295|N>>>11),N=_+(k^(C|~P))+I[12]+1700485571&4294967295,_=C+(N<<6&4294967295|N>>>26),N=P+(C^(_|~k))+I[3]+2399980690&4294967295,P=_+(N<<10&4294967295|N>>>22),N=k+(_^(P|~C))+I[10]+4293915773&4294967295,k=P+(N<<15&4294967295|N>>>17),N=C+(P^(k|~_))+I[1]+2240044497&4294967295,C=k+(N<<21&4294967295|N>>>11),N=_+(k^(C|~P))+I[8]+1873313359&4294967295,_=C+(N<<6&4294967295|N>>>26),N=P+(C^(_|~k))+I[15]+4264355552&4294967295,P=_+(N<<10&4294967295|N>>>22),N=k+(_^(P|~C))+I[6]+2734768916&4294967295,k=P+(N<<15&4294967295|N>>>17),N=C+(P^(k|~_))+I[13]+1309151649&4294967295,C=k+(N<<21&4294967295|N>>>11),N=_+(k^(C|~P))+I[4]+4149444226&4294967295,_=C+(N<<6&4294967295|N>>>26),N=P+(C^(_|~k))+I[11]+3174756917&4294967295,P=_+(N<<10&4294967295|N>>>22),N=k+(_^(P|~C))+I[2]+718787259&4294967295,k=P+(N<<15&4294967295|N>>>17),N=C+(P^(k|~_))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+P&4294967295}i.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var C=_-this.blockSize,I=this.B,k=this.h,P=0;P<_;){if(k==0)for(;P<=C;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<_;)if(I[k++]=S.charCodeAt(P++),k==this.blockSize){s(this,I),k=0;break}}else for(;P<_;)if(I[k++]=S[P++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=_},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var C=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=C&255,C/=256;for(this.u(S),S=Array(16),_=C=0;4>_;++_)for(var I=0;32>I;I+=8)S[C++]=this.g[_]>>>I&255;return S};function r(S,_){var C=o;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=_(S)}function a(S,_){this.h=_;for(var C=[],I=!0,k=S.length-1;0<=k;k--){var P=S[k]|0;I&&P==_||(C[k]=P,I=!1)}this.g=C}var o={};function l(S){return-128<=S&&128>S?r(S,function(_){return new a([_|0],0>_?-1:0)}):new a([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return T(u(-S));for(var _=[],C=1,I=0;S>=C;I++)_[I]=S/C|0,C*=4294967296;return new a(_,0)}function d(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return T(d(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(_,8)),I=m,k=0;k<S.length;k+=8){var P=Math.min(8,S.length-k),N=parseInt(S.substring(k,k+P),_);8>P?(P=u(Math.pow(_,P)),I=I.j(P).add(u(N))):(I=I.j(C),I=I.add(u(N)))}return I}var m=l(0),f=l(1),g=l(16777216);t=a.prototype,t.m=function(){if(E(this))return-T(this).m();for(var S=0,_=1,C=0;C<this.g.length;C++){var I=this.i(C);S+=(0<=I?I:4294967296+I)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(w(this))return"0";if(E(this))return"-"+T(this).toString(S);for(var _=u(Math.pow(S,6)),C=this,I="";;){var k=R(C,_).g;C=v(C,k.j(_));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=k,w(C))return P+I;for(;6>P.length;)P="0"+P;I=P+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function w(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function E(S){return S.h==-1}t.l=function(S){return S=v(this,S),E(S)?-1:w(S)?0:1};function T(S){for(var _=S.g.length,C=[],I=0;I<_;I++)C[I]=~S.g[I];return new a(C,~S.h).add(f)}t.abs=function(){return E(this)?T(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],I=0,k=0;k<=_;k++){var P=I+(this.i(k)&65535)+(S.i(k)&65535),N=(P>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);I=N>>>16,P&=65535,N&=65535,C[k]=N<<16|P}return new a(C,C[C.length-1]&-2147483648?-1:0)};function v(S,_){return S.add(T(_))}t.j=function(S){if(w(this)||w(S))return m;if(E(this))return E(S)?T(this).j(T(S)):T(T(this).j(S));if(E(S))return T(this.j(T(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var _=this.g.length+S.g.length,C=[],I=0;I<2*_;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<S.g.length;k++){var P=this.i(I)>>>16,N=this.i(I)&65535,ke=S.i(k)>>>16,Ze=S.i(k)&65535;C[2*I+2*k]+=N*Ze,x(C,2*I+2*k),C[2*I+2*k+1]+=P*Ze,x(C,2*I+2*k+1),C[2*I+2*k+1]+=N*ke,x(C,2*I+2*k+1),C[2*I+2*k+2]+=P*ke,x(C,2*I+2*k+2)}for(I=0;I<_;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=_;I<2*_;I++)C[I]=0;return new a(C,0)};function x(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function b(S,_){this.g=S,this.h=_}function R(S,_){if(w(_))throw Error("division by zero");if(w(S))return new b(m,m);if(E(S))return _=R(T(S),_),new b(T(_.g),T(_.h));if(E(_))return _=R(S,T(_)),new b(T(_.g),_.h);if(30<S.g.length){if(E(S)||E(_))throw Error("slowDivide_ only works with positive integers.");for(var C=f,I=_;0>=I.l(S);)C=j(C),I=j(I);var k=V(C,1),P=V(I,1);for(I=V(I,2),C=V(C,2);!w(I);){var N=P.add(I);0>=N.l(S)&&(k=k.add(C),P=N),I=V(I,1),C=V(C,1)}return _=v(S,k.j(_)),new b(k,_)}for(k=m;0<=S.l(_);){for(C=Math.max(1,Math.floor(S.m()/_.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),P=u(C),N=P.j(_);E(N)||0<N.l(S);)C-=I,P=u(C),N=P.j(_);w(P)&&(P=f),k=k.add(P),S=v(S,N)}return new b(k,S)}t.A=function(S){return R(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],I=0;I<_;I++)C[I]=this.i(I)&S.i(I);return new a(C,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],I=0;I<_;I++)C[I]=this.i(I)|S.i(I);return new a(C,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),C=[],I=0;I<_;I++)C[I]=this.i(I)^S.i(I);return new a(C,this.h^S.h)};function j(S){for(var _=S.g.length+1,C=[],I=0;I<_;I++)C[I]=S.i(I)<<1|S.i(I-1)>>>31;return new a(C,S.h)}function V(S,_){var C=_>>5;_%=32;for(var I=S.g.length-C,k=[],P=0;P<I;P++)k[P]=0<_?S.i(P+C)>>>_|S.i(P+C+1)<<32-_:S.i(P+C);return new a(k,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,mR=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,bs=a}).apply(typeof ew<"u"?ew:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pR,Qo,gR,sh,lg,yR,vR,xR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,y){return c==Array.prototype||c==Object.prototype||(c[p]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var p=0;p<c.length;++p){var y=c[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function s(c,p){if(p)e:{var y=i;c=c.split(".");for(var A=0;A<c.length-1;A++){var O=c[A];if(!(O in y))break e;y=y[O]}c=c[c.length-1],A=y[c],p=p(A),p!=A&&p!=null&&e(y,c,{configurable:!0,writable:!0,value:p})}}function r(c,p){c instanceof String&&(c+="");var y=0,A=!1,O={next:function(){if(!A&&y<c.length){var L=y++;return{value:p(L,c[L]),done:!1}}return A=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return r(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function d(c,p,y){return c.call.apply(c.bind,arguments)}function m(c,p,y){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,A),c.apply(p,O)}}return function(){return c.apply(p,arguments)}}function f(c,p,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,f.apply(null,arguments)}function g(c,p){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function w(c,p){function y(){}y.prototype=p.prototype,c.aa=p.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(A,O,L){for(var z=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)z[xe-2]=arguments[xe];return p.prototype[O].apply(A,z)}}function E(c){const p=c.length;if(0<p){const y=Array(p);for(let A=0;A<p;A++)y[A]=c[A];return y}return[]}function T(c,p){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(l(A)){const O=c.length||0,L=A.length||0;c.length=O+L;for(let z=0;z<L;z++)c[O+z]=A[z]}else c.push(A)}}class v{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=o.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var j=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function V(c,p,y){for(const A in c)p.call(y,c[A],A,c)}function S(c,p){for(const y in c)p.call(void 0,c[y],y,c)}function _(c){const p={};for(const y in c)p[y]=c[y];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,p){let y,A;for(let O=1;O<arguments.length;O++){A=arguments[O];for(y in A)c[y]=A[y];for(let L=0;L<C.length;L++)y=C[L],Object.prototype.hasOwnProperty.call(A,y)&&(c[y]=A[y])}}function k(c){var p=1;c=c.split(":");const y=[];for(;0<p&&c.length;)y.push(c.shift()),p--;return c.length&&y.push(c.join(":")),y}function P(c){o.setTimeout(()=>{throw c},0)}function N(){var c=he;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class ke{constructor(){this.h=this.g=null}add(p,y){const A=Ze.get();A.set(p,y),this.h?this.h.next=A:this.g=A,this.h=A}}var Ze=new v(()=>new F,c=>c.reset());class F{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let $,X=!1,he=new ke,_e=()=>{const c=o.Promise.resolve(void 0);$=()=>{c.then(Br)}};var Br=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(y){P(y)}var p=Ze;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}X=!1};function Gt(){this.s=this.s,this.C=this.C}Gt.prototype.s=!1,Gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ge(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}Ge.prototype.h=function(){this.defaultPrevented=!0};var oi=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return c}();function Mn(c,p){if(Ge.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(j){e:{try{R(p.nodeName);var O=!0;break e}catch{}O=!1}O||(p=null)}}else y=="mouseover"?p=c.fromElement:y=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:U2[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Mn.aa.h.call(this)}}w(Mn,Ge);var U2={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),B2=0;function H2(c,p,y,A,O){this.listener=c,this.proxy=null,this.src=p,this.type=y,this.capture=!!A,this.ha=O,this.key=++B2,this.da=this.fa=!1}function Yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Wc(c){this.src=c,this.g={},this.h=0}Wc.prototype.add=function(c,p,y,A,O){var L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);var z=bf(c,p,A,O);return-1<z?(p=c[z],y||(p.fa=!1)):(p=new H2(p,this.src,L,!!A,O),p.fa=y,c.push(p)),p};function xf(c,p){var y=p.type;if(y in c.g){var A=c.g[y],O=Array.prototype.indexOf.call(A,p,void 0),L;(L=0<=O)&&Array.prototype.splice.call(A,O,1),L&&(Yc(p),c.g[y].length==0&&(delete c.g[y],c.h--))}}function bf(c,p,y,A){for(var O=0;O<c.length;++O){var L=c[O];if(!L.da&&L.listener==p&&L.capture==!!y&&L.ha==A)return O}return-1}var _f="closure_lm_"+(1e6*Math.random()|0),wf={};function Mv(c,p,y,A,O){if(Array.isArray(p)){for(var L=0;L<p.length;L++)Mv(c,p[L],y,A,O);return null}return y=Uv(y),c&&c[Kc]?c.K(p,y,u(A)?!!A.capture:!1,O):F2(c,p,y,!1,A,O)}function F2(c,p,y,A,O,L){if(!p)throw Error("Invalid event type");var z=u(O)?!!O.capture:!!O,xe=Ef(c);if(xe||(c[_f]=xe=new Wc(c)),y=xe.add(p,y,A,z,L),y.proxy)return y;if(A=z2(),y.proxy=A,A.src=c,A.listener=y,c.addEventListener)oi||(O=z),O===void 0&&(O=!1),c.addEventListener(p.toString(),A,O);else if(c.attachEvent)c.attachEvent(Lv(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function z2(){function c(y){return p.call(c.src,c.listener,y)}const p=q2;return c}function Vv(c,p,y,A,O){if(Array.isArray(p))for(var L=0;L<p.length;L++)Vv(c,p[L],y,A,O);else A=u(A)?!!A.capture:!!A,y=Uv(y),c&&c[Kc]?(c=c.i,p=String(p).toString(),p in c.g&&(L=c.g[p],y=bf(L,y,A,O),-1<y&&(Yc(L[y]),Array.prototype.splice.call(L,y,1),L.length==0&&(delete c.g[p],c.h--)))):c&&(c=Ef(c))&&(p=c.g[p.toString()],c=-1,p&&(c=bf(p,y,A,O)),(y=-1<c?p[c]:null)&&Tf(y))}function Tf(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Kc])xf(p.i,c);else{var y=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(y,A,c.capture):p.detachEvent?p.detachEvent(Lv(y),A):p.addListener&&p.removeListener&&p.removeListener(A),(y=Ef(p))?(xf(y,c),y.h==0&&(y.src=null,p[_f]=null)):Yc(c)}}}function Lv(c){return c in wf?wf[c]:wf[c]="on"+c}function q2(c,p){if(c.da)c=!0;else{p=new Mn(p,this);var y=c.listener,A=c.ha||c.src;c.fa&&Tf(c),c=y.call(A,p)}return c}function Ef(c){return c=c[_f],c instanceof Wc?c:null}var Sf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uv(c){return typeof c=="function"?c:(c[Sf]||(c[Sf]=function(p){return c.handleEvent(p)}),c[Sf])}function yt(){Gt.call(this),this.i=new Wc(this),this.M=this,this.F=null}w(yt,Gt),yt.prototype[Kc]=!0,yt.prototype.removeEventListener=function(c,p,y,A){Vv(this,c,p,y,A)};function Rt(c,p){var y,A=c.F;if(A)for(y=[];A;A=A.F)y.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new Ge(p,c);else if(p instanceof Ge)p.target=p.target||c;else{var O=p;p=new Ge(A,c),I(p,O)}if(O=!0,y)for(var L=y.length-1;0<=L;L--){var z=p.g=y[L];O=Qc(z,A,!0,p)&&O}if(z=p.g=c,O=Qc(z,A,!0,p)&&O,O=Qc(z,A,!1,p)&&O,y)for(L=0;L<y.length;L++)z=p.g=y[L],O=Qc(z,A,!1,p)&&O}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var y=c.g[p],A=0;A<y.length;A++)Yc(y[A]);delete c.g[p],c.h--}}this.F=null},yt.prototype.K=function(c,p,y,A){return this.i.add(String(c),p,!1,y,A)},yt.prototype.L=function(c,p,y,A){return this.i.add(String(c),p,!0,y,A)};function Qc(c,p,y,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var O=!0,L=0;L<p.length;++L){var z=p[L];if(z&&!z.da&&z.capture==y){var xe=z.listener,ct=z.ha||z.src;z.fa&&xf(c.i,z),O=xe.call(ct,A)!==!1&&O}}return O&&!A.defaultPrevented}function Bv(c,p,y){if(typeof c=="function")y&&(c=f(c,y));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:o.setTimeout(c,p||0)}function Hv(c){c.g=Bv(()=>{c.g=null,c.i&&(c.i=!1,Hv(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class G2 extends Gt{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Hv(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(c){Gt.call(this),this.h=c,this.g={}}w(wo,Gt);var Fv=[];function zv(c){V(c.g,function(p,y){this.g.hasOwnProperty(y)&&Tf(p)},c),c.g={}}wo.prototype.N=function(){wo.aa.N.call(this),zv(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Af=o.JSON.stringify,$2=o.JSON.parse,X2=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function Cf(){}Cf.prototype.h=null;function qv(c){return c.h||(c.h=c.i())}function Gv(){}var To={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rf(){Ge.call(this,"d")}w(Rf,Ge);function If(){Ge.call(this,"c")}w(If,Ge);var Gs={},$v=null;function Jc(){return $v=$v||new yt}Gs.La="serverreachability";function Xv(c){Ge.call(this,Gs.La,c)}w(Xv,Ge);function Eo(c){const p=Jc();Rt(p,new Xv(p))}Gs.STAT_EVENT="statevent";function Kv(c,p){Ge.call(this,Gs.STAT_EVENT,c),this.stat=p}w(Kv,Ge);function It(c){const p=Jc();Rt(p,new Kv(p,c))}Gs.Ma="timingevent";function Yv(c,p){Ge.call(this,Gs.Ma,c),this.size=p}w(Yv,Ge);function So(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},p)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function K2(c,p,y,A,O,L){c.info(function(){if(c.g)if(L)for(var z="",xe=L.split("&"),ct=0;ct<xe.length;ct++){var ue=xe[ct].split("=");if(1<ue.length){var vt=ue[0];ue=ue[1];var xt=vt.split("_");z=2<=xt.length&&xt[1]=="type"?z+(vt+"="+ue+"&"):z+(vt+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+A+") [attempt "+O+"]: "+p+`
`+y+`
`+z})}function Y2(c,p,y,A,O,L,z){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+O+"]: "+p+`
`+y+`
`+L+" "+z})}function Hr(c,p,y,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Q2(c,y)+(A?" "+A:"")})}function W2(c,p){c.info(function(){return"TIMEOUT: "+p})}Ao.prototype.info=function(){};function Q2(c,p){if(!c.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var A=y[c];if(!(2>A.length)){var O=A[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return Af(y)}catch{return p}}var Zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nf;function eu(){}w(eu,Cf),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},Nf=new eu;function Hi(c,p,y,A){this.j=c,this.i=p,this.l=y,this.R=A||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qv}function Qv(){this.i=null,this.g="",this.h=!1}var Jv={},Df={};function kf(c,p,y){c.L=1,c.v=su(li(p)),c.m=y,c.P=!0,Zv(c,null)}function Zv(c,p){c.F=Date.now(),tu(c),c.A=li(c.v);var y=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),fx(y.i,"t",A),c.C=0,y=c.j.J,c.h=new Qv,c.g=Dx(c.j,y?p:null,!c.m),0<c.O&&(c.M=new G2(f(c.Y,c,c.g),c.O)),p=c.U,y=c.g,A=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(Fv[0]=O.toString()),O=Fv);for(var L=0;L<O.length;L++){var z=Mv(y,O[L],A||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Eo(),K2(c.i,c.u,c.A,c.l,c.R,c.m)}Hi.prototype.ca=function(c){c=c.target;const p=this.M;p&&ci(c)==3?p.j():this.Y(c)},Hi.prototype.Y=function(c){try{if(c==this.g)e:{const xt=ci(this.g);var p=this.g.Ba();const qr=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||bx(this.g)))){this.J||xt!=4||p==7||(p==8||0>=qr?Eo(3):Eo(2)),Pf(this);var y=this.g.Z();this.X=y;t:if(ex(this)){var A=bx(this.g);c="";var O=A.length,L=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$s(this),Co(this);var z="";break t}this.h.i=new o.TextDecoder}for(p=0;p<O;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(L&&p==O-1)});A.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=y==200,Y2(this.i,this.u,this.A,this.l,this.R,xt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,ct=this.g;if((xe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(xe)){var ue=xe;break t}}ue=null}if(y=ue)Hr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jf(this,y);else{this.o=!1,this.s=3,It(12),$s(this),Co(this);break e}}if(this.P){y=!0;let bn;for(;!this.J&&this.C<z.length;)if(bn=J2(this,z),bn==Df){xt==4&&(this.s=4,It(14),y=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(bn==Jv){this.s=4,It(15),Hr(this.i,this.l,z,"[Invalid Chunk]"),y=!1;break}else Hr(this.i,this.l,bn,null),jf(this,bn);if(ex(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||z.length!=0||this.h.h||(this.s=1,It(16),y=!1),this.o=this.o&&y,!y)Hr(this.i,this.l,z,"[Invalid Chunked Response]"),$s(this),Co(this);else if(0<z.length&&!this.W){this.W=!0;var vt=this.j;vt.g==this&&vt.ba&&!vt.M&&(vt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Bf(vt),vt.M=!0,It(11))}}else Hr(this.i,this.l,z,null),jf(this,z);xt==4&&$s(this),this.o&&!this.J&&(xt==4?Cx(this.j,this):(this.o=!1,tu(this)))}else pD(this.g),y==400&&0<z.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),$s(this),Co(this)}}}catch{}finally{}};function ex(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function J2(c,p){var y=c.C,A=p.indexOf(`
`,y);return A==-1?Df:(y=Number(p.substring(y,A)),isNaN(y)?Jv:(A+=1,A+y>p.length?Df:(p=p.slice(A,A+y),c.C=A+y,p)))}Hi.prototype.cancel=function(){this.J=!0,$s(this)};function tu(c){c.S=Date.now()+c.I,tx(c,c.I)}function tx(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=So(f(c.ba,c),p)}function Pf(c){c.B&&(o.clearTimeout(c.B),c.B=null)}Hi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(W2(this.i,this.A),this.L!=2&&(Eo(),It(17)),$s(this),this.s=2,Co(this)):tx(this,this.S-c)};function Co(c){c.j.G==0||c.J||Cx(c.j,c)}function $s(c){Pf(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,zv(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function jf(c,p){try{var y=c.j;if(y.G!=0&&(y.g==c||Of(y.h,c))){if(!c.K&&Of(y.h,c)&&y.G==3){try{var A=y.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var O=A;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)uu(y),lu(y);else break e;Uf(y),It(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=So(f(y.Za,y),6e3));if(1>=sx(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ks(y,11)}else if((c.K||y.g==c)&&uu(y),!x(p))for(O=y.Da.g.parse(p),p=0;p<O.length;p++){let ue=O[p];if(y.T=ue[0],ue=ue[1],y.G==2)if(ue[0]=="c"){y.K=ue[1],y.ia=ue[2];const vt=ue[3];vt!=null&&(y.la=vt,y.j.info("VER="+y.la));const xt=ue[4];xt!=null&&(y.Aa=xt,y.j.info("SVER="+y.Aa));const qr=ue[5];qr!=null&&typeof qr=="number"&&0<qr&&(A=1.5*qr,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const bn=c.g;if(bn){const du=bn.g?bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(du){var L=A.h;L.g||du.indexOf("spdy")==-1&&du.indexOf("quic")==-1&&du.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Mf(L,L.h),L.h=null))}if(A.D){const Hf=bn.g?bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hf&&(A.ya=Hf,Ee(A.I,A.D,Hf))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var z=c;if(A.qa=Nx(A,A.J?A.ia:null,A.W),z.K){rx(A.h,z);var xe=z,ct=A.L;ct&&(xe.I=ct),xe.B&&(Pf(xe),tu(xe)),A.g=z}else Sx(A);0<y.i.length&&cu(y)}else ue[0]!="stop"&&ue[0]!="close"||Ks(y,7);else y.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Ks(y,7):Lf(y):ue[0]!="noop"&&y.l&&y.l.ta(ue),y.v=0)}}Eo(4)}catch{}}var Z2=class{constructor(c,p){this.g=c,this.map=p}};function nx(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ix(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function sx(c){return c.h?1:c.g?c.g.size:0}function Of(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Mf(c,p){c.g?c.g.add(p):c.h=p}function rx(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}nx.prototype.cancel=function(){if(this.i=ax(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ax(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const y of c.g.values())p=p.concat(y.D);return p}return E(c.i)}function eD(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],y=c.length,A=0;A<y;A++)p.push(c[A]);return p}p=[],y=0;for(A in c)p[y++]=c[A];return p}function tD(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var y=0;y<c;y++)p.push(y);return p}p=[],y=0;for(const A in c)p[y++]=A;return p}}}function ox(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var y=tD(c),A=eD(c),O=A.length,L=0;L<O;L++)p.call(void 0,A[L],y&&y[L],c)}var lx=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nD(c,p){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var A=c[y].indexOf("="),O=null;if(0<=A){var L=c[y].substring(0,A);O=c[y].substring(A+1)}else L=c[y];p(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Xs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xs){this.h=c.h,nu(this,c.j),this.o=c.o,this.g=c.g,iu(this,c.s),this.l=c.l;var p=c.i,y=new No;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),cx(this,y),this.m=c.m}else c&&(p=String(c).match(lx))?(this.h=!1,nu(this,p[1]||"",!0),this.o=Ro(p[2]||""),this.g=Ro(p[3]||"",!0),iu(this,p[4]),this.l=Ro(p[5]||"",!0),cx(this,p[6]||"",!0),this.m=Ro(p[7]||"")):(this.h=!1,this.i=new No(null,this.h))}Xs.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Io(p,ux,!0),":");var y=this.g;return(y||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Io(p,ux,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Io(y,y.charAt(0)=="/"?rD:sD,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Io(y,oD)),c.join("")};function li(c){return new Xs(c)}function nu(c,p,y){c.j=y?Ro(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function iu(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function cx(c,p,y){p instanceof No?(c.i=p,lD(c.i,c.h)):(y||(p=Io(p,aD)),c.i=new No(p,c.h))}function Ee(c,p,y){c.i.set(p,y)}function su(c){return Ee(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ro(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Io(c,p,y){return typeof c=="string"?(c=encodeURI(c).replace(p,iD),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function iD(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ux=/[#\/\?@]/g,sD=/[#\?:]/g,rD=/[#\?]/g,aD=/[#\?@]/g,oD=/#/g;function No(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Fi(c){c.g||(c.g=new Map,c.h=0,c.i&&nD(c.i,function(p,y){c.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=No.prototype,t.add=function(c,p){Fi(this),this.i=null,c=Fr(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(p),this.h+=1,this};function hx(c,p){Fi(c),p=Fr(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function dx(c,p){return Fi(c),p=Fr(c,p),c.g.has(p)}t.forEach=function(c,p){Fi(this),this.g.forEach(function(y,A){y.forEach(function(O){c.call(p,O,A,this)},this)},this)},t.na=function(){Fi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let A=0;A<p.length;A++){const O=c[A];for(let L=0;L<O.length;L++)y.push(p[A])}return y},t.V=function(c){Fi(this);let p=[];if(typeof c=="string")dx(this,c)&&(p=p.concat(this.g.get(Fr(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)p=p.concat(c[y])}return p},t.set=function(c,p){return Fi(this),this.i=null,c=Fr(this,c),dx(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function fx(c,p,y){hx(c,p),0<y.length&&(c.i=null,c.g.set(Fr(c,p),E(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var A=p[y];const L=encodeURIComponent(String(A)),z=this.V(A);for(A=0;A<z.length;A++){var O=L;z[A]!==""&&(O+="="+encodeURIComponent(String(z[A]))),c.push(O)}}return this.i=c.join("&")};function Fr(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function lD(c,p){p&&!c.j&&(Fi(c),c.i=null,c.g.forEach(function(y,A){var O=A.toLowerCase();A!=O&&(hx(this,A),fx(this,O,y))},c)),c.j=p}function cD(c,p){const y=new Ao;if(o.Image){const A=new Image;A.onload=g(zi,y,"TestLoadImage: loaded",!0,p,A),A.onerror=g(zi,y,"TestLoadImage: error",!1,p,A),A.onabort=g(zi,y,"TestLoadImage: abort",!1,p,A),A.ontimeout=g(zi,y,"TestLoadImage: timeout",!1,p,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function uD(c,p){const y=new Ao,A=new AbortController,O=setTimeout(()=>{A.abort(),zi(y,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(L=>{clearTimeout(O),L.ok?zi(y,"TestPingServer: ok",!0,p):zi(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),zi(y,"TestPingServer: error",!1,p)})}function zi(c,p,y,A,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),A(y)}catch{}}function hD(){this.g=new X2}function dD(c,p,y){const A=y||"";try{ox(c,function(O,L){let z=O;u(O)&&(z=Af(O)),p.push(A+L+"="+encodeURIComponent(z))})}catch(O){throw p.push(A+"type="+encodeURIComponent("_badmap")),O}}function ru(c){this.l=c.Ub||null,this.j=c.eb||!1}w(ru,Cf),ru.prototype.g=function(){return new au(this.l,this.j)},ru.prototype.i=function(c){return function(){return c}}({});function au(c,p){yt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(au,yt),t=au.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ko(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||o).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mx(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function mx(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Do(this):ko(this),this.readyState==3&&mx(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Do(this))},t.Qa=function(c){this.g&&(this.response=c,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ko(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=p.next();return c.join(`\r
`)};function ko(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function px(c){let p="";return V(c,function(y,A){p+=A,p+=":",p+=y,p+=`\r
`}),p}function Vf(c,p,y){e:{for(A in y){var A=!1;break e}A=!0}A||(y=px(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Ee(c,p,y))}function Me(c){yt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Me,yt);var fD=/^https?$/i,mD=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nf.g(),this.v=this.o?qv(this.o):qv(Nf),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(L){gx(this,L);return}if(c=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var O in A)y.set(O,A[O]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const L of A.keys())y.set(L,A.get(L));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&c instanceof o.FormData,!(0<=Array.prototype.indexOf.call(mD,p,void 0))||A||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of y)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xx(this),this.u=!0,this.g.send(c),this.u=!1}catch(L){gx(this,L)}};function gx(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,yx(c),ou(c)}function yx(c){c.A||(c.A=!0,Rt(c,"complete"),Rt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Rt(this,"complete"),Rt(this,"abort"),ou(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vx(this):this.bb())},t.bb=function(){vx(this)};function vx(c){if(c.h&&typeof a<"u"&&(!c.v[1]||ci(c)!=4||c.Z()!=2)){if(c.u&&ci(c)==4)Bv(c.Ea,0,c);else if(Rt(c,"readystatechange"),ci(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var A;if(A=z===0){var O=String(c.D).match(lx)[1]||null;!O&&o.self&&o.self.location&&(O=o.self.location.protocol.slice(0,-1)),A=!fD.test(O?O.toLowerCase():"")}y=A}if(y)Rt(c,"complete"),Rt(c,"success");else{c.m=6;try{var L=2<ci(c)?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.Z()+"]",yx(c)}}finally{ou(c)}}}}function ou(c,p){if(c.g){xx(c);const y=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Rt(c,"ready");try{y.onreadystatechange=A}catch{}}}function xx(c){c.I&&(o.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ci(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),$2(p)}};function bx(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pD(c){const p={};c=(c.g&&2<=ci(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(x(c[A]))continue;var y=k(c[A]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const L=p[O]||[];p[O]=L,L.push(y)}S(p,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(c,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||p}function _x(c){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,c),this.cb=Po("retryDelaySeedMs",1e4,c),this.Wa=Po("forwardChannelMaxRetries",2,c),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new nx(c&&c.concurrentRequestLimit),this.Da=new hD,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_x.prototype,t.la=8,t.G=1,t.connect=function(c,p,y,A){It(0),this.W=c,this.H=p||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Nx(this,null,this.W),cu(this)};function Lf(c){if(wx(c),c.G==3){var p=c.U++,y=li(c.I);if(Ee(y,"SID",c.K),Ee(y,"RID",p),Ee(y,"TYPE","terminate"),jo(c,y),p=new Hi(c,c.j,p),p.L=2,p.v=su(li(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.v,y=!0),y||(p.g=Dx(p.j,null),p.g.ea(p.v)),p.F=Date.now(),tu(p)}Ix(c)}function lu(c){c.g&&(Bf(c),c.g.cancel(),c.g=null)}function wx(c){lu(c),c.u&&(o.clearTimeout(c.u),c.u=null),uu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&o.clearTimeout(c.s),c.s=null)}function cu(c){if(!ix(c.h)&&!c.s){c.s=!0;var p=c.Ga;$||_e(),X||($(),X=!0),he.add(p,c),c.B=0}}function gD(c,p){return sx(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=So(f(c.Ga,c,p),Rx(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Hi(this,this.j,c);let L=this.o;if(this.S&&(L?(L=_(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Ex(this,O,p),y=li(this.I),Ee(y,"RID",c),Ee(y,"CVER",22),this.D&&Ee(y,"X-HTTP-Session-Id",this.D),jo(this,y),L&&(this.O?p="headers="+encodeURIComponent(String(px(L)))+"&"+p:this.m&&Vf(y,this.m,L)),Mf(this.h,O),this.Ua&&Ee(y,"TYPE","init"),this.P?(Ee(y,"$req",p),Ee(y,"SID","null"),O.T=!0,kf(O,y,null)):kf(O,y,p),this.G=2}}else this.G==3&&(c?Tx(this,c):this.i.length==0||ix(this.h)||Tx(this))};function Tx(c,p){var y;p?y=p.l:y=c.U++;const A=li(c.I);Ee(A,"SID",c.K),Ee(A,"RID",y),Ee(A,"AID",c.T),jo(c,A),c.m&&c.o&&Vf(A,c.m,c.o),y=new Hi(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Ex(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Mf(c.h,y),kf(y,A,p)}function jo(c,p){c.H&&V(c.H,function(y,A){Ee(p,A,y)}),c.l&&ox({},function(y,A){Ee(p,A,y)})}function Ex(c,p,y){y=Math.min(c.i.length,y);var A=c.l?f(c.l.Na,c.l,c):null;e:{var O=c.i;let L=-1;for(;;){const z=["count="+y];L==-1?0<y?(L=O[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let xe=!0;for(let ct=0;ct<y;ct++){let ue=O[ct].g;const vt=O[ct].map;if(ue-=L,0>ue)L=Math.max(0,O[ct].g-100),xe=!1;else try{dD(vt,z,"req"+ue+"_")}catch{A&&A(vt)}}if(xe){A=z.join("&");break e}}}return c=c.i.splice(0,y),p.D=c,A}function Sx(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;$||_e(),X||($(),X=!0),he.add(p,c),c.v=0}}function Uf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=So(f(c.Fa,c),Rx(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ax(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=So(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),lu(this),Ax(this))};function Bf(c){c.A!=null&&(o.clearTimeout(c.A),c.A=null)}function Ax(c){c.g=new Hi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=li(c.qa);Ee(p,"RID","rpc"),Ee(p,"SID",c.K),Ee(p,"AID",c.T),Ee(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ee(p,"TO",c.ja),Ee(p,"TYPE","xmlhttp"),jo(c,p),c.m&&c.o&&Vf(p,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=su(li(p)),y.m=null,y.P=!0,Zv(y,c)}t.Za=function(){this.C!=null&&(this.C=null,lu(this),Uf(this),It(19))};function uu(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function Cx(c,p){var y=null;if(c.g==p){uu(c),Bf(c),c.g=null;var A=2}else if(Of(c.h,p))y=p.D,rx(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var O=c.B;A=Jc(),Rt(A,new Yv(A,y)),cu(c)}else Sx(c);else if(O=p.s,O==3||O==0&&0<p.X||!(A==1&&gD(c,p)||A==2&&Uf(c)))switch(y&&0<y.length&&(p=c.h,p.i=p.i.concat(y)),O){case 1:Ks(c,5);break;case 4:Ks(c,10);break;case 3:Ks(c,6);break;default:Ks(c,2)}}}function Rx(c,p){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*p}function Ks(c,p){if(c.j.info("Error code "+p),p==2){var y=f(c.fb,c),A=c.Xa;const O=!A;A=new Xs(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||nu(A,"https"),su(A),O?cD(A.toString(),y):uD(A.toString(),y)}else It(2);c.G=0,c.l&&c.l.sa(p),Ix(c),wx(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Ix(c){if(c.G=0,c.ka=[],c.l){const p=ax(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ka,p),T(c.ka,c.i),c.h.i.length=0,E(c.i),c.i.length=0),c.l.ra()}}function Nx(c,p,y){var A=y instanceof Xs?li(y):new Xs(y);if(A.g!="")p&&(A.g=p+"."+A.g),iu(A,A.s);else{var O=o.location;A=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;var L=new Xs(null);A&&nu(L,A),p&&(L.g=p),O&&iu(L,O),y&&(L.l=y),A=L}return y=c.D,p=c.ya,y&&p&&Ee(A,y,p),Ee(A,"VER",c.la),jo(c,A),A}function Dx(c,p,y){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Me(new ru({eb:y})):new Me(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function kx(){}t=kx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hu(){}hu.prototype.g=function(c,p){return new $t(c,p)};function $t(c,p){yt.call(this),this.g=new _x(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!x(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new zr(this)}w($t,yt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Lf(this.g)},$t.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Af(c),c=y);p.i.push(new Z2(p.Ya++,c)),p.G==3&&cu(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,Lf(this.g),delete this.g,$t.aa.N.call(this)};function Px(c){Rf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const y in p){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}w(Px,Rf);function jx(){If.call(this),this.status=1}w(jx,If);function zr(c){this.g=c}w(zr,kx),zr.prototype.ua=function(){Rt(this.g,"a")},zr.prototype.ta=function(c){Rt(this.g,new Px(c))},zr.prototype.sa=function(c){Rt(this.g,new jx)},zr.prototype.ra=function(){Rt(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,xR=function(){return new hu},vR=function(){return Jc()},yR=Gs,lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zc.NO_ERROR=0,Zc.TIMEOUT=8,Zc.HTTP_ERROR=6,sh=Zc,Wv.COMPLETE="complete",gR=Wv,Gv.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Qo=Gv,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,pR=Me}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const tw="@firebase/firestore",nw="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Hd("@firebase/firestore");function Zr(){return Sr.logLevel}function G(t,...e){if(Sr.logLevel<=ae.DEBUG){const n=e.map(v0);Sr.debug(`Firestore (${ho}): ${t}`,...n)}}function Oi(t,...e){if(Sr.logLevel<=ae.ERROR){const n=e.map(v0);Sr.error(`Firestore (${ho}): ${t}`,...n)}}function Cs(t,...e){if(Sr.logLevel<=ae.WARN){const n=e.map(v0);Sr.warn(`Firestore (${ho}): ${t}`,...n)}}function v0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,bR(t,i,n)}function bR(t,e,n){let i=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Oi(i),new Error(i)}function me(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||bR(e,s,i)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class b5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _5{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ci,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ci)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string",31837,{l:i}),new _R(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class w5{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T5{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new w5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class E5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ut(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);const i=r=>{r.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.m;return this.m=r.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new iw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new iw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=S5(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function ne(t,e){return t<e?-1:t>e?1:0}function cg(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=t.codePointAt(n),s=e.codePointAt(n);if(i!==s){if(i<128&&s<128)return ne(i,s);{const r=wR(),a=A5(r.encode(sw(t,n)),r.encode(sw(e,n)));return a!==0?a:ne(i,s)}}n+=i>65535?2:1}return ne(t.length,e.length)}function sw(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function A5(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ne(t[n],e[n]);return ne(t.length,e.length)}function qa(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="__name__";class Ln{constructor(e,n,i){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&W(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ln.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ln?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Ln.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return ne(e.length,n.length)}static compareSegments(e,n){const i=Ln.isNumericId(e),s=Ln.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Ln.extractNumericId(e).compare(Ln.extractNumericId(n)):cg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bs.fromString(e.substring(4,e.length-2))}}class we extends Ln{construct(e,n,i){return new we(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new q(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const C5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Ln{construct(e,n,i){return new mt(e,n,i)}static isValidIdentifier(e){return C5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rw}static keyField(){return new mt([rw])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else o==="`"?(a=!a,s++):o!=="."||a?(i+=o,s++):(r(),s++)}if(r(),a)throw new q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(we.fromString(e))}static fromName(e){return new K(we.fromString(e).popFirst(5))}static empty(){return new K(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t,e,n){if(!n)throw new q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R5(t,e,n,i){if(e===!0&&i===!0)throw new q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aw(t){if(!K.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ow(t){if(K.isDocumentKey(t))throw new q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ER(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kd(t);throw new q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mc(t,e){if(!ER(t))throw new q(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(s&&typeof a!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&a!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new q(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-62135596800,cw=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*cw);return new Se(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lw)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cw}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mc(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:We("string",Se._jsonSchemaVersion),seconds:We("number"),nanoseconds:We("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Se(0,0))}static max(){return new Z(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=-1;function I5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new Se(n+1,0):new Se(n,i));return new Rs(s,K.empty(),e)}function N5(t){return new Rs(t.readTime,t.key,Kl)}class Rs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Rs(Z.min(),K.empty(),Kl)}static max(){return new Rs(Z.max(),K.empty(),Kl)}}function D5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==k5)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,i)=>{n(e)})}static reject(e){return new B((n,i)=>{i(e)})}static waitFor(e){return new B((n,i)=>{let s=0,r=0,a=!1;e.forEach(o=>{++s,o.next(()=>{++r,a&&r===s&&n()},l=>i(l))}),a=!0,r===s&&n()})}static or(e){let n=B.resolve(!1);for(const i of e)n=n.next(s=>s?B.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new B((i,s)=>{const r=e.length,a=new Array(r);let o=0;for(let l=0;l<r;l++){const u=l;n(e[u]).next(d=>{a[u]=d,++o,o===r&&i(a)},d=>s(d))}})}static doWhile(e,n){return new B((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function j5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this._e(i),this.ae=i=>n.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Yd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=-1;function Wd(t){return t==null}function nd(t){return t===0&&1/t==-1/0}function O5(t){return typeof t=="number"&&Number.isInteger(t)&&!nd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="";function M5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=uw(e)),e=V5(t.get(n),e);return uw(e)}function V5(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case SR:n+="";break;default:n+=r}}return n}function uw(t){return t+SR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new Oe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Oe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??dt.RED,this.left=s??dt.EMPTY,this.right=r??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new dt(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return dt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dw(this.data.getIterator())}getIteratorFrom(e){return new dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new nt(mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new CR("Invalid base64 string: "+r):r}}(e);return new gt(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gt.EMPTY_BYTE_STRING=new gt("");const L5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(me(!!t,39018),typeof t=="string"){let e=0;const n=L5.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?gt.fromBase64String(t):gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="server_timestamp",IR="__type__",NR="__previous_value__",DR="__local_write_time__";function _0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[IR])===null||n===void 0?void 0:n.stringValue)===RR}function Qd(t){const e=t.mapValue.fields[NR];return _0(e)?Qd(e):e}function Yl(t){const e=Is(t.mapValue.fields[DR].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,i,s,r,a,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const id="(default)";class Wl{constructor(e,n){this.projectId=e,this.database=n||id}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR="__type__",B5="__max__",ku={mapValue:{}},PR="__vector__",sd="value";function Ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_0(t)?4:F5(t)?9007199254740991:H5(t)?10:11:W(28295,{value:t})}function ti(t,e){if(t===e)return!0;const n=Ds(t);if(n!==Ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Is(s.timestampValue),o=Is(r.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Ns(s.bytesValue).isEqual(Ns(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return ze(s.geoPointValue.latitude)===ze(r.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return ze(s.integerValue)===ze(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=ze(s.doubleValue),o=ze(r.doubleValue);return a===o?nd(a)===nd(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return qa(t.arrayValue.values||[],e.arrayValue.values||[],ti);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},o=r.mapValue.fields||{};if(hw(a)!==hw(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!ti(a[l],o[l])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function Ql(t,e){return(t.values||[]).find(n=>ti(n,e))!==void 0}function Ga(t,e){if(t===e)return 0;const n=Ds(t),i=Ds(e);if(n!==i)return ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(r,a){const o=ze(r.integerValue||r.doubleValue),l=ze(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return fw(t.timestampValue,e.timestampValue);case 4:return fw(Yl(t),Yl(e));case 5:return cg(t.stringValue,e.stringValue);case 6:return function(r,a){const o=Ns(r),l=Ns(a);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const o=r.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=ne(o[u],l[u]);if(d!==0)return d}return ne(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const o=ne(ze(r.latitude),ze(a.latitude));return o!==0?o:ne(ze(r.longitude),ze(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mw(t.arrayValue,e.arrayValue);case 10:return function(r,a){var o,l,u,d;const m=r.fields||{},f=a.fields||{},g=(o=m[sd])===null||o===void 0?void 0:o.arrayValue,w=(l=f[sd])===null||l===void 0?void 0:l.arrayValue,E=ne(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return E!==0?E:mw(g,w)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===ku.mapValue&&a===ku.mapValue)return 0;if(r===ku.mapValue)return 1;if(a===ku.mapValue)return-1;const o=r.fields||{},l=Object.keys(o),u=a.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let m=0;m<l.length&&m<d.length;++m){const f=cg(l[m],d[m]);if(f!==0)return f;const g=Ga(o[l[m]],u[d[m]]);if(g!==0)return g}return ne(l.length,d.length)}(t.mapValue,e.mapValue);default:throw W(23264,{le:n})}}function fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Is(t),i=Is(e),s=ne(n.seconds,i.seconds);return s!==0?s:ne(n.nanos,i.nanos)}function mw(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Ga(n[s],i[s]);if(r)return r}return ne(n.length,i.length)}function $a(t){return ug(t)}function ug(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Is(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=ug(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${ug(n.fields[a])}`;return s+"}"}(t.mapValue):W(61005,{value:t})}function rh(t){switch(Ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(t);return e?16+rh(e):16;case 5:return 2*t.stringValue.length;case 6:return Ns(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+rh(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Fs(i.fields,(r,a)=>{s+=r.length+rh(a)}),s}(t.mapValue);default:throw W(13486,{value:t})}}function pw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hg(t){return!!t&&"integerValue"in t}function w0(t){return!!t&&"arrayValue"in t}function gw(t){return!!t&&"nullValue"in t}function yw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function H5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[kR])===null||n===void 0?void 0:n.stringValue)===PR}function bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=bl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function F5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===B5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(n)}setAll(e){let n=mt.emptyPath(),i={},s=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=o.popLast()}a?i[o.lastSegment()]=bl(a):s.push(o.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Fs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Bt(bl(this.value))}}function jR(t){const e=[];return Fs(t.fields,(n,i)=>{const s=new mt([n]);if(ah(i)){const r=jR(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,i,s,r,a,o){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=o}static newInvalidDocument(e){return new wt(e,0,Z.min(),Z.min(),Z.min(),Bt.empty(),0)}static newFoundDocument(e,n,i,s){return new wt(e,1,n,Z.min(),i,s,0)}static newNoDocument(e,n){return new wt(e,2,n,Z.min(),Z.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,Z.min(),Z.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n){this.position=e,this.inclusive=n}}function vw(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=Ga(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function xw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function z5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{}class Ye extends OR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new G5(e,n,i):n==="array-contains"?new K5(e,i):n==="in"?new Y5(e,i):n==="not-in"?new W5(e,i):n==="array-contains-any"?new Q5(e,i):new Ye(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new $5(e,i):new X5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ga(n,this.value)):n!==null&&Ds(this.value)===Ds(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends OR{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Nn(e,n)}matches(e){return MR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function MR(t){return t.op==="and"}function VR(t){return q5(t)&&MR(t)}function q5(t){for(const e of t.filters)if(e instanceof Nn)return!1;return!0}function dg(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(VR(t))return t.filters.map(e=>dg(e)).join(",");{const e=t.filters.map(n=>dg(n)).join(",");return`${t.op}(${e})`}}function LR(t,e){return t instanceof Ye?function(i,s){return s instanceof Ye&&i.op===s.op&&i.field.isEqual(s.field)&&ti(i.value,s.value)}(t,e):t instanceof Nn?function(i,s){return s instanceof Nn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,o)=>r&&LR(a,s.filters[o]),!0):!1}(t,e):void W(19439)}function UR(t){return t instanceof Ye?function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`}(t):t instanceof Nn?function(n){return n.op.toString()+" {"+n.getFilters().map(UR).join(" ,")+"}"}(t):"Filter"}class G5 extends Ye{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class $5 extends Ye{constructor(e,n){super(e,"in",n),this.keys=BR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class X5 extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=BR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class K5 extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return w0(n)&&Ql(n.arrayValue,this.value)}}class Y5 extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class W5 extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class Q5 extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!w0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ql(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e,n=null,i=[],s=[],r=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=o,this.Pe=null}}function bw(t,e=null,n=[],i=[],s=null,r=null,a=null){return new J5(t,e,n,i,s,r,a)}function T0(t){const e=ee(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>dg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>$a(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>$a(i)).join(",")),e.Pe=n}return e.Pe}function E0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xw(t.startAt,e.startAt)&&xw(t.endAt,e.endAt)}function fg(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,i=[],s=[],r=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=o,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Z5(t,e,n,i,s,r,a,o){return new po(t,e,n,i,s,r,a,o)}function S0(t){return new po(t)}function _w(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HR(t){return t.collectionGroup!==null}function _l(t){const e=ee(t);if(e.Te===null){e.Te=[];const n=new Set;for(const r of e.explicitOrderBy)e.Te.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new nt(mt.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Te.push(new Jl(r,i))}),n.has(mt.keyField().canonicalString())||e.Te.push(new Jl(mt.keyField(),i))}return e.Te}function $n(t){const e=ee(t);return e.Ie||(e.Ie=e6(e,_l(t))),e.Ie}function e6(t,e){if(t.limitType==="F")return bw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Jl(s.field,r)});const n=t.endAt?new rd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new rd(t.startAt.position,t.startAt.inclusive):null;return bw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function mg(t,e){const n=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pg(t,e,n){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jd(t,e){return E0($n(t),$n(e))&&t.limitType===e.limitType}function FR(t){return`${T0($n(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>UR(s)).join(", ")}]`),Wd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>$a(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>$a(s)).join(",")),`Target(${i})`}($n(t))}; limitType=${t.limitType})`}function Zd(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):K.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of _l(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,o,l){const u=vw(a,o,l);return a.inclusive?u<=0:u<0}(i.startAt,_l(i),s)||i.endAt&&!function(a,o,l){const u=vw(a,o,l);return a.inclusive?u>=0:u>0}(i.endAt,_l(i),s))}(t,e)}function t6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zR(t){return(e,n)=>{let i=!1;for(const s of _l(t)){const r=n6(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function n6(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(r,a,o){const l=a.data.field(r),u=o.data.field(r);return l!==null&&u!==null?Ga(l,u):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return AR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new Oe(K.comparator);function Mi(){return i6}const qR=new Oe(K.comparator);function Jo(...t){let e=qR;for(const n of t)e=e.insert(n.key,n);return e}function GR(t){let e=qR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function sr(){return wl()}function $R(){return wl()}function wl(){return new Or(t=>t.toString(),(t,e)=>t.isEqual(e))}const s6=new Oe(K.comparator),r6=new nt(K.comparator);function oe(...t){let e=r6;for(const n of t)e=e.add(n);return e}const a6=new nt(ne);function o6(){return a6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nd(e)?"-0":e}}function XR(t){return{integerValue:""+t}}function l6(t,e){return O5(e)?XR(e):A0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(){this._=void 0}}function c6(t,e,n){return t instanceof Zl?function(s,r){const a={fields:{[IR]:{stringValue:RR},[DR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&_0(r)&&(r=Qd(r)),r&&(a.fields[NR]=r),{mapValue:a}}(n,e):t instanceof ec?YR(t,e):t instanceof tc?WR(t,e):function(s,r){const a=KR(s,r),o=ww(a)+ww(s.Ee);return hg(a)&&hg(s.Ee)?XR(o):A0(s.serializer,o)}(t,e)}function u6(t,e,n){return t instanceof ec?YR(t,e):t instanceof tc?WR(t,e):n}function KR(t,e){return t instanceof ad?function(i){return hg(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Zl extends ef{}class ec extends ef{constructor(e){super(),this.elements=e}}function YR(t,e){const n=QR(e);for(const i of t.elements)n.some(s=>ti(s,i))||n.push(i);return{arrayValue:{values:n}}}class tc extends ef{constructor(e){super(),this.elements=e}}function WR(t,e){let n=QR(e);for(const i of t.elements)n=n.filter(s=>!ti(s,i));return{arrayValue:{values:n}}}class ad extends ef{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function ww(t){return ze(t.integerValue||t.doubleValue)}function QR(t){return w0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n){this.field=e,this.transform=n}}function d6(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof ec&&s instanceof ec||i instanceof tc&&s instanceof tc?qa(i.elements,s.elements,ti):i instanceof ad&&s instanceof ad?ti(i.Ee,s.Ee):i instanceof Zl&&s instanceof Zl}(t.transform,e.transform)}class f6{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tf{}function JR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eI(t.key,An.none()):new Vc(t.key,t.data,An.none());{const n=t.data,i=Bt.empty();let s=new nt(mt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new zs(t.key,i,new Qt(s.toArray()),An.none())}}function m6(t,e,n){t instanceof Vc?function(s,r,a){const o=s.value.clone(),l=Ew(s.fieldTransforms,r,a.transformResults);o.setAll(l),r.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof zs?function(s,r,a){if(!oh(s.precondition,r))return void r.convertToUnknownDocument(a.version);const o=Ew(s.fieldTransforms,r,a.transformResults),l=r.data;l.setAll(ZR(s)),l.setAll(o),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Tl(t,e,n,i){return t instanceof Vc?function(r,a,o,l){if(!oh(r.precondition,a))return o;const u=r.value.clone(),d=Sw(r.fieldTransforms,l,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof zs?function(r,a,o,l){if(!oh(r.precondition,a))return o;const u=Sw(r.fieldTransforms,l,a),d=a.data;return d.setAll(ZR(r)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,a,o){return oh(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function p6(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=KR(i.transform,s||null);r!=null&&(n===null&&(n=Bt.empty()),n.set(i.field,r))}return n||null}function Tw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&qa(i,s,(r,a)=>d6(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vc extends tf{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zs extends tf{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ZR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ew(t,e,n){const i=new Map;me(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,o=e.data.field(r.field);i.set(r.field,u6(a,o,n[s]))}return i}function Sw(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,c6(r,a,e))}return i}class eI extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g6 extends tf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&m6(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Tl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=$R();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let o=this.applyToLocalView(a,r.mutatedFields);o=n.has(s.key)?null:o;const l=JR(a,o);l!==null&&i.set(s.key,l),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(n,i)=>Tw(n,i))&&qa(this.baseMutations,e.baseMutations,(n,i)=>Tw(n,i))}}class C0{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){me(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=function(){return s6}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new C0(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,le;function b6(t){switch(t){case U.OK:return W(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function tI(t){if(t===void 0)return Oi("GRPC error has no .code"),U.UNKNOWN;switch(t){case $e.OK:return U.OK;case $e.CANCELLED:return U.CANCELLED;case $e.UNKNOWN:return U.UNKNOWN;case $e.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case $e.INTERNAL:return U.INTERNAL;case $e.UNAVAILABLE:return U.UNAVAILABLE;case $e.UNAUTHENTICATED:return U.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case $e.NOT_FOUND:return U.NOT_FOUND;case $e.ALREADY_EXISTS:return U.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return U.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case $e.ABORTED:return U.ABORTED;case $e.OUT_OF_RANGE:return U.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return U.UNIMPLEMENTED;case $e.DATA_LOSS:return U.DATA_LOSS;default:return W(39323,{code:t})}}(le=$e||($e={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6=new bs([4294967295,4294967295],0);function Aw(t){const e=wR().encode(t),n=new mR;return n.update(e),new Uint8Array(n.digest())}function Cw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new bs([n,i],0),new bs([s,r],0)]}class R0{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(i<0)throw new Zo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=bs.fromNumber(this.fe)}pe(e,n,i){let s=e.add(n.multiply(bs.fromNumber(i)));return s.compare(_6)===1&&(s=new bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Aw(e),[i,s]=Cw(n);for(let r=0;r<this.hashCount;r++){const a=this.pe(i,s,r);if(!this.ye(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new R0(r,s,n);return i.forEach(o=>a.insert(o)),a}insert(e){if(this.fe===0)return;const n=Aw(e),[i,s]=Cw(n);for(let r=0;r<this.hashCount;r++){const a=this.pe(i,s,r);this.we(a)}}we(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new nf(Z.min(),s,new Oe(ne),Mi(),oe())}}class Lc{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Lc(i,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,i,s){this.Se=e,this.removedTargetIds=n,this.key=i,this.be=s}}class nI{constructor(e,n){this.targetId=e,this.De=n}}class iI{constructor(e,n,i=gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Rw{constructor(){this.ve=0,this.Ce=Iw(),this.Fe=gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=oe(),n=oe(),i=oe();return this.Ce.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:W(38017,{changeType:r})}}),new Lc(this.Fe,this.Me,e,n,i)}ke(){this.xe=!1,this.Ce=Iw()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class w6{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mi(),this.je=Pu(),this.Je=Pu(),this.He=new Oe(ne)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const i=this.tt(n);switch(e.state){case 0:this.nt(n)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),i.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((i,s)=>{this.nt(s)&&n(s)})}it(e){const n=e.targetId,i=e.De.count,s=this.st(n);if(s){const r=s.target;if(fg(r))if(i===0){const a=new K(r.path);this.Xe(n,a,wt.newNoDocument(a,Z.min()))}else me(i===1,20013,{expectedCount:i});else{const a=this.ot(n);if(a!==i){const o=this._t(e),l=o?this.ut(o,e,a):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,o;try{a=Ns(i).toUint8Array()}catch(l){if(l instanceof CR)return Cs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new R0(a,s,r)}catch(l){return Cs(l instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.fe===0?null:o}ut(e,n,i){return n.De.count===i-this.ht(e,n.targetId)?0:2}ht(e,n){const i=this.We.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.We.lt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(o)||(this.Xe(n,r,null),s++)}),s}Pt(e){const n=new Map;this.Ge.forEach((r,a)=>{const o=this.st(a);if(o){if(r.current&&fg(o.target)){const l=new K(o.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,wt.newNoDocument(l,e))}r.Ne&&(n.set(a,r.Le()),r.ke())}});let i=oe();this.Je.forEach((r,a)=>{let o=!0;a.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(i=i.add(r))}),this.ze.forEach((r,a)=>a.setReadTime(e));const s=new nf(e,n,this.He,this.ze,i);return this.ze=Mi(),this.je=Pu(),this.Je=Pu(),this.He=new Oe(ne),s}Ze(e,n){if(!this.nt(e))return;const i=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,i),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),i&&(this.ze=this.ze.insert(n,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Rw,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new nt(ne),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new nt(ne),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Rw),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Pu(){return new Oe(K.comparator)}function Iw(){return new Oe(K.comparator)}const T6={asc:"ASCENDING",desc:"DESCENDING"},E6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S6={and:"AND",or:"OR"};class A6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gg(t,e){return t.useProto3Json||Wd(e)?e:{value:e}}function od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C6(t,e){return od(t,e.toTimestamp())}function Xn(t){return me(!!t,49232),Z.fromTimestamp(function(n){const i=Is(n);return new Se(i.seconds,i.nanos)}(t))}function I0(t,e){return yg(t,e).canonicalString()}function yg(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rI(t){const e=we.fromString(t);return me(uI(e),10190,{key:e.toString()}),e}function vg(t,e){return I0(t.databaseId,e.path)}function Om(t,e){const n=rI(e);if(n.get(1)!==t.databaseId.projectId)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(oI(n))}function aI(t,e){return I0(t.databaseId,e)}function R6(t){const e=rI(t);return e.length===4?we.emptyPath():oI(e)}function xg(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oI(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Nw(t,e,n){return{name:vg(t,e),fields:n.value.mapValue.fields}}function I6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:W(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(u,d){return u.useProto3Json?(me(d===void 0||typeof d=="string",58123),gt.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),gt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?U.UNKNOWN:tI(u.code);return new q(d,u.message||"")}(a);n=new iI(i,s,r,o||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Om(t,i.document.name),r=Xn(i.document.updateTime),a=i.document.createTime?Xn(i.document.createTime):Z.min(),o=new Bt({mapValue:{fields:i.document.fields}}),l=wt.newFoundDocument(s,r,a,o),u=i.targetIds||[],d=i.removedTargetIds||[];n=new lh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Om(t,i.document),r=i.readTime?Xn(i.readTime):Z.min(),a=wt.newNoDocument(s,r),o=i.removedTargetIds||[];n=new lh([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Om(t,i.document),r=i.removedTargetIds||[];n=new lh([],r,s,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new x6(s,r),o=i.targetId;n=new nI(o,a)}}return n}function N6(t,e){let n;if(e instanceof Vc)n={update:Nw(t,e.key,e.value)};else if(e instanceof eI)n={delete:vg(t,e.key)};else if(e instanceof zs)n={update:Nw(t,e.key,e.data),updateMask:U6(e.fieldMask)};else{if(!(e instanceof g6))return W(16599,{Rt:e.type});n={verify:vg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const o=a.transform;if(o instanceof Zl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof ec)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof tc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ad)return{fieldPath:a.field.canonicalString(),increment:o.Ee};throw W(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:C6(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:W(27497)}(t,e.precondition)),n}function D6(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>function(s,r){let a=s.updateTime?Xn(s.updateTime):Xn(r);return a.isEqual(Z.min())&&(a=Xn(r)),new f6(a,s.transformResults||[])}(n,e))):[]}function k6(t,e){return{documents:[aI(t,e.path)]}}function P6(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=aI(t,s);const r=function(u){if(u.length!==0)return cI(Nn.create(u,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:ta(f.field),direction:M6(f.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=gg(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:s}}function j6(t){let e=R6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){me(i===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];n.where&&(r=function(m){const f=lI(m);return f instanceof Nn&&VR(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(f=>function(w){return new Jl(na(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let o=null;n.limit&&(o=function(m){let f;return f=typeof m=="object"?m.value:m,Wd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(m){const f=!!m.before,g=m.values||[];return new rd(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const f=!m.before,g=m.values||[];return new rd(g,f)}(n.endAt)),Z5(e,s,a,r,o,"F",l,u)}function O6(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=na(n.unaryFilter.field);return Ye.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=na(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=na(n.unaryFilter.field);return Ye.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=na(n.unaryFilter.field);return Ye.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ye.create(na(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Nn.create(n.compositeFilter.filters.map(i=>lI(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function M6(t){return T6[t]}function V6(t){return E6[t]}function L6(t){return S6[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return mt.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof Ye?function(n){if(n.op==="=="){if(yw(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(gw(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yw(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(gw(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:V6(n.op),value:n.value}}}(t):t instanceof Nn?function(n){const i=n.getFilters().map(s=>cI(s));return i.length===1?i[0]:{compositeFilter:{op:L6(n.op),filters:i}}}(t):W(54877,{filter:t})}function U6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,i,s,r=Z.min(),a=Z.min(),o=gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.gt=e}}function H6(t){const e=j6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(){this.Dn=new z6}addToCollectionParentIndex(e,n){return this.Dn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Rs.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class z6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new nt(we.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new nt(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hI=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(hI,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Xa(0)}static ur(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="LruGarbageCollector",q6=1048576;function Pw([t,e],[n,i]){const s=ne(t,n);return s===0?ne(e,i):s}class G6{constructor(e){this.Tr=e,this.buffer=new nt(Pw),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Pw(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){G(kw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?G(kw,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Rr(3e5)})}}class X6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Yd.ue);const i=new G6(n);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Dw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dw):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let i,s,r,a,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(i=m,o=Date.now(),this.removeTargets(e,i,n))).next(m=>(r=m,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(u=Date.now(),Zr()<=ae.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(o-a)+`ms
	Removed ${r} targets in `+(l-o)+`ms
	Removed ${m} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function K6(t,e){return new X6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.changes=new Or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Tl(i.mutation,s,Qt.empty(),Se.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=oe()){const s=sr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=Jo();return r.forEach((o,l)=>{a=a.insert(o,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,oe()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,i,s){let r=Mi();const a=wl(),o=function(){return wl()}();return n.forEach((l,u)=>{const d=i.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof zs)?r=r.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),Tl(d.mutation,u,d.mutation.getFieldMask(),Se.now())):a.set(u.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var m;return o.set(u,new W6(d,(m=a.get(u))!==null&&m!==void 0?m:null))}),o))}recalculateAndSaveOverlays(e,n){const i=wl();let s=new Oe((a,o)=>a-o),r=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=i.get(l)||Qt.empty();d=o.applyToLocalView(u,d),i.set(l,d);const m=(s.get(o.batchId)||oe()).add(l);s=s.insert(o.batchId,m)})}).next(()=>{const a=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,m=$R();d.forEach(f=>{if(!r.has(f)){const g=JR(n.get(f),i.get(f));g!==null&&m.set(f,g),r=r.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):B.resolve(sr());let o=Kl,l=r;return a.next(u=>B.forEach(u,(d,m)=>(o<m.largestBatchId&&(o=m.largestBatchId),r.get(d)?B.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,l,u,oe())).next(d=>({batchId:o,changes:GR(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let s=Jo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=Jo();return this.indexManager.getCollectionParents(e,r).next(o=>B.forEach(o,l=>{const u=function(m,f){return new po(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,i,s).next(d=>{d.forEach((m,f)=>{a=a.insert(m,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((l,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,wt.newInvalidDocument(d)))});let o=Jo();return a.forEach((l,u)=>{const d=r.get(l);d!==void 0&&Tl(d.mutation,u,Qt.empty(),Se.now()),Zd(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return B.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xn(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(s){return{name:s.name,query:H6(s.bundledQuery),readTime:Xn(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.overlays=new Oe(K.comparator),this.kr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const i=sr();return B.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.wt(e,n,r)}),B.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.kr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){const s=sr(),r=n.length+1,a=new K(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Oe((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=r.get(u.largestBatchId);d===null&&(d=sr(),r=r.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=sr(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return B.resolve(o)}wt(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new v6(n,i));let r=this.kr.get(n);r===void 0&&(r=oe(),this.kr.set(n,r)),this.kr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.qr=new nt(st.Qr),this.$r=new nt(st.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const i=new st(e,n);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Wr(new st(e,n))}Gr(e,n){e.forEach(i=>this.removeReference(i,n))}zr(e){const n=new K(new we([])),i=new st(n,e),s=new st(n,e+1),r=[];return this.$r.forEachInRange([i,s],a=>{this.Wr(a),r.push(a.key)}),r}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new K(new we([])),i=new st(n,e),s=new st(n,e+1);let r=oe();return this.$r.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new st(e,0),i=this.qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class st{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return K.comparator(e.key,n.key)||ne(e.Hr,n.Hr)}static Ur(e,n){return ne(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tU{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new nt(st.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y6(r,n,i,s);this.mutationQueue.push(a);for(const o of s)this.Yr=this.Yr.add(new st(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Xr(i),r=s<0?0:s;return B.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?b0:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([i,s],a=>{const o=this.Zr(a.Hr);r.push(o)}),B.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new nt(ne);return n.forEach(s=>{const r=new st(s,0),a=new st(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([r,a],o=>{i=i.add(o.Hr)})}),B.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;K.isDocumentKey(r)||(r=r.child(""));const a=new st(new K(r),0);let o=new nt(ne);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Hr)),!0)},a),B.resolve(this.ei(o))}ei(e){const n=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return B.forEach(n.mutations,s=>{const r=new st(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,n){const i=new st(n,0),s=this.Yr.firstAfterOrEqual(i);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.ni=e,this.docs=function(){return new Oe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let i=Mi();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():wt.newInvalidDocument(s))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Mi();const a=n.path,o=new K(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||D5(N5(d),i)<=0||(s.has(d.key)||Zd(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return B.resolve(r)}getAllFromCollectionGroup(e,n,i,s){W(9500)}ri(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new iU(this)}getSize(e){return B.resolve(this.size)}}class iU extends Y6{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.persistence=e,this.ii=new Or(n=>T0(n),E0),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.si=0,this.oi=new N0,this.targetCount=0,this._i=Xa.ar()}forEachTarget(e,n){return this.ii.forEach((i,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.si&&(this.si=n),B.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Xa(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.hr(n),B.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.ii.forEach((a,o)=>{o.sequenceNumber<=n&&i.get(o.targetId)===null&&(this.ii.delete(a),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),B.waitFor(r).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const i=this.ii.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.oi.Kr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.oi.Gr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const i=this.oi.Jr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.ai={},this.overlays={},this.ui=new Yd(0),this.ci=!1,this.ci=!0,this.li=new eU,this.referenceDelegate=e(this),this.hi=new sU(this),this.indexManager=new F6,this.remoteDocumentCache=function(s){return new nU(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new B6(n),this.Ti=new J6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ai[e.toKey()];return i||(i=new tU(n,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,i){G("MemoryPersistence","Starting transaction:",e);const s=new rU(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ei(e,n){return B.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,n)))}}class rU extends P5{constructor(e){super(),this.currentSequenceNumber=e}}class D0{constructor(e){this.persistence=e,this.Ai=new N0,this.Ri=null}static Vi(e){return new D0(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,n,i){return this.Ai.addReference(i,n),this.mi.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.Ai.removeReference(i,n),this.mi.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.mi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,i=>{const s=K.fromPath(i);return this.fi(e,s).next(r=>{r||n.removeEntry(s,Z.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(i=>{i?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return B.or([()=>B.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ld{constructor(e,n){this.persistence=e,this.gi=new Or(i=>M5(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=K6(this,n)}static Vi(e,n){return new ld(e,n)}Ii(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}yr(e){let n=0;return this.gr(e,i=>{n++}).next(()=>n)}gr(e,n){return B.forEach(this.gi,(i,s)=>this.Sr(e,i,s).next(r=>r?B.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,n).next(o=>{o||(i++,r.removeEntry(a,Z.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),B.resolve()}removeReference(e,n,i){return this.gi.set(i,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rh(e.data.value)),n}Sr(e,n,i){return B.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return B.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Is=i,this.ds=s}static Es(e,n){let i=oe(),s=oe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new k0(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return gM()?8:j5(Ct())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ps(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ys(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new aU;return this.ws(e,n,a).next(o=>{if(r.result=o,this.Rs)return this.Ss(e,n,a,o.size)})}).next(()=>r.result)}Ss(e,n,i,s){return i.documentReadCount<this.Vs?(Zr()<=ae.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Zr()<=ae.DEBUG&&G("QueryEngine","Query:",ea(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Zr()<=ae.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):B.resolve())}ps(e,n){if(_w(n))return B.resolve(null);let i=$n(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pg(n,null,"F"),i=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=oe(...r);return this.gs.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.bs(n,o);return this.Ds(n,u,a,l.readTime)?this.ps(e,pg(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,i,s){return _w(n)||s.isEqual(Z.min())?B.resolve(null):this.gs.getDocuments(e,i).next(r=>{const a=this.bs(n,r);return this.Ds(n,a,i,s)?B.resolve(null):(Zr()<=ae.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ea(n)),this.vs(e,a,n,I5(s,Kl)).next(o=>o))})}bs(e,n){let i=new nt(zR(e));return n.forEach((s,r)=>{Zd(e,r)&&(i=i.add(r))}),i}Ds(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}ws(e,n,i){return Zr()<=ae.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ea(n)),this.gs.getDocumentsMatchingQuery(e,n,Rs.min(),i)}vs(e,n,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="LocalStore",lU=3e8;class cU{constructor(e,n,i,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Oe(ne),this.Ms=new Or(r=>T0(r),E0),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q6(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function uU(t,e,n,i){return new cU(t,e,n,i)}async function fI(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Ns(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],o=[];let l=oe();for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of r){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(i,l).next(u=>({Bs:u,removedBatchIds:a,addedBatchIds:o}))})})}function hU(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const m=u.batch,f=m.keys();let g=B.resolve();return f.forEach(w=>{g=g.next(()=>d.getEntry(l,w)).next(E=>{const T=u.docVersions.get(w);me(T!==null,48541),E.version.compareTo(T)<0&&(m.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),d.addEntry(E)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,m))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let l=oe();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function mI(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function dU(t,e){const n=ee(t),i=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const o=[];e.targetChanges.forEach((d,m)=>{const f=s.get(m);if(!f)return;o.push(n.hi.removeMatchingKeys(r,d.removedDocuments,m).next(()=>n.hi.addMatchingKeys(r,d.addedDocuments,m)));let g=f.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(gt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),s=s.insert(m,g),function(E,T,v){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=lU?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,d)&&o.push(n.hi.updateTargetData(r,g))});let l=Mi(),u=oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),o.push(fU(r,a,e.documentUpdates).next(d=>{l=d.Ls,u=d.ks})),!i.isEqual(Z.min())){const d=n.hi.getLastRemoteSnapshotVersion(r).next(m=>n.hi.setTargetsMetadata(r,r.currentSequenceNumber,i));o.push(d)}return B.waitFor(o).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,u)).next(()=>l)}).then(r=>(n.Fs=s,r))}function fU(t,e,n){let i=oe(),s=oe();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=Mi();return n.forEach((o,l)=>{const u=r.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):G(P0,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{Ls:a,ks:s}})}function mU(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=b0),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function pU(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.hi.getTargetData(i,e).next(r=>r?(s=r,B.resolve(s)):n.hi.allocateTargetId(i).next(a=>(s=new cs(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(i.targetId,i),n.Ms.set(e,i.targetId)),i})}async function bg(t,e,n){const i=ee(t),s=i.Fs.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!mo(a))throw a;G(P0,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function jw(t,e,n){const i=ee(t);let s=Z.min(),r=oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(l,u,d){const m=ee(l),f=m.Ms.get(d);return f!==void 0?B.resolve(m.Fs.get(f)):m.hi.getTargetData(u,d)}(i,a,$n(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(a,o.targetId).next(l=>{r=l})}).next(()=>i.Cs.getDocumentsMatchingQuery(a,e,n?s:Z.min(),n?r:oe())).next(o=>(gU(i,t6(e),o),{documents:o,qs:r})))}function gU(t,e,n){let i=t.xs.get(e)||Z.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.xs.set(e,i)}class Ow{constructor(){this.activeTargetIds=o6()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yU{constructor(){this.Fo=new Ow,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,i){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ow,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="ConnectivityMonitor";class Vw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){G(Mw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){G(Mw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=null;function _g(){return ju===null?ju=function(){return 268435456+Math.round(2147483648*Math.random())}():ju++,"0x"+ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",xU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bU{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===id?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,n,i,s,r){const a=_g(),o=this.Go(e,n.toUriEncodedString());G(Mm,`Sending RPC '${e}' ${a}:`,o,i);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,s,r);const{host:u}=new URL(o),d=lo(u);return this.jo(e,o,l,i,d).then(m=>(G(Mm,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Cs(Mm,`RPC '${e}' ${a} failed with error: `,m,"url: ",o,"request:",i),m})}Jo(e,n,i,s,r,a){return this.Wo(e,n,i,s,r)}zo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}Go(e,n){const i=xU[e];return`${this.$o}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class wU extends bU{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,i,s,r){const a=_g();return new Promise((o,l)=>{const u=new pR;u.setWithCredentials(!0),u.listenOnce(gR.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sh.NO_ERROR:const m=u.getResponseJson();G(bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),o(m);break;case sh.TIMEOUT:G(bt,`RPC '${e}' ${a} timed out`),l(new q(U.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:const f=u.getStatus();if(G(bt,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const E=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(x)>=0?x:U.UNKNOWN}(w.status);l(new q(E,w.message))}else l(new q(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(U.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:a,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{G(bt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);G(bt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,i,15)})}P_(e,n,i){const s=_g(),r=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xR(),o=vR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const d=r.join("");G(bt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const m=a.createWebChannel(d,l);this.T_(m);let f=!1,g=!1;const w=new _U({Ho:T=>{g?G(bt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(f||(G(bt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),f=!0),G(bt,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},Yo:()=>m.close()}),E=(T,v,x)=>{T.listen(v,b=>{try{x(b)}catch(R){setTimeout(()=>{throw R},0)}})};return E(m,Qo.EventType.OPEN,()=>{g||(G(bt,`RPC '${e}' stream ${s} transport opened.`),w.s_())}),E(m,Qo.EventType.CLOSE,()=>{g||(g=!0,G(bt,`RPC '${e}' stream ${s} transport closed`),w.__(),this.I_(m))}),E(m,Qo.EventType.ERROR,T=>{g||(g=!0,Cs(bt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),w.__(new q(U.UNAVAILABLE,"The operation could not be completed")))}),E(m,Qo.EventType.MESSAGE,T=>{var v;if(!g){const x=T.data[0];me(!!x,16349);const b=x,R=(b==null?void 0:b.error)||((v=b[0])===null||v===void 0?void 0:v.error);if(R){G(bt,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let V=function(C){const I=$e[C];if(I!==void 0)return tI(I)}(j),S=R.message;V===void 0&&(V=U.INTERNAL,S="Unknown error status: "+j+" with message "+R.message),g=!0,w.__(new q(V,S)),m.close()}else G(bt,`RPC '${e}' stream ${s} received:`,x),w.a_(x)}}),E(o,yR.STAT_EVENT,T=>{T.stat===lg.PROXY?G(bt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===lg.NOPROXY&&G(bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Vm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t){return new A6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=s,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-i);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="PersistentStream";class gI{constructor(e,n,i,s,r,a,o,l){this.Fi=e,this.w_=i,this.S_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new pI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Oi(n.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===n&&this.W_(i,s)},i=>{e(()=>{const s=new q(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(e,n){const i=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return G(Lw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(G(Lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TU extends gI{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=I6(this.serializer,e),i=function(r){if(!("targetChange"in r))return Z.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?Xn(a.readTime):Z.min()}(e);return this.listener.J_(n,i)}H_(e){const n={};n.database=xg(this.serializer),n.addTarget=function(r,a){let o;const l=a.target;if(o=fg(l)?{documents:k6(r,l)}:{query:P6(r,l).Vt},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=sI(r,a.resumeToken);const u=gg(r,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Z.min())>0){o.readTime=od(r,a.snapshotVersion.toTimestamp());const u=gg(r,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const i=O6(this.serializer,e);i&&(n.labels=i),this.k_(n)}Y_(e){const n={};n.database=xg(this.serializer),n.removeTarget=e,this.k_(n)}}class EU extends gI{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=D6(e.writeResults,e.commitTime),i=Xn(e.commitTime);return this.listener.ta(i,n)}na(){const e={};e.database=xg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>N6(this.serializer,i))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{}class AU extends SU{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Wo(e,yg(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new q(U.UNKNOWN,r.toString())})}Jo(e,n,i,s,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Jo(e,yg(n,i),s,a,o,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new q(U.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class CU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Oi(n),this._a=!1):G("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="RemoteStore";class RU{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(a=>{i.enqueueAndForget(async()=>{Mr(this)&&(G(Ar,"Restarting streams for network reachability change."),await async function(l){const u=ee(l);u.Ia.add(4),await Uc(u),u.Aa.set("Unknown"),u.Ia.delete(4),await rf(u)}(this))})}),this.Aa=new CU(i,s)}}async function rf(t){if(Mr(t))for(const e of t.da)await e(!0)}async function Uc(t){for(const e of t.da)await e(!1)}function yI(t,e){const n=ee(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),V0(n)?M0(n):go(n).x_()&&O0(n,e))}function j0(t,e){const n=ee(t),i=go(n);n.Ta.delete(e),i.x_()&&vI(n,e),n.Ta.size===0&&(i.x_()?i.B_():Mr(n)&&n.Aa.set("Unknown"))}function O0(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).H_(e)}function vI(t,e){t.Ra.$e(e),go(t).Y_(e)}function M0(t){t.Ra=new w6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),go(t).start(),t.Aa.aa()}function V0(t){return Mr(t)&&!go(t).M_()&&t.Ta.size>0}function Mr(t){return ee(t).Ia.size===0}function xI(t){t.Ra=void 0}async function IU(t){t.Aa.set("Online")}async function NU(t){t.Ta.forEach((e,n)=>{O0(t,e)})}async function DU(t,e){xI(t),V0(t)?(t.Aa.la(e),M0(t)):t.Aa.set("Unknown")}async function kU(t,e,n){if(t.Aa.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const o of r.targetIds)s.Ta.has(o)&&(await s.remoteSyncer.rejectListen(o,a),s.Ta.delete(o),s.Ra.removeTarget(o))}(t,e)}catch(i){G(Ar,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cd(t,i)}else if(e instanceof lh?t.Ra.Ye(e):e instanceof nI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Z.min()))try{const i=await mI(t.localStore);n.compareTo(i)>=0&&await function(r,a){const o=r.Ra.Pt(a);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=r.Ta.get(u);d&&r.Ta.set(u,d.withResumeToken(l.resumeToken,a))}}),o.targetMismatches.forEach((l,u)=>{const d=r.Ta.get(l);if(!d)return;r.Ta.set(l,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),vI(r,l);const m=new cs(d.target,l,u,d.sequenceNumber);O0(r,m)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){G(Ar,"Failed to raise snapshot:",i),await cd(t,i)}}async function cd(t,e,n){if(!mo(e))throw e;t.Ia.add(1),await Uc(t),t.Aa.set("Offline"),n||(n=()=>mI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(Ar,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await rf(t)})}function bI(t,e){return e().catch(n=>cd(t,n,e))}async function af(t){const e=ee(t),n=ks(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:b0;for(;PU(e);)try{const s=await mU(e.localStore,i);if(s===null){e.Pa.length===0&&n.B_();break}i=s.batchId,jU(e,s)}catch(s){await cd(e,s)}_I(e)&&wI(e)}function PU(t){return Mr(t)&&t.Pa.length<10}function jU(t,e){t.Pa.push(e);const n=ks(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function _I(t){return Mr(t)&&!ks(t).M_()&&t.Pa.length>0}function wI(t){ks(t).start()}async function OU(t){ks(t).na()}async function MU(t){const e=ks(t);for(const n of t.Pa)e.X_(n.mutations)}async function VU(t,e,n){const i=t.Pa.shift(),s=C0.from(i,e,n);await bI(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await af(t)}async function LU(t,e){e&&ks(t).Z_&&await async function(i,s){if(function(a){return b6(a)&&a!==U.ABORTED}(s.code)){const r=i.Pa.shift();ks(i).N_(),await bI(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await af(i)}}(t,e),_I(t)&&wI(t)}async function Uw(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),G(Ar,"RemoteStore received new credentials");const i=Mr(n);n.Ia.add(3),await Uc(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await rf(n)}async function UU(t,e){const n=ee(t);e?(n.Ia.delete(2),await rf(n)):e||(n.Ia.add(2),await Uc(n),n.Aa.set("Unknown"))}function go(t){return t.Va||(t.Va=function(n,i,s){const r=ee(n);return r.ia(),new TU(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Zo:IU.bind(null,t),e_:NU.bind(null,t),n_:DU.bind(null,t),J_:kU.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),V0(t)?M0(t):t.Aa.set("Unknown")):(await t.Va.stop(),xI(t))})),t.Va}function ks(t){return t.ma||(t.ma=function(n,i,s){const r=ee(n);return r.ia(),new EU(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:OU.bind(null,t),n_:LU.bind(null,t),ea:MU.bind(null,t),ta:VU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await af(t)):(await t.ma.stop(),t.Pa.length>0&&(G(Ar,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,o=new L0(e,n,a,s,r);return o.start(i),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U0(t,e){if(Oi("AsyncQueue",`${e}: ${t}`),mo(t))return new q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Jo(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.fa=new Oe(K.comparator)}track(e){const n=e.doc.key,i=this.fa.get(n);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(n,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(n):e.type===1&&i.type===2?this.fa=this.fa.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):W(63341,{At:e,ga:i}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ka{constructor(e,n,i,s,r,a,o,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Ka(e,n,Da.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class HU{constructor(){this.queries=Hw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,i){const s=ee(n),r=s.queries;s.queries=Hw(),r.forEach((a,o)=>{for(const l of o.wa)l.onError(i)})})(this,new q(U.ABORTED,"Firestore shutting down"))}}function Hw(){return new Or(t=>FR(t),Jd)}async function TI(t,e){const n=ee(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.Sa()&&e.ba()&&(i=2):(r=new BU,i=e.ba()?0:1);try{switch(i){case 0:r.ya=await n.onListen(s,!0);break;case 1:r.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const o=U0(a,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(o)}n.queries.set(s,r),r.wa.push(e),e.va(n.onlineState),r.ya&&e.Ca(r.ya)&&B0(n)}async function EI(t,e){const n=ee(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.wa.indexOf(e);a>=0&&(r.wa.splice(a,1),r.wa.length===0?s=e.ba()?0:1:!r.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function FU(t,e){const n=ee(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const o of a.wa)o.Ca(s)&&(i=!0);a.ya=s}}i&&B0(n)}function zU(t,e,n){const i=ee(t),s=i.queries.get(e);if(s)for(const r of s.wa)r.onError(n);i.queries.delete(e)}function B0(t){t.Da.forEach(e=>{e.next()})}var wg,Fw;(Fw=wg||(wg={})).Fa="default",Fw.Cache="cache";class SI{constructor(e,n,i){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ka(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const i=n!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.key=e}}class CI{constructor(e){this.key=e}}class qU{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=oe(),this.mutatedKeys=oe(),this.Xa=zR(e),this.eu=new Da(this.Xa)}get tu(){return this.Ha}nu(e,n){const i=n?n.ru:new Bw,s=n?n.eu:this.eu;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const f=s.get(d),g=Zd(this.query,m)?m:null,w=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?w!==E&&(i.track({type:3,doc:g}),T=!0):this.iu(f,g)||(i.track({type:2,doc:g}),T=!0,(l&&this.Xa(g,l)>0||u&&this.Xa(g,u)<0)&&(o=!0)):!f&&g?(i.track({type:0,doc:g}),T=!0):f&&!g&&(i.track({type:1,doc:f}),T=!0,(l||u)&&(o=!0)),T&&(g?(a=a.add(g),r=E?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{eu:a,ru:i,Ds:o,mutatedKeys:r}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((d,m)=>function(g,w){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:T})}};return E(g)-E(w)}(d.type,m.type)||this.Xa(d.doc,m.doc)),this.su(i),s=s!=null&&s;const o=n&&!s?this.ou():[],l=this.Za.size===0&&this.current&&!s?1:0,u=l!==this.Ya;return this.Ya=l,a.length!==0||u?{snapshot:new Ka(this.query,e.eu,r,a,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:o}:{_u:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Bw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=oe(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const n=[];return e.forEach(i=>{this.Za.has(i)||n.push(new CI(i))}),this.Za.forEach(i=>{e.has(i)||n.push(new AI(i))}),n}uu(e){this.Ha=e.qs,this.Za=oe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const H0="SyncEngine";class GU{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class $U{constructor(e){this.key=e,this.lu=!1}}class XU{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Or(o=>FR(o),Jd),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(K.comparator),this.Eu=new Map,this.Au=new N0,this.Ru={},this.Vu=new Map,this.mu=Xa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function KU(t,e,n=!0){const i=PI(t);let s;const r=i.Pu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.cu()):s=await RI(i,e,n,!0),s}async function YU(t,e){const n=PI(t);await RI(n,e,!0,!1)}async function RI(t,e,n,i){const s=await pU(t.localStore,$n(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let o;return i&&(o=await WU(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&yI(t.remoteStore,s),o}async function WU(t,e,n,i,s){t.gu=(m,f,g)=>async function(E,T,v,x){let b=T.view.nu(v);b.Ds&&(b=await jw(E.localStore,T.query,!1).then(({documents:S})=>T.view.nu(S,b)));const R=x&&x.targetChanges.get(T.targetId),j=x&&x.targetMismatches.get(T.targetId)!=null,V=T.view.applyChanges(b,E.isPrimaryClient,R,j);return qw(E,T.targetId,V._u),V.snapshot}(t,m,f,g);const r=await jw(t.localStore,e,!0),a=new qU(e,r.qs),o=a.nu(r.documents),l=Lc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),u=a.applyChanges(o,t.isPrimaryClient,l);qw(t,n,u._u);const d=new GU(e,n,a);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function QU(t,e,n){const i=ee(t),s=i.Pu.get(e),r=i.Tu.get(s.targetId);if(r.length>1)return i.Tu.set(s.targetId,r.filter(a=>!Jd(a,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await bg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&j0(i.remoteStore,s.targetId),Tg(i,s.targetId)}).catch(fo)):(Tg(i,s.targetId),await bg(i.localStore,s.targetId,!0))}async function JU(t,e){const n=ee(t),i=n.Pu.get(e),s=n.Tu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),j0(n.remoteStore,i.targetId))}async function ZU(t,e,n){const i=a9(t);try{const s=await function(a,o){const l=ee(a),u=Se.now(),d=o.reduce((g,w)=>g.add(w.key),oe());let m,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Mi(),E=oe();return l.Os.getEntries(g,d).next(T=>{w=T,w.forEach((v,x)=>{x.isValidDocument()||(E=E.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,w)).next(T=>{m=T;const v=[];for(const x of o){const b=p6(x,m.get(x.key).overlayedDocument);b!=null&&v.push(new zs(x.key,b,jR(b.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,v,o)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(m,E);return l.documentOverlayCache.saveOverlays(g,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:GR(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,o,l){let u=a.Ru[a.currentUser.toKey()];u||(u=new Oe(ne)),u=u.insert(o,l),a.Ru[a.currentUser.toKey()]=u}(i,s.batchId,n),await Bc(i,s.changes),await af(i.remoteStore)}catch(s){const r=U0(s,"Failed to persist write");n.reject(r)}}async function II(t,e){const n=ee(t);try{const i=await dU(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Eu.get(r);a&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?me(a.lu,14607):s.removedDocuments.size>0&&(me(a.lu,42227),a.lu=!1))}),await Bc(n,i,e)}catch(i){await fo(i)}}function zw(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Pu.forEach((r,a)=>{const o=a.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(a,o){const l=ee(a);l.onlineState=o;let u=!1;l.queries.forEach((d,m)=>{for(const f of m.wa)f.va(o)&&(u=!0)}),u&&B0(l)}(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function e9(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Eu.get(e),r=s&&s.key;if(r){let a=new Oe(K.comparator);a=a.insert(r,wt.newNoDocument(r,Z.min()));const o=oe().add(r),l=new nf(Z.min(),new Map,new Oe(ne),a,o);await II(i,l),i.du=i.du.remove(r),i.Eu.delete(e),F0(i)}else await bg(i.localStore,e,!1).then(()=>Tg(i,e,n)).catch(fo)}async function t9(t,e){const n=ee(t),i=e.batch.batchId;try{const s=await hU(n.localStore,e);DI(n,i,null),NI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bc(n,s)}catch(s){await fo(s)}}async function n9(t,e,n){const i=ee(t);try{const s=await function(a,o){const l=ee(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(m=>(me(m!==null,37113),d=m.keys(),l.mutationQueue.removeMutationBatch(u,m))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(i.localStore,e);DI(i,e,n),NI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bc(i,s)}catch(s){await fo(s)}}function NI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function DI(t,e,n){const i=ee(t);let s=i.Ru[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function Tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Tu.get(e))t.Pu.delete(i),n&&t.hu.pu(i,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(i=>{t.Au.containsKey(i)||kI(t,i)})}function kI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(j0(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),F0(t))}function qw(t,e,n){for(const i of n)i instanceof AI?(t.Au.addReference(i.key,e),i9(t,i)):i instanceof CI?(G(H0,"Document no longer in limbo: "+i.key),t.Au.removeReference(i.key,e),t.Au.containsKey(i.key)||kI(t,i.key)):W(19791,{yu:i})}function i9(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Iu.has(i)||(G(H0,"New document in limbo: "+n),t.Iu.add(i),F0(t))}function F0(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new K(we.fromString(e)),i=t.mu.next();t.Eu.set(i,new $U(n)),t.du=t.du.insert(n,i),yI(t.remoteStore,new cs($n(S0(n.path)),i,"TargetPurposeLimboResolution",Yd.ue))}}async function Bc(t,e,n){const i=ee(t),s=[],r=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((o,l)=>{a.push(i.gu(l,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){const m=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(u){s.push(u);const m=k0.Es(l.targetId,u);r.push(m)}}))}),await Promise.all(a),i.hu.J_(s),await async function(l,u){const d=ee(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(u,f=>B.forEach(f.Is,g=>d.persistence.referenceDelegate.addReference(m,f.targetId,g)).next(()=>B.forEach(f.ds,g=>d.persistence.referenceDelegate.removeReference(m,f.targetId,g)))))}catch(m){if(!mo(m))throw m;G(P0,"Failed to update sequence numbers: "+m)}for(const m of u){const f=m.targetId;if(!m.fromCache){const g=d.Fs.get(f),w=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(w);d.Fs=d.Fs.insert(f,E)}}}(i.localStore,r))}async function s9(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){G(H0,"User change. New user:",e.toKey());const i=await fI(n.localStore,e);n.currentUser=e,function(r,a){r.Vu.forEach(o=>{o.forEach(l=>{l.reject(new q(U.CANCELLED,a))})}),r.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bc(n,i.Bs)}}function r9(t,e){const n=ee(t),i=n.Eu.get(e);if(i&&i.lu)return oe().add(i.key);{let s=oe();const r=n.Tu.get(e);if(!r)return s;for(const a of r){const o=n.Pu.get(a);s=s.unionWith(o.view.tu)}return s}}function PI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=II.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e9.bind(null,e),e.hu.J_=FU.bind(null,e.eventManager),e.hu.pu=zU.bind(null,e.eventManager),e}function a9(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n9.bind(null,e),e}class ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return uU(this.persistence,new oU,e.initialUser,this.serializer)}Du(e){return new dI(D0.Vi,this.serializer)}bu(e){return new yU}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ud.provider={build:()=>new ud};class o9 extends ud{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){me(this.persistence.referenceDelegate instanceof ld,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new $6(i,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new dI(i=>ld.Vi(i,n),this.serializer)}}class Eg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=s9.bind(null,this.syncEngine),await UU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HU}()}createDatastore(e){const n=sf(e.databaseInfo.databaseId),i=function(r){return new wU(r)}(e.databaseInfo);return function(r,a,o,l){return new AU(r,a,o,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,o){return new RU(i,s,r,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>zw(this.syncEngine,n,0),function(){return Vw.C()?new Vw:new vU}())}createSyncEngine(e,n){return function(s,r,a,o,l,u,d){const m=new XU(s,r,a,o,l,u);return d&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ee(s);G(Ar,"RemoteStore shutting down."),r.Ia.add(5),await Uc(r),r.Ea.shutdown(),r.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Eg.provider={build:()=>new Eg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class l9{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=x0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{G(Ps,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(Ps,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=U0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Lm(t,e){t.asyncQueue.verifyOperationInProgress(),G(Ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await fI(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>{Cs("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{G("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{Cs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),t._offlineComponents=e}async function Gw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c9(t);G(Ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Uw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Uw(e.remoteStore,s)),t._onlineComponents=e}async function c9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(Ps,"Using user provided OfflineComponentProvider");try{await Lm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),await Lm(t,new ud)}}else G(Ps,"Using default OfflineComponentProvider"),await Lm(t,new o9(void 0));return t._offlineComponents}async function OI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(Ps,"Using user provided OnlineComponentProvider"),await Gw(t,t._uninitializedComponentsProvider._online)):(G(Ps,"Using default OnlineComponentProvider"),await Gw(t,new Eg))),t._onlineComponents}function u9(t){return OI(t).then(e=>e.syncEngine)}async function MI(t){const e=await OI(t),n=e.eventManager;return n.onListen=KU.bind(null,e.syncEngine),n.onUnlisten=QU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=JU.bind(null,e.syncEngine),n}function h9(t,e,n={}){const i=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,o,l,u){const d=new jI({next:f=>{d.Ou(),a.enqueueAndForget(()=>EI(r,m));const g=f.docs.has(o);!g&&f.fromCache?u.reject(new q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),m=new SI(S0(o.path),d,{includeMetadataChanges:!0,ka:!0});return TI(r,m)}(await MI(t),t.asyncQueue,e,n,i)),i.promise}function d9(t,e,n={}){const i=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,o,l,u){const d=new jI({next:f=>{d.Ou(),a.enqueueAndForget(()=>EI(r,m)),f.fromCache&&l.source==="server"?u.reject(new q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),m=new SI(o,d,{includeMetadataChanges:!0,ka:!0});return TI(r,m)}(await MI(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="firestore.googleapis.com",Xw=!0;class Kw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LI,this.ssl=Xw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q6)throw new q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class of{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new x5;switch(i.type){case"firstParty":return new T5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=$w.get(n);i&&(G("ComponentProvider","Removing Datastore"),$w.delete(n),i.terminate())}(this),Promise.resolve()}}function f9(t,e,n,i={}){var s;t=ei(t,of);const r=lo(e),a=t._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;r&&(ZA(`https://${l}`),eC("Firestore",!0)),a.host!==LI&&a.host!==l&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:l,ssl:r,emulatorOptions:i});if(!As(u,o)&&(t._setSettings(u),i.mockUserToken)){let d,m;if(typeof i.mockUserToken=="string")d=i.mockUserToken,m=_t.MOCK_USER;else{d=lM(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _t(f)}t._authCredentials=new b5(new _R(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Vr(this.firestore,e,this._query)}}class qe{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Mc(n,qe._jsonSchema))return new qe(e,i||null,new K(we.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:We("string",qe._jsonSchemaVersion),referencePath:We("string")};class _s extends Vr{constructor(e,n,i){super(e,n,S0(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new K(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function nc(t,e,...n){if(t=Je(t),TR("collection","path",e),t instanceof of){const i=we.fromString(e,...n);return ow(i),new _s(t,null,i)}{if(!(t instanceof qe||t instanceof _s))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return ow(i),new _s(t.firestore,null,i)}}function Lr(t,e,...n){if(t=Je(t),arguments.length===1&&(e=x0.newId()),TR("doc","path",e),t instanceof of){const i=we.fromString(e,...n);return aw(i),new qe(t,null,new K(i))}{if(!(t instanceof qe||t instanceof _s))throw new q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return aw(i),new qe(t.firestore,t instanceof _s?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw="AsyncQueue";class Ww{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new pI(this,"async_queue_retry"),this.oc=()=>{const i=Vm();i&&G(Yw,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const n=Vm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ci;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!mo(e))throw e;G(Yw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Oi("INTERNAL UNHANDLED ERROR: ",Qw(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=L0.createAndSchedule(this,e,n,i,r=>this.lc(r));return this.ec.push(s),s}ac(){this.tc&&W(47125,{hc:Qw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Qw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class yo extends of{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Ww,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ww(e),this._firestoreClient=void 0,await e}}}function m9(t,e){const n=typeof t=="object"?t:t0(),i=typeof t=="string"?t:id,s=jr(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=aM("firestore");r&&f9(s,...r)}return s}function z0(t){if(t._terminated)throw new q(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||p9(t),t._firestoreClient}function p9(t){var e,n,i;const s=t._freezeSettings(),r=function(o,l,u,d){return new U5(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new l9(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fn(gt.fromBase64String(e))}catch(n){throw new q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fn(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mc(e,fn._jsonSchema))return fn.fromBase64String(e.bytes)}}fn._jsonSchemaVersion="firestore/bytes/1.0",fn._jsonSchema={type:We("string",fn._jsonSchemaVersion),bytes:We("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kn._jsonSchemaVersion}}static fromJSON(e){if(Mc(e,Kn._jsonSchema))return new Kn(e.latitude,e.longitude)}}Kn._jsonSchemaVersion="firestore/geoPoint/1.0",Kn._jsonSchema={type:We("string",Kn._jsonSchemaVersion),latitude:We("number"),longitude:We("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Yn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mc(e,Yn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Yn(e.vectorValues);throw new q(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yn._jsonSchemaVersion="firestore/vectorValue/1.0",Yn._jsonSchema={type:We("string",Yn._jsonSchemaVersion),vectorValues:We("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9=/^__.*__$/;class y9{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vc(e,this.data,n,this.fieldTransforms)}}class UI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:t})}}class q0{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new q0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return hd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(BI(this.Ec)&&g9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class v9{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||sf(e)}Dc(e,n,i,s=!1){return new q0({Ec:e,methodName:n,bc:i,path:mt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uf(t){const e=t._freezeSettings(),n=sf(t._databaseId);return new v9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HI(t,e,n,i,s,r={}){const a=t.Dc(r.merge||r.mergeFields?2:0,e,n,s);$0("Data must be an object, but it was:",a,i);const o=FI(i,a);let l,u;if(r.merge)l=new Qt(a.fieldMask),u=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const m of r.mergeFields){const f=Sg(e,m,n);if(!a.contains(f))throw new q(U.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qI(d,f)||d.push(f)}l=new Qt(d),u=a.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,u=a.fieldTransforms;return new y9(new Bt(o),l,u)}class hf extends cf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hf}}class G0 extends cf{_toFieldTransform(e){return new h6(e.path,new Zl)}isEqual(e){return e instanceof G0}}function x9(t,e,n,i){const s=t.Dc(1,e,n);$0("Data must be an object, but it was:",s,i);const r=[],a=Bt.empty();Fs(i,(l,u)=>{const d=X0(e,l,n);u=Je(u);const m=s.gc(d);if(u instanceof hf)r.push(d);else{const f=Hc(u,m);f!=null&&(r.push(d),a.set(d,f))}});const o=new Qt(r);return new UI(a,o,s.fieldTransforms)}function b9(t,e,n,i,s,r){const a=t.Dc(1,e,n),o=[Sg(e,i,n)],l=[s];if(r.length%2!=0)throw new q(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)o.push(Sg(e,r[f])),l.push(r[f+1]);const u=[],d=Bt.empty();for(let f=o.length-1;f>=0;--f)if(!qI(u,o[f])){const g=o[f];let w=l[f];w=Je(w);const E=a.gc(g);if(w instanceof hf)u.push(g);else{const T=Hc(w,E);T!=null&&(u.push(g),d.set(g,T))}}const m=new Qt(u);return new UI(d,m,a.fieldTransforms)}function _9(t,e,n,i=!1){return Hc(n,t.Dc(i?4:3,e))}function Hc(t,e){if(zI(t=Je(t)))return $0("Unsupported field value:",e,t),FI(t,e);if(t instanceof cf)return function(i,s){if(!BI(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const o of i){let l=Hc(o,s.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return l6(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Se.fromDate(i);return{timestampValue:od(s.serializer,r)}}if(i instanceof Se){const r=new Se(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:od(s.serializer,r)}}if(i instanceof Kn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fn)return{bytesValue:sI(s.serializer,i._byteString)};if(i instanceof qe){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:I0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Yn)return function(a,o){return{mapValue:{fields:{[kR]:{stringValue:PR},[sd]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw o.wc("VectorValues must only contain numeric values.");return A0(o.serializer,u)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${Kd(i)}`)}(t,e)}function FI(t,e){const n={};return AR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(t,(i,s)=>{const r=Hc(s,e.Vc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function zI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Kn||t instanceof fn||t instanceof qe||t instanceof cf||t instanceof Yn)}function $0(t,e,n){if(!zI(n)||!ER(n)){const i=Kd(n);throw i==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+i)}}function Sg(t,e,n){if((e=Je(e))instanceof lf)return e._internalPath;if(typeof e=="string")return X0(t,e);throw hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const w9=new RegExp("[~\\*/\\[\\]]");function X0(t,e,n){if(e.search(w9)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new lf(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hd(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(r||a)&&(l+=" (found",r&&(l+=` in field ${i}`),a&&(l+=` in document ${s}`),l+=")"),new q(U.INVALID_ARGUMENT,o+t+l)}function qI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(df("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class T9 extends GI{data(){return super.data()}}function df(t,e){return typeof e=="string"?X0(t,e):e instanceof lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}class $I extends K0{}function XI(t,e,...n){let i=[];e instanceof K0&&i.push(e),i=i.concat(n),function(r){const a=r.filter(l=>l instanceof Y0).length,o=r.filter(l=>l instanceof ff).length;if(a>1||a>0&&o>0)throw new q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class ff extends $I{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new ff(e,n,i)}_apply(e){const n=this._parse(e);return WI(e._query,n),new Vr(e.firestore,e.converter,mg(e._query,n))}_parse(e){const n=uf(e.firestore);return function(r,a,o,l,u,d,m){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Zw(m,d);const w=[];for(const E of m)w.push(Jw(l,r,E));f={arrayValue:{values:w}}}else f=Jw(l,r,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Zw(m,d),f=_9(o,a,m,d==="in"||d==="not-in");return Ye.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function KI(t,e,n){const i=e,s=df("where",t);return ff._create(s,i,n)}class Y0 extends K0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Y0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const o=r.getFlattenedFilters();for(const l of o)WI(a,l),a=mg(a,l)}(e._query,n),new Vr(e.firestore,e.converter,mg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class W0 extends $I{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new W0(e,n)}_apply(e){const n=function(s,r,a){if(s.startAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jl(r,a)}(e._query,this._field,this._direction);return new Vr(e.firestore,e.converter,function(s,r){const a=s.explicitOrderBy.concat([r]);return new po(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function YI(t,e="asc"){const n=e,i=df("orderBy",t);return W0._create(i,n)}function Jw(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HR(e)&&n.indexOf("/")!==-1)throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(we.fromString(n));if(!K.isDocumentKey(i))throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pw(t,new K(i))}if(n instanceof qe)return pw(t,n._key);throw new q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(n)}.`)}function Zw(t,e){if(!Array.isArray(t)||t.length===0)throw new q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WI(t,e){const n=function(s,r){for(const a of s)for(const o of a.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class S9{convertValue(e,n="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Fs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[sd].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>ze(a.doubleValue));return new Yn(r)}convertGeoPoint(e){return new Kn(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Qd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yl(e));default:return null}}convertTimestamp(e){const n=Is(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=we.fromString(e);me(uI(i),9688,{name:e});const s=new Wl(i.get(1),i.get(3)),r=new K(i.popFirst(5));return s.isEqual(n)||Oi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class el{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mr extends GI{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(df("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mr._jsonSchemaVersion="firestore/documentSnapshot/1.0",mr._jsonSchema={type:We("string",mr._jsonSchemaVersion),bundleSource:We("string","DocumentSnapshot"),bundleName:We("string"),bundle:We("string")};class ch extends mr{data(e={}){return super.data(e)}}class ka{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new el(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ch(this._firestore,this._userDataWriter,i.key,i,new el(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(o=>{const l=new ch(s._firestore,s._userDataWriter,o.doc.key,o.doc,new el(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const l=new ch(s._firestore,s._userDataWriter,o.doc.key,o.doc,new el(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:A9(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=x0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function A9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t){t=ei(t,qe);const e=ei(t.firestore,yo);return h9(z0(e),t._key).then(n=>R9(e,t,n))}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:We("string",ka._jsonSchemaVersion),bundleSource:We("string","QuerySnapshot"),bundleName:We("string"),bundle:We("string")};class ZI extends S9{constructor(e){super(),this.firestore=e}convertBytes(e){return new fn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function eN(t){t=ei(t,Vr);const e=ei(t.firestore,yo),n=z0(e),i=new ZI(e);return E9(t._query),d9(n,t._query).then(s=>new ka(e,i,t,s))}function C9(t,e,n){t=ei(t,qe);const i=ei(t.firestore,yo),s=QI(t.converter,e);return J0(i,[HI(uf(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,An.none())])}function mf(t,e,n,...i){t=ei(t,qe);const s=ei(t.firestore,yo),r=uf(s);let a;return a=typeof(e=Je(e))=="string"||e instanceof lf?b9(r,"updateDoc",t._key,e,n,i):x9(r,"updateDoc",t._key,e),J0(s,[a.toMutation(t._key,An.exists(!0))])}function Q0(t,e){const n=ei(t.firestore,yo),i=Lr(t),s=QI(t.converter,e);return J0(n,[HI(uf(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,An.exists(!1))]).then(()=>i)}function J0(t,e){return function(i,s){const r=new Ci;return i.asyncQueue.enqueueAndForget(async()=>ZU(await u9(i),s,r)),r.promise}(z0(t),e)}function R9(t,e,n){const i=n.docs.get(e._key),s=new ZI(t);return new mr(t,s,e._key,i,new el(n.hasPendingWrites,n.fromCache),e.converter)}function ni(){return new G0("serverTimestamp")}(function(e,n=!0){(function(s){ho=s})(co),Zn(new In("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),o=new yo(new _5(i.getProvider("auth-internal")),new E5(a,i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(u.options.projectId,d)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),pn(tw,nw,e),pn(tw,nw,"esm2017")})();const I9={apiKey:"AIzaSyDw4vHZDrwO0wf1iUnM-8v7Sy2ZXpp7nCk",authDomain:"solo-leveling-2ccb9.firebaseapp.com",projectId:"solo-leveling-2ccb9",storageBucket:"solo-leveling-2ccb9.firebasestorage.app",messagingSenderId:"749733788294",appId:"1:749733788294:web:449011e675dad54e9b6f07",measurementId:"G-G2TVFCHREJ"},Z0=oC(I9);ZV(Z0);const Cr=y5(Z0),Cn=m9(Z0),Ag=new gi;Ag.setCustomParameters({prompt:"select_account"});const N9=async()=>{try{return{user:(await S3(Cr,Ag)).user,error:null}}catch(t){if(console.warn("Google sign-in error:",t.message),t.code==="auth/popup-blocked")try{return await D3(Cr,Ag),{user:null,error:null,redirecting:!0}}catch(n){console.warn("Redirect sign-in also failed:",n.message)}let e="Failed to sign in with Google. ";return t.code==="auth/popup-blocked"?e+="Please allow popups for this site or try refreshing.":t.code==="auth/popup-closed-by-user"?e+="Sign-in was cancelled.":t.code==="auth/network-request-failed"?e+="Network error. Please check your connection.":e+="Please try again or use email sign-in.",{user:null,error:e}}},D9=async()=>{try{const t=await P3(Cr);return t?{user:t.user,error:null}:{user:null,error:null}}catch(t){return console.warn("Redirect result error:",t.message),{user:null,error:t.message}}},k9=async(t,e)=>{try{return{user:(await t3(Cr,t,e)).user,error:null}}catch(n){return{user:null,error:n.message}}},P9=async(t,e,n)=>{try{const i=await e3(Cr,t,e);return await tN(i.user.uid,{email:i.user.email,displayName:n||i.user.displayName,level:1,xp:0,totalXP:0,createdAt:ni(),lastLogin:ni()}),{user:i.user,error:null}}catch(i){return{user:null,error:i.message}}},j9=async()=>{try{return await r3(Cr),{error:null}}catch(t){return{error:t.message}}},tN=async(t,e)=>{try{return await C9(Lr(Cn,"users",t),e),{error:null}}catch(n){return{error:n.message}}},O9=async t=>{try{const e=Lr(Cn,"users",t),n=await JI(e);return n.exists()?{data:n.data(),error:null}:{data:null,error:"User profile not found"}}catch(e){return{data:null,error:e.message}}},M9=async(t,e)=>{try{const n=Lr(Cn,"users",t);return await mf(n,{...e,updatedAt:ni()}),{error:null}}catch(n){return{error:n.message}}},V9=async(t,e)=>{try{return{id:(await Q0(nc(Cn,"habits"),{userId:t,...e,createdAt:ni(),updatedAt:ni()})).id,error:null}}catch(n){return{id:null,error:n.message}}},L9=async t=>{try{const e=XI(nc(Cn,"habits"),KI("userId","==",t),YI("createdAt","desc")),n=await eN(e),i=[];return n.forEach(s=>{i.push({id:s.id,...s.data()})}),{data:i,error:null}}catch(e){return{data:[],error:e.message}}},U9=async(t,e)=>{try{const n=Lr(Cn,"habits",t);return await mf(n,{...e,updatedAt:ni()}),{error:null}}catch(n){return{error:n.message}}},B9=async(t,e,n)=>{try{await Q0(nc(Cn,"habitCompletions"),{userId:t,habitId:e,xpGained:n,completedAt:ni()});const i=Lr(Cn,"users",t),s=await JI(i);if(s.exists()){const r=s.data(),a=(r.totalXP||0)+n,o=Math.floor(a/100)+1,l=a%100;return await mf(i,{xp:l,totalXP:a,level:o,updatedAt:ni()}),{newLevel:o,currentLevelXP:l,totalXP:a,leveledUp:o>(r.level||1),error:null}}return{error:"User not found"}}catch(i){return{error:i.message}}},jn=Nc(Ud((t,e)=>({user:null,profile:null,isLoading:!0,isAuthenticated:!1,error:null,setUser:n=>t({user:n,isAuthenticated:!!n,isLoading:!1}),setProfile:n=>t({profile:n}),setError:n=>t({error:n}),setLoading:n=>t({isLoading:n}),initializeAuth:()=>s3(Cr,async n=>{if(n){const{data:i,error:s}=await O9(n.uid);if(i)t({user:n,profile:i,isAuthenticated:!0,isLoading:!1,error:null});else{const r={email:n.email,displayName:n.displayName||"New Hunter",level:1,xp:0,totalXP:0};await tN(n.uid,r),t({user:n,profile:r,isAuthenticated:!0,isLoading:!1,error:null})}}else t({user:null,profile:null,isAuthenticated:!1,isLoading:!1,error:null})}),signInWithGoogle:async()=>{t({isLoading:!0,error:null});const{user:n,error:i,redirecting:s}=await N9();return s?{success:!1,redirecting:!0}:i?(t({error:i,isLoading:!1}),{success:!1,error:i}):{success:!0,user:n}},handleRedirectResult:async()=>{const{user:n,error:i}=await D9();return n?{success:!0,user:n}:i?(t({error:i}),{success:!1,error:i}):{success:!1}},signInWithEmail:async(n,i)=>{t({isLoading:!0,error:null});const{user:s,error:r}=await k9(n,i);return r?(t({error:r,isLoading:!1}),{success:!1,error:r}):{success:!0,user:s}},signUpWithEmail:async(n,i,s)=>{t({isLoading:!0,error:null});const{user:r,error:a}=await P9(n,i,s);return a?(t({error:a,isLoading:!1}),{success:!1,error:a}):{success:!0,user:r}},signOut:async()=>{t({isLoading:!0});const{error:n}=await j9();return n?(t({error:n,isLoading:!1}),{success:!1,error:n}):(t({user:null,profile:null,isAuthenticated:!1,isLoading:!1,error:null}),{success:!0})},updateProfile:async n=>{const{user:i,profile:s}=e();if(!i)return{success:!1,error:"No user logged in"};t({isLoading:!0});const{error:r}=await M9(i.uid,n);if(r)return t({error:r,isLoading:!1}),{success:!1,error:r};const a={...s,...n};return t({profile:a,isLoading:!1}),{success:!0,profile:a}},clearError:()=>t({error:null}),getCurrentUser:()=>{const{user:n,profile:i,isAuthenticated:s}=e();return{user:n,profile:i,isAuthenticated:s}}}),{name:"auth-storage",partialize:t=>({user:t.user,profile:t.profile,isAuthenticated:t.isAuthenticated})})),ev=D.createContext({});function tv(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const nv=typeof window<"u",nN=nv?D.useLayoutEffect:D.useEffect,pf=D.createContext(null);function iv(t,e){t.indexOf(e)===-1&&t.push(e)}function sv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vi=(t,e,n)=>n>e?e:n<t?t:n;let rv=()=>{};const Li={},iN=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function sN(t){return typeof t=="object"&&t!==null}const rN=t=>/^0[^.\s]+$/u.test(t);function av(t){let e;return()=>(e===void 0&&(e=t()),e)}const gn=t=>t,H9=(t,e)=>n=>e(t(n)),Fc=(...t)=>t.reduce(H9),ic=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class ov{constructor(){this.subscriptions=[]}add(e){return iv(this.subscriptions,e),()=>sv(this.subscriptions,e)}notify(e,n,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,i);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wn=t=>t*1e3,Qn=t=>t/1e3;function aN(t,e){return e?t*(1e3/e):0}const oN=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,F9=1e-7,z9=12;function q9(t,e,n,i,s){let r,a,o=0;do a=e+(n-e)/2,r=oN(a,i,s)-t,r>0?n=a:e=a;while(Math.abs(r)>F9&&++o<z9);return a}function zc(t,e,n,i){if(t===e&&n===i)return gn;const s=r=>q9(r,0,1,t,n);return r=>r===0||r===1?r:oN(s(r),e,i)}const lN=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cN=t=>e=>1-t(1-e),uN=zc(.33,1.53,.69,.99),lv=cN(uN),hN=lN(lv),dN=t=>(t*=2)<1?.5*lv(t):.5*(2-Math.pow(2,-10*(t-1))),cv=t=>1-Math.sin(Math.acos(t)),fN=cN(cv),mN=lN(cv),G9=zc(.42,0,1,1),$9=zc(0,0,.58,1),pN=zc(.42,0,.58,1),X9=t=>Array.isArray(t)&&typeof t[0]!="number",gN=t=>Array.isArray(t)&&typeof t[0]=="number",K9={linear:gn,easeIn:G9,easeInOut:pN,easeOut:$9,circIn:cv,circInOut:mN,circOut:fN,backIn:lv,backInOut:hN,backOut:uN,anticipate:dN},Y9=t=>typeof t=="string",eT=t=>{if(gN(t)){rv(t.length===4);const[e,n,i,s]=t;return zc(e,n,i,s)}else if(Y9(t))return K9[t];return t},Ou=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],tT={value:null};function W9(t,e){let n=new Set,i=new Set,s=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(m){a.has(m)&&(d.schedule(m),t()),l++,m(o)}const d={schedule:(m,f=!1,g=!1)=>{const E=g&&s?n:i;return f&&a.add(m),E.has(m)||E.add(m),m},cancel:m=>{i.delete(m),a.delete(m)},process:m=>{if(o=m,s){r=!0;return}s=!0,[n,i]=[i,n],n.forEach(u),e&&tT.value&&tT.value.frameloop[e].push(l),l=0,n.clear(),s=!1,r&&(r=!1,d.process(m))}};return d}const Q9=40;function yN(t,e){let n=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Ou.reduce((b,R)=>(b[R]=W9(r,e?R:void 0),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:m,preRender:f,render:g,postRender:w}=a,E=()=>{const b=Li.useManualTiming?s.timestamp:performance.now();n=!1,Li.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(b-s.timestamp,Q9),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),m.process(s),f.process(s),g.process(s),w.process(s),s.isProcessing=!1,n&&e&&(i=!1,t(E))},T=()=>{n=!0,i=!0,s.isProcessing||t(E)};return{schedule:Ou.reduce((b,R)=>{const j=a[R];return b[R]=(V,S=!1,_=!1)=>(n||T(),j.schedule(V,S,_)),b},{}),cancel:b=>{for(let R=0;R<Ou.length;R++)a[Ou[R]].cancel(b)},state:s,steps:a}}const{schedule:Ne,cancel:js,state:ut,steps:Um}=yN(typeof requestAnimationFrame<"u"?requestAnimationFrame:gn,!0);let uh;function J9(){uh=void 0}const Ht={now:()=>(uh===void 0&&Ht.set(ut.isProcessing||Li.useManualTiming?ut.timestamp:performance.now()),uh),set:t=>{uh=t,queueMicrotask(J9)}},vN=t=>e=>typeof e=="string"&&e.startsWith(t),uv=vN("--"),Z9=vN("var(--"),hv=t=>Z9(t)?eB.test(t.split("/*")[0].trim()):!1,eB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,vo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sc={...vo,transform:t=>Vi(0,1,t)},Mu={...vo,default:1},El=t=>Math.round(t*1e5)/1e5,dv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tB(t){return t==null}const nB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fv=(t,e)=>n=>!!(typeof n=="string"&&nB.test(n)&&n.startsWith(t)||e&&!tB(n)&&Object.prototype.hasOwnProperty.call(n,e)),xN=(t,e,n)=>i=>{if(typeof i!="string")return i;const[s,r,a,o]=i.match(dv);return{[t]:parseFloat(s),[e]:parseFloat(r),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},iB=t=>Vi(0,255,t),Bm={...vo,transform:t=>Math.round(iB(t))},rr={test:fv("rgb","red"),parse:xN("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Bm.transform(t)+", "+Bm.transform(e)+", "+Bm.transform(n)+", "+El(sc.transform(i))+")"};function sB(t){let e="",n="",i="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,i+=i,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const Cg={test:fv("#"),parse:sB,transform:rr.transform},qc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ki=qc("deg"),Jn=qc("%"),Q=qc("px"),rB=qc("vh"),aB=qc("vw"),nT={...Jn,parse:t=>Jn.parse(t)/100,transform:t=>Jn.transform(t*100)},pa={test:fv("hsl","hue"),parse:xN("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Jn.transform(El(e))+", "+Jn.transform(El(n))+", "+El(sc.transform(i))+")"},Xe={test:t=>rr.test(t)||Cg.test(t)||pa.test(t),parse:t=>rr.test(t)?rr.parse(t):pa.test(t)?pa.parse(t):Cg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rr.transform(t):pa.transform(t),getAnimatableNone:t=>{const e=Xe.parse(t);return e.alpha=0,Xe.transform(e)}},oB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(dv))==null?void 0:e.length)||0)+(((n=t.match(oB))==null?void 0:n.length)||0)>0}const bN="number",_N="color",cB="var",uB="var(",iT="${}",hB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rc(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},s=[];let r=0;const o=e.replace(hB,l=>(Xe.test(l)?(i.color.push(r),s.push(_N),n.push(Xe.parse(l))):l.startsWith(uB)?(i.var.push(r),s.push(cB),n.push(l)):(i.number.push(r),s.push(bN),n.push(parseFloat(l))),++r,iT)).split(iT);return{values:n,split:o,indexes:i,types:s}}function wN(t){return rc(t).values}function TN(t){const{split:e,types:n}=rc(t),i=e.length;return s=>{let r="";for(let a=0;a<i;a++)if(r+=e[a],s[a]!==void 0){const o=n[a];o===bN?r+=El(s[a]):o===_N?r+=Xe.transform(s[a]):r+=s[a]}return r}}const dB=t=>typeof t=="number"?0:Xe.test(t)?Xe.getAnimatableNone(t):t;function fB(t){const e=wN(t);return TN(t)(e.map(dB))}const Os={test:lB,parse:wN,createTransformer:TN,getAnimatableNone:fB};function Hm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mB({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let s=0,r=0,a=0;if(!e)s=r=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;s=Hm(l,o,t+1/3),r=Hm(l,o,t),a=Hm(l,o,t-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:i}}function dd(t,e){return n=>n>0?e:t}const je=(t,e,n)=>t+(e-t)*n,Fm=(t,e,n)=>{const i=t*t,s=n*(e*e-i)+i;return s<0?0:Math.sqrt(s)},pB=[Cg,rr,pa],gB=t=>pB.find(e=>e.test(t));function sT(t){const e=gB(t);if(!e)return!1;let n=e.parse(t);return e===pa&&(n=mB(n)),n}const rT=(t,e)=>{const n=sT(t),i=sT(e);if(!n||!i)return dd(t,e);const s={...n};return r=>(s.red=Fm(n.red,i.red,r),s.green=Fm(n.green,i.green,r),s.blue=Fm(n.blue,i.blue,r),s.alpha=je(n.alpha,i.alpha,r),rr.transform(s))},Rg=new Set(["none","hidden"]);function yB(t,e){return Rg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vB(t,e){return n=>je(t,e,n)}function mv(t){return typeof t=="number"?vB:typeof t=="string"?hv(t)?dd:Xe.test(t)?rT:_B:Array.isArray(t)?EN:typeof t=="object"?Xe.test(t)?rT:xB:dd}function EN(t,e){const n=[...t],i=n.length,s=t.map((r,a)=>mv(r)(r,e[a]));return r=>{for(let a=0;a<i;a++)n[a]=s[a](r);return n}}function xB(t,e){const n={...t,...e},i={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(i[s]=mv(t[s])(t[s],e[s]));return s=>{for(const r in i)n[r]=i[r](s);return n}}function bB(t,e){const n=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const r=e.types[s],a=t.indexes[r][i[r]],o=t.values[a]??0;n[s]=o,i[r]++}return n}const _B=(t,e)=>{const n=Os.createTransformer(e),i=rc(t),s=rc(e);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?Rg.has(t)&&!s.values.length||Rg.has(e)&&!i.values.length?yB(t,e):Fc(EN(bB(i,s),s.values),n):dd(t,e)};function SN(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?je(t,e,n):mv(t)(t,e)}const wB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ne.update(e,n),stop:()=>js(e),now:()=>ut.isProcessing?ut.timestamp:Ht.now()}},AN=(t,e,n=10)=>{let i="";const s=Math.max(Math.round(e/n),2);for(let r=0;r<s;r++)i+=Math.round(t(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},fd=2e4;function pv(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<fd;)e+=n,i=t.next(e);return e>=fd?1/0:e}function TB(t,e=100,n){const i=n({...t,keyframes:[0,e]}),s=Math.min(pv(i),fd);return{type:"keyframes",ease:r=>i.next(s*r).value/e,duration:Qn(s)}}const EB=5;function CN(t,e,n){const i=Math.max(e-EB,0);return aN(n-t(i),e-i)}const Ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zm=.001;function SB({duration:t=Ve.duration,bounce:e=Ve.bounce,velocity:n=Ve.velocity,mass:i=Ve.mass}){let s,r,a=1-e;a=Vi(Ve.minDamping,Ve.maxDamping,a),t=Vi(Ve.minDuration,Ve.maxDuration,Qn(t)),a<1?(s=u=>{const d=u*a,m=d*t,f=d-n,g=Ig(u,a),w=Math.exp(-m);return zm-f/g*w},r=u=>{const m=u*a*t,f=m*n+n,g=Math.pow(a,2)*Math.pow(u,2)*t,w=Math.exp(-m),E=Ig(Math.pow(u,2),a);return(-s(u)+zm>0?-1:1)*((f-g)*w)/E}):(s=u=>{const d=Math.exp(-u*t),m=(u-n)*t+1;return-zm+d*m},r=u=>{const d=Math.exp(-u*t),m=(n-u)*(t*t);return d*m});const o=5/t,l=CB(s,r,o);if(t=Wn(t),isNaN(l))return{stiffness:Ve.stiffness,damping:Ve.damping,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:a*2*Math.sqrt(i*u),duration:t}}}const AB=12;function CB(t,e,n){let i=n;for(let s=1;s<AB;s++)i=i-t(i)/e(i);return i}function Ig(t,e){return t*Math.sqrt(1-e*e)}const RB=["duration","bounce"],IB=["stiffness","damping","mass"];function aT(t,e){return e.some(n=>t[n]!==void 0)}function NB(t){let e={velocity:Ve.velocity,stiffness:Ve.stiffness,damping:Ve.damping,mass:Ve.mass,isResolvedFromDuration:!1,...t};if(!aT(t,IB)&&aT(t,RB))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),s=i*i,r=2*Vi(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ve.mass,stiffness:s,damping:r}}else{const n=SB(t);e={...e,...n,mass:Ve.mass},e.isResolvedFromDuration=!0}return e}function md(t=Ve.visualDuration,e=Ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:s}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:u,mass:d,duration:m,velocity:f,isResolvedFromDuration:g}=NB({...n,velocity:-Qn(n.velocity||0)}),w=f||0,E=u/(2*Math.sqrt(l*d)),T=a-r,v=Qn(Math.sqrt(l/d)),x=Math.abs(T)<5;i||(i=x?Ve.restSpeed.granular:Ve.restSpeed.default),s||(s=x?Ve.restDelta.granular:Ve.restDelta.default);let b;if(E<1){const j=Ig(v,E);b=V=>{const S=Math.exp(-E*v*V);return a-S*((w+E*v*T)/j*Math.sin(j*V)+T*Math.cos(j*V))}}else if(E===1)b=j=>a-Math.exp(-v*j)*(T+(w+v*T)*j);else{const j=v*Math.sqrt(E*E-1);b=V=>{const S=Math.exp(-E*v*V),_=Math.min(j*V,300);return a-S*((w+E*v*T)*Math.sinh(_)+j*T*Math.cosh(_))/j}}const R={calculatedDuration:g&&m||null,next:j=>{const V=b(j);if(g)o.done=j>=m;else{let S=j===0?w:0;E<1&&(S=j===0?Wn(w):CN(b,j,V));const _=Math.abs(S)<=i,C=Math.abs(a-V)<=s;o.done=_&&C}return o.value=o.done?a:V,o},toString:()=>{const j=Math.min(pv(R),fd),V=AN(S=>R.next(j*S).value,j,30);return j+"ms "+V},toTransition:()=>{}};return R}md.applyToOptions=t=>{const e=TB(t,100,md);return t.ease=e.ease,t.duration=Wn(e.duration),t.type="keyframes",t};function Ng({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:d}){const m=t[0],f={done:!1,value:m},g=_=>o!==void 0&&_<o||l!==void 0&&_>l,w=_=>o===void 0?l:l===void 0||Math.abs(o-_)<Math.abs(l-_)?o:l;let E=n*e;const T=m+E,v=a===void 0?T:a(T);v!==T&&(E=v-m);const x=_=>-E*Math.exp(-_/i),b=_=>v+x(_),R=_=>{const C=x(_),I=b(_);f.done=Math.abs(C)<=u,f.value=f.done?v:I};let j,V;const S=_=>{g(f.value)&&(j=_,V=md({keyframes:[f.value,w(f.value)],velocity:CN(b,_,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:_=>{let C=!1;return!V&&j===void 0&&(C=!0,R(_),S(_)),j!==void 0&&_>=j?V.next(_-j):(!C&&R(_),f)}}}function DB(t,e,n){const i=[],s=n||Li.mix||SN,r=t.length-1;for(let a=0;a<r;a++){let o=s(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||gn:e;o=Fc(l,o)}i.push(o)}return i}function kB(t,e,{clamp:n=!0,ease:i,mixer:s}={}){const r=t.length;if(rv(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=DB(e,i,s),l=o.length,u=d=>{if(a&&d<t[0])return e[0];let m=0;if(l>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const f=ic(t[m],t[m+1],d);return o[m](f)};return n?d=>u(Vi(t[0],t[r-1],d)):u}function PB(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=ic(0,e,i);t.push(je(n,1,s))}}function jB(t){const e=[0];return PB(e,t.length-1),e}function OB(t,e){return t.map(n=>n*e)}function MB(t,e){return t.map(()=>e||pN).splice(0,t.length-1)}function Sl({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const s=X9(i)?i.map(eT):eT(i),r={done:!1,value:e[0]},a=OB(n&&n.length===e.length?n:jB(e),t),o=kB(a,e,{ease:Array.isArray(s)?s:MB(e,s)});return{calculatedDuration:t,next:l=>(r.value=o(l),r.done=l>=t,r)}}const VB=t=>t!==null;function gv(t,{repeat:e,repeatType:n="loop"},i,s=1){const r=t.filter(VB),o=s<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const LB={decay:Ng,inertia:Ng,tween:Sl,keyframes:Sl,spring:md};function RN(t){typeof t.type=="string"&&(t.type=LB[t.type])}class yv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const UB=t=>t/100;class vv extends yv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Ht.now()&&this.tick(Ht.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;RN(e);const{type:n=Sl,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=n||Sl;l!==Sl&&typeof o[0]!="number"&&(this.mixKeyframes=Fc(UB,SN(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=pv(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:d,repeat:m,repeatType:f,repeatDelay:g,type:w,onUpdate:E,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,R=i;if(m){const _=Math.min(this.currentTime,s)/o;let C=Math.floor(_),I=_%1;!I&&_>=1&&(I=1),I===1&&C--,C=Math.min(C,m+1),!!(C%2)&&(f==="reverse"?(I=1-I,g&&(I-=g/o)):f==="mirror"&&(R=a)),b=Vi(0,1,I)*o}const j=x?{done:!1,value:d[0]}:R.next(b);r&&(j.value=r(j.value));let{done:V}=j;!x&&l!==null&&(V=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return S&&w!==Ng&&(j.value=gv(d,this.options,T,this.speed)),E&&E(j.value),S&&this.finish(),j}then(e,n){return this.finished.then(e,n)}get duration(){return Qn(this.calculatedDuration)}get time(){return Qn(this.currentTime)}set time(e){var n;e=Wn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ht.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Qn(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:e=wB,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ht.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function BB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ar=t=>t*180/Math.PI,Dg=t=>{const e=ar(Math.atan2(t[1],t[0]));return kg(e)},HB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Dg,rotateZ:Dg,skewX:t=>ar(Math.atan(t[1])),skewY:t=>ar(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},kg=t=>(t=t%360,t<0&&(t+=360),t),oT=Dg,lT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),cT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),FB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lT,scaleY:cT,scale:t=>(lT(t)+cT(t))/2,rotateX:t=>kg(ar(Math.atan2(t[6],t[5]))),rotateY:t=>kg(ar(Math.atan2(-t[2],t[0]))),rotateZ:oT,rotate:oT,skewX:t=>ar(Math.atan(t[4])),skewY:t=>ar(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Pg(t){return t.includes("scale")?1:0}function jg(t,e){if(!t||t==="none")return Pg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(n)i=FB,s=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=HB,s=o}if(!s)return Pg(e);const r=i[e],a=s[1].split(",").map(qB);return typeof r=="function"?r(a):a[r]}const zB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return jg(n,e)};function qB(t){return parseFloat(t.trim())}const xo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bo=new Set(xo),uT=t=>t===vo||t===Q,GB=new Set(["x","y","z"]),$B=xo.filter(t=>!GB.has(t));function XB(t){const e=[];return $B.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const pr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jg(e,"x"),y:(t,{transform:e})=>jg(e,"y")};pr.translateX=pr.x;pr.translateY=pr.y;const gr=new Set;let Og=!1,Mg=!1,Vg=!1;function IN(){if(Mg){const t=Array.from(gr).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const s=XB(i);s.length&&(n.set(i,s),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const s=n.get(i);s&&s.forEach(([r,a])=>{var o;(o=i.getValue(r))==null||o.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Mg=!1,Og=!1,gr.forEach(t=>t.complete(Vg)),gr.clear()}function NN(){gr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Mg=!0)})}function KB(){Vg=!0,NN(),IN(),Vg=!1}class xv{constructor(e,n,i,s,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(gr.add(this),Og||(Og=!0,Ne.read(NN),Ne.resolveKeyframes(IN))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:s}=this;if(e[0]===null){const r=s==null?void 0:s.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(i&&n){const o=i.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),s&&r===void 0&&s.set(e[0])}BB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),gr.delete(this)}cancel(){this.state==="scheduled"&&(gr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YB=t=>t.startsWith("--");function WB(t,e,n){YB(e)?t.style.setProperty(e,n):t.style[e]=n}const QB=av(()=>window.ScrollTimeline!==void 0),JB={};function ZB(t,e){const n=av(t);return()=>JB[e]??n()}const DN=ZB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),tl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,hT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tl([0,.65,.55,1]),circOut:tl([.55,0,1,.45]),backIn:tl([.31,.01,.66,-.59]),backOut:tl([.33,1.53,.69,.99])};function kN(t,e){if(t)return typeof t=="function"?DN()?AN(t,e):"ease-out":gN(t)?tl(t):Array.isArray(t)?t.map(n=>kN(n,e)||hT.easeOut):hT[t]}function e8(t,e,n,{delay:i=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[e]:n};l&&(d.offset=l);const m=kN(o,s);Array.isArray(m)&&(d.easing=m);const f={delay:i,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(d,f)}function PN(t){return typeof t=="function"&&"applyToOptions"in t}function t8({type:t,...e}){return PN(t)&&DN()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class n8 extends yv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:s,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,rv(typeof e.type!="string");const u=t8(e);this.animation=e8(n,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=gv(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):WB(n,i,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Qn(Number(e))}get time(){return Qn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Wn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&QB()?(this.animation.timeline=e,gn):n(this)}}const jN={anticipate:dN,backInOut:hN,circInOut:mN};function i8(t){return t in jN}function s8(t){typeof t.ease=="string"&&i8(t.ease)&&(t.ease=jN[t.ease])}const dT=10;class r8 extends n8{constructor(e){s8(e),RN(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:s,element:r,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new vv({...a,autoplay:!1}),l=Wn(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-dT).value,o.sample(l).value,dT),o.stop()}}const fT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Os.test(t)||t==="0")&&!t.startsWith("url("));function a8(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function o8(t,e,n,i){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=fT(s,e),o=fT(r,e);return!a||!o?!1:a8(t)||(n==="spring"||PN(n))&&i}function bv(t){return sN(t)&&"offsetHeight"in t}const l8=new Set(["opacity","clipPath","filter","transform"]),c8=av(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function u8(t){var u;const{motionValue:e,name:n,repeatDelay:i,repeatType:s,damping:r,type:a}=t;if(!bv((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:o,transformTemplate:l}=e.owner.getProps();return c8()&&n&&l8.has(n)&&(n!=="transform"||!l)&&!o&&!i&&s!=="mirror"&&r!==0&&a!=="inertia"}const h8=40;class d8 extends yv{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:d,...m}){var w;super(),this.stop=()=>{var E,T;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Ht.now();const f={autoplay:e,delay:n,type:i,repeat:s,repeatDelay:r,repeatType:a,name:l,motionValue:u,element:d,...m},g=(d==null?void 0:d.KeyframeResolver)||xv;this.keyframeResolver=new g(o,(E,T,v)=>this.onKeyframesResolved(E,T,f,!v),l,u,d),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,i,s){this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:d}=i;this.resolvedAt=Ht.now(),o8(e,r,a,o)||((Li.instantAnimations||!l)&&(d==null||d(gv(e,i,n))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>h8?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},g=!u&&u8(f)?new r8({...f,element:f.motionValue.owner.current}):new vv(f);g.finished.then(()=>this.notifyFinished()).catch(gn),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),KB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const f8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m8(t){const e=f8.exec(t);if(!e)return[,];const[,n,i,s]=e;return[`--${n??i}`,s]}function ON(t,e,n=1){const[i,s]=m8(t);if(!i)return;const r=window.getComputedStyle(e).getPropertyValue(i);if(r){const a=r.trim();return iN(a)?parseFloat(a):a}return hv(s)?ON(s,e,n+1):s}function _v(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const MN=new Set(["width","height","top","left","right","bottom",...xo]),p8={test:t=>t==="auto",parse:t=>t},VN=t=>e=>e.test(t),LN=[vo,Q,Jn,Ki,aB,rB,p8],mT=t=>LN.find(VN(t));function g8(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||rN(t):!0}const y8=new Set(["brightness","contrast","saturate","opacity"]);function v8(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(dv)||[];if(!i)return t;const s=n.replace(i,"");let r=y8.has(e)?1:0;return i!==n&&(r*=100),e+"("+r+s+")"}const x8=/\b([a-z-]*)\(.*?\)/gu,Lg={...Os,getAnimatableNone:t=>{const e=t.match(x8);return e?e.map(v8).join(" "):t}},pT={...vo,transform:Math.round},b8={rotate:Ki,rotateX:Ki,rotateY:Ki,rotateZ:Ki,scale:Mu,scaleX:Mu,scaleY:Mu,scaleZ:Mu,skew:Ki,skewX:Ki,skewY:Ki,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:sc,originX:nT,originY:nT,originZ:Q},wv={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...b8,zIndex:pT,fillOpacity:sc,strokeOpacity:sc,numOctaves:pT},_8={...wv,color:Xe,backgroundColor:Xe,outlineColor:Xe,fill:Xe,stroke:Xe,borderColor:Xe,borderTopColor:Xe,borderRightColor:Xe,borderBottomColor:Xe,borderLeftColor:Xe,filter:Lg,WebkitFilter:Lg},UN=t=>_8[t];function BN(t,e){let n=UN(t);return n!==Lg&&(n=Os),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const w8=new Set(["auto","none","0"]);function T8(t,e,n){let i=0,s;for(;i<t.length&&!s;){const r=t[i];typeof r=="string"&&!w8.has(r)&&rc(r).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=BN(n,s)}class E8 extends xv{constructor(e,n,i,s,r){super(e,n,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),hv(u))){const d=ON(u,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!MN.has(i)||e.length!==2)return;const[s,r]=e,a=mT(s),o=mT(r);if(a!==o)if(uT(a)&&uT(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else pr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let s=0;s<e.length;s++)(e[s]===null||g8(e[s]))&&i.push(s);i.length&&T8(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pr[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(i,s).jump(s,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,a=i[r];i[r]=pr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function S8(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const s=(n==null?void 0:n[t])??i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const HN=(t,e)=>e&&typeof t=="number"?e.transform(t):t,gT=30,A8=t=>!isNaN(parseFloat(t));class C8{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,s=!0)=>{var a,o;const r=Ht.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ht.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=A8(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ov);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ne.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ht.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gT);return aN(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ya(t,e){return new C8(t,e)}const{schedule:Tv}=yN(queueMicrotask,!1),_n={x:!1,y:!1};function FN(){return _n.x||_n.y}function R8(t){return t==="x"||t==="y"?_n[t]?null:(_n[t]=!0,()=>{_n[t]=!1}):_n.x||_n.y?null:(_n.x=_n.y=!0,()=>{_n.x=_n.y=!1})}function zN(t,e){const n=S8(t),i=new AbortController,s={passive:!0,...e,signal:i.signal};return[n,s,()=>i.abort()]}function yT(t){return!(t.pointerType==="touch"||FN())}function I8(t,e,n={}){const[i,s,r]=zN(t,n),a=o=>{if(!yT(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const d=m=>{yT(m)&&(u(m),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return i.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}const qN=(t,e)=>e?t===e?!0:qN(t,e.parentElement):!1,Ev=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,N8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D8(t){return N8.has(t.tagName)||t.tabIndex!==-1}const hh=new WeakSet;function vT(t){return e=>{e.key==="Enter"&&t(e)}}function qm(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const k8=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=vT(()=>{if(hh.has(n))return;qm(n,"down");const s=vT(()=>{qm(n,"up")}),r=()=>qm(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function xT(t){return Ev(t)&&!FN()}function P8(t,e,n={}){const[i,s,r]=zN(t,n),a=o=>{const l=o.currentTarget;if(!xT(o))return;hh.add(l);const u=e(l,o),d=(g,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",f),hh.has(l)&&hh.delete(l),xT(g)&&typeof u=="function"&&u(g,{success:w})},m=g=>{d(g,l===window||l===document||n.useGlobalTarget||qN(l,g.target))},f=g=>{d(g,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",f,s)};return i.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),bv(o)&&(o.addEventListener("focus",u=>k8(u,s)),!D8(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function GN(t){return sN(t)&&"ownerSVGElement"in t}function j8(t){return GN(t)&&t.tagName==="svg"}const At=t=>!!(t&&t.getVelocity),O8=[...LN,Xe,Os],M8=t=>O8.find(VN(t)),Sv=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class V8 extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,s=bv(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function L8({children:t,isPresent:e,anchorX:n,root:i}){const s=D.useId(),r=D.useRef(null),a=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=D.useContext(Sv);return D.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:m,right:f}=a.current;if(e||!r.current||!l||!u)return;const g=n==="left"?`left: ${m}`:`right: ${f}`;r.current.dataset.motionPopId=s;const w=document.createElement("style");o&&(w.nonce=o);const E=i??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{E.removeChild(w),E.contains(w)&&E.removeChild(w)}},[e]),h.jsx(V8,{isPresent:e,childRef:r,sizeRef:a,children:D.cloneElement(t,{ref:r})})}const U8=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:a,anchorX:o,root:l})=>{const u=tv(B8),d=D.useId();let m=!0,f=D.useMemo(()=>(m=!1,{id:d,initial:e,isPresent:n,custom:s,onExitComplete:g=>{u.set(g,!0);for(const w of u.values())if(!w)return;i&&i()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,i]);return r&&m&&(f={...f}),D.useMemo(()=>{u.forEach((g,w)=>u.set(w,!1))},[n]),D.useEffect(()=>{!n&&!u.size&&i&&i()},[n]),a==="popLayout"&&(t=h.jsx(L8,{isPresent:n,anchorX:o,root:l,children:t})),h.jsx(pf.Provider,{value:f,children:t})};function B8(){return new Map}function $N(t=!0){const e=D.useContext(pf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:s}=e,r=D.useId();D.useEffect(()=>{if(t)return s(r)},[t]);const a=D.useCallback(()=>t&&i&&i(r),[r,i,t]);return!n&&i?[!1,a]:[!0]}const Vu=t=>t.key||"";function bT(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const Ui=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:a=!1,anchorX:o="left",root:l})=>{const[u,d]=$N(a),m=D.useMemo(()=>bT(t),[t]),f=a&&!u?[]:m.map(Vu),g=D.useRef(!0),w=D.useRef(m),E=tv(()=>new Map),[T,v]=D.useState(m),[x,b]=D.useState(m);nN(()=>{g.current=!1,w.current=m;for(let V=0;V<x.length;V++){const S=Vu(x[V]);f.includes(S)?E.delete(S):E.get(S)!==!0&&E.set(S,!1)}},[x,f.length,f.join("-")]);const R=[];if(m!==T){let V=[...m];for(let S=0;S<x.length;S++){const _=x[S],C=Vu(_);f.includes(C)||(V.splice(S,0,_),R.push(_))}return r==="wait"&&R.length&&(V=R),b(bT(V)),v(m),null}const{forceRender:j}=D.useContext(ev);return h.jsx(h.Fragment,{children:x.map(V=>{const S=Vu(V),_=a&&!u?!1:m===x||f.includes(S),C=()=>{if(E.has(S))E.set(S,!0);else return;let I=!0;E.forEach(k=>{k||(I=!1)}),I&&(j==null||j(),b(w.current),a&&(d==null||d()),i&&i())};return h.jsx(U8,{isPresent:_,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:_?void 0:C,anchorX:o,children:V},S)})})},XN=D.createContext({strict:!1}),_T={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wa={};for(const t in _T)Wa[t]={isEnabled:e=>_T[t].some(n=>!!e[n])};function H8(t){for(const e in t)Wa[e]={...Wa[e],...t[e]}}const F8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||F8.has(t)}let KN=t=>!pd(t);function z8(t){typeof t=="function"&&(KN=e=>e.startsWith("on")?!pd(e):t(e))}try{z8(require("@emotion/is-prop-valid").default)}catch{}function q8(t,e,n){const i={};for(const s in t)s==="values"&&typeof t.values=="object"||(KN(s)||n===!0&&pd(s)||!e&&!pd(s)||t.draggable&&s.startsWith("onDrag"))&&(i[s]=t[s]);return i}function G8(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const gf=D.createContext({});function yf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ac(t){return typeof t=="string"||Array.isArray(t)}const Av=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cv=["initial",...Av];function vf(t){return yf(t.animate)||Cv.some(e=>ac(t[e]))}function YN(t){return!!(vf(t)||t.variants)}function $8(t,e){if(vf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||ac(n)?n:void 0,animate:ac(i)?i:void 0}}return t.inherit!==!1?e:{}}function X8(t){const{initial:e,animate:n}=$8(t,D.useContext(gf));return D.useMemo(()=>({initial:e,animate:n}),[wT(e),wT(n)])}function wT(t){return Array.isArray(t)?t.join(" "):t}const K8=Symbol.for("motionComponentSymbol");function ga(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Y8(t,e,n){return D.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ga(n)&&(n.current=i))},[e])}const Rv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),W8="framerAppearId",WN="data-"+Rv(W8),QN=D.createContext({});function Q8(t,e,n,i,s){var E,T;const{visualElement:r}=D.useContext(gf),a=D.useContext(XN),o=D.useContext(pf),l=D.useContext(Sv).reducedMotion,u=D.useRef(null);i=i||a.renderer,!u.current&&i&&(u.current=i(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,m=D.useContext(QN);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&J8(u.current,n,s,m);const f=D.useRef(!1);D.useInsertionEffect(()=>{d&&f.current&&d.update(n,o)});const g=n[WN],w=D.useRef(!!g&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,g))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,g)));return nN(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Tv.render(d.render),w.current&&d.animationState&&d.animationState.animateChanges())}),D.useEffect(()=>{d&&(!w.current&&d.animationState&&d.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,g)}),w.current=!1))}),d}function J8(t,e,n,i){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:JN(t.parent)),t.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&ga(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:l,layoutRoot:u})}function JN(t){if(t)return t.options.allowProjection!==!1?t.projection:JN(t.parent)}function Z8({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:s}){t&&H8(t);function r(o,l){let u;const d={...D.useContext(Sv),...o,layoutId:e7(o)},{isStatic:m}=d,f=X8(o),g=i(o,m);if(!m&&nv){t7();const w=n7(d);u=w.MeasureLayout,f.visualElement=Q8(s,g,d,e,w.ProjectionNode)}return h.jsxs(gf.Provider,{value:f,children:[u&&f.visualElement?h.jsx(u,{visualElement:f.visualElement,...d}):null,n(s,o,Y8(g,f.visualElement,l),g,m,f.visualElement)]})}r.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const a=D.forwardRef(r);return a[K8]=s,a}function e7({layoutId:t}){const e=D.useContext(ev).id;return e&&t!==void 0?e+"-"+t:t}function t7(t,e){D.useContext(XN).strict}function n7(t){const{drag:e,layout:n}=Wa;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const oc={};function i7(t){for(const e in t)oc[e]=t[e],uv(e)&&(oc[e].isCSSVariable=!0)}function ZN(t,{layout:e,layoutId:n}){return bo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!oc[t]||t==="opacity")}const s7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r7=xo.length;function a7(t,e,n){let i="",s=!0;for(let r=0;r<r7;r++){const a=xo[r],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=HN(o,wv[a]);if(!l){s=!1;const d=s7[a]||a;i+=`${d}(${u}) `}n&&(e[a]=u)}}return i=i.trim(),n?i=n(e,s?"":i):s&&(i="none"),i}function Iv(t,e,n){const{style:i,vars:s,transformOrigin:r}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(bo.has(l)){a=!0;continue}else if(uv(l)){s[l]=u;continue}else{const d=HN(u,wv[l]);l.startsWith("origin")?(o=!0,r[l]=d):i[l]=d}}if(e.transform||(a||n?i.transform=a7(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=r;i.transformOrigin=`${l} ${u} ${d}`}}const Nv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function e2(t,e,n){for(const i in e)!At(e[i])&&!ZN(i,n)&&(t[i]=e[i])}function o7({transformTemplate:t},e){return D.useMemo(()=>{const n=Nv();return Iv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function l7(t,e){const n=t.style||{},i={};return e2(i,n,t),Object.assign(i,o7(t,e)),i}function c7(t,e){const n={},i=l7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const u7={offset:"stroke-dashoffset",array:"stroke-dasharray"},h7={offset:"strokeDashoffset",array:"strokeDasharray"};function d7(t,e,n=1,i=0,s=!0){t.pathLength=1;const r=s?u7:h7;t[r.offset]=Q.transform(-i);const a=Q.transform(e),o=Q.transform(n);t[r.array]=`${a} ${o}`}function t2(t,{attrX:e,attrY:n,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:a=0,...o},l,u,d){if(Iv(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:f}=t;m.transform&&(f.transform=m.transform,delete m.transform),(f.transform||m.transformOrigin)&&(f.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),s!==void 0&&d7(m,s,r,a,!1)}const n2=()=>({...Nv(),attrs:{}}),i2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function f7(t,e,n,i){const s=D.useMemo(()=>{const r=n2();return t2(r,e,i2(i),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};e2(r,t.style,t),s.style={...r,...s.style}}return s}const m7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dv(t){return typeof t!="string"||t.includes("-")?!1:!!(m7.indexOf(t)>-1||/[A-Z]/u.test(t))}function p7(t=!1){return(n,i,s,{latestValues:r},a)=>{const l=(Dv(n)?f7:c7)(i,r,a,n),u=q8(i,typeof n=="string",t),d=n!==D.Fragment?{...u,...l,ref:s}:{},{children:m}=i,f=D.useMemo(()=>At(m)?m.get():m,[m]);return D.createElement(n,{...d,children:f})}}function TT(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function kv(t,e,n,i){if(typeof e=="function"){const[s,r]=TT(i);e=e(n!==void 0?n:t.custom,s,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,r]=TT(i);e=e(n!==void 0?n:t.custom,s,r)}return e}function dh(t){return At(t)?t.get():t}function g7({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,s){return{latestValues:y7(n,i,s,t),renderState:e()}}const s2=t=>(e,n)=>{const i=D.useContext(gf),s=D.useContext(pf),r=()=>g7(t,e,i,s);return n?r():tv(r)};function y7(t,e,n,i){const s={},r=i(t,{});for(const f in r)s[f]=dh(r[f]);let{initial:a,animate:o}=t;const l=vf(t),u=YN(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const m=d?o:a;if(m&&typeof m!="boolean"&&!yf(m)){const f=Array.isArray(m)?m:[m];for(let g=0;g<f.length;g++){const w=kv(t,f[g]);if(w){const{transitionEnd:E,transition:T,...v}=w;for(const x in v){let b=v[x];if(Array.isArray(b)){const R=d?b.length-1:0;b=b[R]}b!==null&&(s[x]=b)}for(const x in E)s[x]=E[x]}}}return s}function Pv(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(At(i[a])||e.style&&At(e.style[a])||ZN(a,t)||((r=n==null?void 0:n.getValue(a))==null?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}const v7={useVisualState:s2({scrapeMotionValuesFromProps:Pv,createRenderState:Nv})};function r2(t,e,n){const i=Pv(t,e,n);for(const s in t)if(At(t[s])||At(e[s])){const r=xo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=t[s]}return i}const x7={useVisualState:s2({scrapeMotionValuesFromProps:r2,createRenderState:n2})};function b7(t,e){return function(i,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...Dv(i)?x7:v7,preloadedFeatures:t,useRender:p7(s),createVisualElement:e,Component:i};return Z8(a)}}function lc(t,e,n){const i=t.getProps();return kv(i,e,n!==void 0?n:i.custom,t)}const Ug=t=>Array.isArray(t);function _7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ya(n))}function w7(t){return Ug(t)?t[t.length-1]||0:t}function T7(t,e){const n=lc(t,e);let{transitionEnd:i={},transition:s={},...r}=n||{};r={...r,...i};for(const a in r){const o=w7(r[a]);_7(t,a,o)}}function E7(t){return!!(At(t)&&t.add)}function Bg(t,e){const n=t.getValue("willChange");if(E7(n))return n.add(e);if(!n&&Li.WillChange){const i=new Li.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function a2(t){return t.props[WN]}const S7=t=>t!==null;function A7(t,{repeat:e,repeatType:n="loop"},i){const s=t.filter(S7),r=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[r]}const C7={type:"spring",stiffness:500,damping:25,restSpeed:10},R7=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),I7={type:"keyframes",duration:.8},N7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},D7=(t,{keyframes:e})=>e.length>2?I7:bo.has(t)?t.startsWith("scale")?R7(e[1]):C7:N7;function k7({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const jv=(t,e,n,i={},s,r)=>a=>{const o=_v(i,t)||{},l=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Wn(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:f=>{e.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:r?void 0:s};k7(o)||Object.assign(d,D7(t,d)),d.duration&&(d.duration=Wn(d.duration)),d.repeatDelay&&(d.repeatDelay=Wn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(m=!0)),(Li.instantAnimations||Li.skipAnimations)&&(m=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,m&&!r&&e.get()!==void 0){const f=A7(d.keyframes,o);if(f!==void 0){Ne.update(()=>{d.onUpdate(f),d.onComplete()});return}}return o.isSync?new vv(d):new d8(d)};function P7({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function o2(t,e,{delay:n=0,transitionOverride:i,type:s}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:a,...o}=e;i&&(r=i);const l=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const d in o){const m=t.getValue(d,t.latestValues[d]??null),f=o[d];if(f===void 0||u&&P7(u,d))continue;const g={delay:n,..._v(r||{},d)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(f)&&f===w&&!g.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const v=a2(t);if(v){const x=window.MotionHandoffAnimation(v,d,Ne);x!==null&&(g.startTime=x,E=!0)}}Bg(t,d),m.start(jv(d,m,f,t.shouldReduceMotion&&MN.has(d)?{type:!1}:g,t,E));const T=m.animation;T&&l.push(T)}return a&&Promise.all(l).then(()=>{Ne.update(()=>{a&&T7(t,a)})}),l}function Hg(t,e,n={}){var l;const i=lc(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const r=i?()=>Promise.all(o2(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:f}=s;return j7(t,e,u,d,m,f,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[u,d]=o==="beforeChildren"?[r,a]:[a,r];return u().then(()=>d())}else return Promise.all([r(),a(n.delay)])}function j7(t,e,n=0,i=0,s=0,r=1,a){const o=[],l=t.variantChildren.size,u=(l-1)*s,d=typeof i=="function",m=d?f=>i(f,l):r===1?(f=0)=>f*s:(f=0)=>u-f*s;return Array.from(t.variantChildren).sort(O7).forEach((f,g)=>{f.notify("AnimationStart",e),o.push(Hg(f,e,{...a,delay:n+(d?0:i)+m(g)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(o)}function O7(t,e){return t.sortNodePosition(e)}function M7(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const s=e.map(r=>Hg(t,r,n));i=Promise.all(s)}else if(typeof e=="string")i=Hg(t,e,n);else{const s=typeof e=="function"?lc(t,e,n.custom):e;i=Promise.all(o2(t,s,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function l2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const V7=Cv.length;function c2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?c2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<V7;n++){const i=Cv[n],s=t.props[i];(ac(s)||s===!1)&&(e[i]=s)}return e}const L7=[...Av].reverse(),U7=Av.length;function B7(t){return e=>Promise.all(e.map(({animation:n,options:i})=>M7(t,n,i)))}function H7(t){let e=B7(t),n=ET(),i=!0;const s=l=>(u,d)=>{var f;const m=lc(t,d,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(m){const{transition:g,transitionEnd:w,...E}=m;u={...u,...E,...w}}return u};function r(l){e=l(t)}function a(l){const{props:u}=t,d=c2(t.parent)||{},m=[],f=new Set;let g={},w=1/0;for(let T=0;T<U7;T++){const v=L7[T],x=n[v],b=u[v]!==void 0?u[v]:d[v],R=ac(b),j=v===l?x.isActive:null;j===!1&&(w=T);let V=b===d[v]&&b!==u[v]&&R;if(V&&i&&t.manuallyAnimateOnMount&&(V=!1),x.protectedKeys={...g},!x.isActive&&j===null||!b&&!x.prevProp||yf(b)||typeof b=="boolean")continue;const S=F7(x.prevProp,b);let _=S||v===l&&x.isActive&&!V&&R||T>w&&R,C=!1;const I=Array.isArray(b)?b:[b];let k=I.reduce(s(v),{});j===!1&&(k={});const{prevResolvedValues:P={}}=x,N={...P,...k},ke=$=>{_=!0,f.has($)&&(C=!0,f.delete($)),x.needsAnimating[$]=!0;const X=t.getValue($);X&&(X.liveStyle=!1)};for(const $ in N){const X=k[$],he=P[$];if(g.hasOwnProperty($))continue;let _e=!1;Ug(X)&&Ug(he)?_e=!l2(X,he):_e=X!==he,_e?X!=null?ke($):f.add($):X!==void 0&&f.has($)?ke($):x.protectedKeys[$]=!0}x.prevProp=b,x.prevResolvedValues=k,x.isActive&&(g={...g,...k}),i&&t.blockInitialAnimation&&(_=!1),_&&(!(V&&S)||C)&&m.push(...I.map($=>({animation:$,options:{type:v}})))}if(f.size){const T={};if(typeof u.initial!="boolean"){const v=lc(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(T.transition=v.transition)}f.forEach(v=>{const x=t.getBaseTarget(v),b=t.getValue(v);b&&(b.liveStyle=!0),T[v]=x??null}),m.push({animation:T})}let E=!!m.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),i=!1,E?e(m):Promise.resolve()}function o(l,u){var m;if(n[l].isActive===u)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=a(l);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>n,reset:()=>{n=ET(),i=!0}}}function F7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!l2(e,t):!1}function Ws(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ET(){return{animate:Ws(!0),whileInView:Ws(),whileHover:Ws(),whileTap:Ws(),whileDrag:Ws(),whileFocus:Ws(),exit:Ws()}}class qs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class z7 extends qs{constructor(e){super(e),e.animationState||(e.animationState=H7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let q7=0;class G7 extends qs{constructor(){super(...arguments),this.id=q7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const $7={animation:{Feature:z7},exit:{Feature:G7}};function cc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Gc(t){return{point:{x:t.pageX,y:t.pageY}}}const X7=t=>e=>Ev(e)&&t(e,Gc(e));function Al(t,e,n,i){return cc(t,e,X7(n),i)}function u2({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function K7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Y7(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}const h2=1e-4,W7=1-h2,Q7=1+h2,d2=.01,J7=0-d2,Z7=0+d2;function kt(t){return t.max-t.min}function eH(t,e,n){return Math.abs(t-e)<=n}function ST(t,e,n,i=.5){t.origin=i,t.originPoint=je(e.min,e.max,t.origin),t.scale=kt(n)/kt(e),t.translate=je(n.min,n.max,t.origin)-t.originPoint,(t.scale>=W7&&t.scale<=Q7||isNaN(t.scale))&&(t.scale=1),(t.translate>=J7&&t.translate<=Z7||isNaN(t.translate))&&(t.translate=0)}function Cl(t,e,n,i){ST(t.x,e.x,n.x,i?i.originX:void 0),ST(t.y,e.y,n.y,i?i.originY:void 0)}function AT(t,e,n){t.min=n.min+e.min,t.max=t.min+kt(e)}function tH(t,e,n){AT(t.x,e.x,n.x),AT(t.y,e.y,n.y)}function CT(t,e,n){t.min=e.min-n.min,t.max=t.min+kt(e)}function Rl(t,e,n){CT(t.x,e.x,n.x),CT(t.y,e.y,n.y)}const RT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ya=()=>({x:RT(),y:RT()}),IT=()=>({min:0,max:0}),He=()=>({x:IT(),y:IT()});function an(t){return[t("x"),t("y")]}function Gm(t){return t===void 0||t===1}function Fg({scale:t,scaleX:e,scaleY:n}){return!Gm(t)||!Gm(e)||!Gm(n)}function tr(t){return Fg(t)||f2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function f2(t){return NT(t.x)||NT(t.y)}function NT(t){return t&&t!=="0%"}function gd(t,e,n){const i=t-n,s=e*i;return n+s}function DT(t,e,n,i,s){return s!==void 0&&(t=gd(t,s,i)),gd(t,n,i)+e}function zg(t,e=0,n=1,i,s){t.min=DT(t.min,e,n,i,s),t.max=DT(t.max,e,n,i,s)}function m2(t,{x:e,y:n}){zg(t.x,e.translate,e.scale,e.originPoint),zg(t.y,n.translate,n.scale,n.originPoint)}const kT=.999999999999,PT=1.0000000000001;function nH(t,e,n,i=!1){const s=n.length;if(!s)return;e.x=e.y=1;let r,a;for(let o=0;o<s;o++){r=n[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&xa(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,m2(t,a)),i&&tr(r.latestValues)&&xa(t,r.latestValues))}e.x<PT&&e.x>kT&&(e.x=1),e.y<PT&&e.y>kT&&(e.y=1)}function va(t,e){t.min=t.min+e,t.max=t.max+e}function jT(t,e,n,i,s=.5){const r=je(t.min,t.max,s);zg(t,e,n,r,i)}function xa(t,e){jT(t.x,e.x,e.scaleX,e.scale,e.originX),jT(t.y,e.y,e.scaleY,e.scale,e.originY)}function p2(t,e){return u2(Y7(t.getBoundingClientRect(),e))}function iH(t,e,n){const i=p2(t,n),{scroll:s}=e;return s&&(va(i.x,s.offset.x),va(i.y,s.offset.y)),i}const g2=({current:t})=>t?t.ownerDocument.defaultView:null,OT=(t,e)=>Math.abs(t-e);function sH(t,e){const n=OT(t.x,e.x),i=OT(t.y,e.y);return Math.sqrt(n**2+i**2)}class y2{constructor(e,n,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Xm(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,w=sH(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!w)return;const{point:E}=f,{timestamp:T}=ut;this.history.push({...E,timestamp:T});const{onStart:v,onMove:x}=this.handlers;g||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$m(g,this.transformPagePoint),Ne.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:w,onSessionEnd:E,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Xm(f.type==="pointercancel"?this.lastMoveEventInfo:$m(g,this.transformPagePoint),this.history);this.startEvent&&w&&w(f,v),E&&E(f,v)},!Ev(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=s||window;const o=Gc(e),l=$m(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=ut;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(e,Xm(l,this.history)),this.removeListeners=Fc(Al(this.contextWindow,"pointermove",this.handlePointerMove),Al(this.contextWindow,"pointerup",this.handlePointerUp),Al(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),js(this.updatePoint)}}function $m(t,e){return e?{point:e(t.point)}:t}function MT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xm({point:t},e){return{point:t,delta:MT(t,v2(e)),offset:MT(t,rH(e)),velocity:aH(e,.1)}}function rH(t){return t[0]}function v2(t){return t[t.length-1]}function aH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const s=v2(t);for(;n>=0&&(i=t[n],!(s.timestamp-i.timestamp>Wn(e)));)n--;if(!i)return{x:0,y:0};const r=Qn(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function oH(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?je(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?je(n,t,i.max):Math.min(t,n)),t}function VT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function lH(t,{top:e,left:n,bottom:i,right:s}){return{x:VT(t.x,n,s),y:VT(t.y,e,i)}}function LT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function cH(t,e){return{x:LT(t.x,e.x),y:LT(t.y,e.y)}}function uH(t,e){let n=.5;const i=kt(t),s=kt(e);return s>i?n=ic(e.min,e.max-i,t.min):i>s&&(n=ic(t.min,t.max-s,e.min)),Vi(0,1,n)}function hH(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const qg=.35;function dH(t=qg){return t===!1?t=0:t===!0&&(t=qg),{x:UT(t,"left","right"),y:UT(t,"top","bottom")}}function UT(t,e,n){return{min:BT(t,e),max:BT(t,n)}}function BT(t,e){return typeof t=="number"?t:t[e]||0}const fH=new WeakMap;class mH{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gc(m).point)},a=(m,f)=>{const{drag:g,dragPropagation:w,onDragStart:E}=this.getProps();if(g&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R8(g),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),an(v=>{let x=this.getAxisMotionValue(v).get()||0;if(Jn.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const R=b.layout.layoutBox[v];R&&(x=kt(R)*(parseFloat(x)/100))}}this.originPoint[v]=x}),E&&Ne.postRender(()=>E(m,f)),Bg(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f;const{dragPropagation:g,dragDirectionLock:w,onDirectionLock:E,onDrag:T}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=f;if(w&&this.currentDirection===null){this.currentDirection=pH(v),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),T&&T(m,f)},l=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f,this.stop(m,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>an(m=>{var f;return this.getAnimationState(m)==="paused"&&((f=this.getAxisMotionValue(m).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new y2(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:i,contextWindow:g2(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,s=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Ne.postRender(()=>o(i,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:s}=this.getProps();if(!i||!Lu(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=oH(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;e&&ga(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=lH(i.layoutBox,e):this.constraints=!1,this.elastic=dH(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&an(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=hH(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ga(e))return!1;const i=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=iH(i,s.root,this.visualElement.getTransformPagePoint());let a=cH(s.layout.layoutBox,r);if(n){const o=n(K7(a));this.hasMutatedConstraints=!!o,o&&(a=u2(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=an(d=>{if(!Lu(d,n,this.currentDirection))return;let m=l&&l[d]||{};a&&(m={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,w={type:"inertia",velocity:i?e[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...r,...m};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Bg(this.visualElement,e),i.start(jv(e,i,0,n,this.visualElement,!1))}stopAnimation(){an(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){an(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),s=i[n];return s||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){an(n=>{const{drag:i}=this.getProps();if(!Lu(n,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[n];r.set(e[n]-je(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ga(n)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};an(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=uH({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),an(a=>{if(!Lu(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(je(l,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;fH.set(this.visualElement,this);const e=this.visualElement.current,n=Al(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();ga(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ne.read(i);const a=cc(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(an(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=l[d].translate,m.set(m.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),n(),r(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=qg,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function Lu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pH(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gH extends qs{constructor(e){super(e),this.removeGroupControls=gn,this.removeListeners=gn,this.controls=new mH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const HT=t=>(e,n)=>{t&&Ne.postRender(()=>t(e,n))};class yH extends qs{constructor(){super(...arguments),this.removePointerDownListener=gn}onPointerDown(e){this.session=new y2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:g2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:HT(e),onStart:HT(n),onMove:i,onEnd:(r,a)=>{delete this.session,s&&Ne.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=Al(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=FT(t,e.target.x),i=FT(t,e.target.y);return`${n}% ${i}%`}},vH={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,s=Os.parse(t);if(s.length>5)return i;const r=Os.createTransformer(t),a=typeof s[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const u=je(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),r(s)}};let zT=!1;class xH extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=e;i7(bH),r&&(n.group&&n.group.add(r),i&&i.register&&s&&i.register(r),zT&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),fh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:s,isPresent:r}=this.props,{projection:a}=i;return a&&(a.isPresent=r,zT=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||Ne.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Tv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x2(t){const[e,n]=$N(),i=D.useContext(ev);return h.jsx(xH,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(QN),isPresent:e,safeToRemove:n})}const bH={borderRadius:{...qo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qo,borderTopRightRadius:qo,borderBottomLeftRadius:qo,borderBottomRightRadius:qo,boxShadow:vH};function _H(t,e,n){const i=At(t)?t:Ya(t);return i.start(jv("",i,e,n)),i.animation}const wH=(t,e)=>t.depth-e.depth;class TH{constructor(){this.children=[],this.isDirty=!1}add(e){iv(this.children,e),this.isDirty=!0}remove(e){sv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wH),this.isDirty=!1,this.children.forEach(e)}}function EH(t,e){const n=Ht.now(),i=({timestamp:s})=>{const r=s-n;r>=e&&(js(i),t(r-e))};return Ne.setup(i,!0),()=>js(i)}const b2=["TopLeft","TopRight","BottomLeft","BottomRight"],SH=b2.length,qT=t=>typeof t=="string"?parseFloat(t):t,GT=t=>typeof t=="number"||Q.test(t);function AH(t,e,n,i,s,r){s?(t.opacity=je(0,n.opacity??1,CH(i)),t.opacityExit=je(e.opacity??1,0,RH(i))):r&&(t.opacity=je(e.opacity??1,n.opacity??1,i));for(let a=0;a<SH;a++){const o=`border${b2[a]}Radius`;let l=$T(e,o),u=$T(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||GT(l)===GT(u)?(t[o]=Math.max(je(qT(l),qT(u),i),0),(Jn.test(u)||Jn.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=je(e.rotate||0,n.rotate||0,i))}function $T(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const CH=_2(0,.5,fN),RH=_2(.5,.95,gn);function _2(t,e,n){return i=>i<t?0:i>e?1:n(ic(t,e,i))}function XT(t,e){t.min=e.min,t.max=e.max}function rn(t,e){XT(t.x,e.x),XT(t.y,e.y)}function KT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function YT(t,e,n,i,s){return t-=e,t=gd(t,1/n,i),s!==void 0&&(t=gd(t,1/s,i)),t}function IH(t,e=0,n=1,i=.5,s,r=t,a=t){if(Jn.test(e)&&(e=parseFloat(e),e=je(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=je(r.min,r.max,i);t===r&&(o-=e),t.min=YT(t.min,e,n,o,s),t.max=YT(t.max,e,n,o,s)}function WT(t,e,[n,i,s],r,a){IH(t,e[n],e[i],e[s],e.scale,r,a)}const NH=["x","scaleX","originX"],DH=["y","scaleY","originY"];function QT(t,e,n,i){WT(t.x,e,NH,n?n.x:void 0,i?i.x:void 0),WT(t.y,e,DH,n?n.y:void 0,i?i.y:void 0)}function JT(t){return t.translate===0&&t.scale===1}function w2(t){return JT(t.x)&&JT(t.y)}function ZT(t,e){return t.min===e.min&&t.max===e.max}function kH(t,e){return ZT(t.x,e.x)&&ZT(t.y,e.y)}function eE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function T2(t,e){return eE(t.x,e.x)&&eE(t.y,e.y)}function tE(t){return kt(t.x)/kt(t.y)}function nE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class PH{constructor(){this.members=[]}add(e){iv(this.members,e),e.scheduleRender()}remove(e){if(sv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let i;for(let s=n;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jH(t,e,n){let i="";const s=t.x.translate/e.x,r=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||r||a)&&(i=`translate3d(${s}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:f,skewX:g,skewY:w}=n;u&&(i=`perspective(${u}px) ${i}`),d&&(i+=`rotate(${d}deg) `),m&&(i+=`rotateX(${m}deg) `),f&&(i+=`rotateY(${f}deg) `),g&&(i+=`skewX(${g}deg) `),w&&(i+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const Km=["","X","Y","Z"],OH=1e3;let MH=0;function Ym(t,e,n,i){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),i&&(i[t]=0))}function E2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=a2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ne,!(s||r))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&E2(i)}function S2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=MH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(UH),this.nodes.forEach(zH),this.nodes.forEach(qH),this.nodes.forEach(BH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new TH)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ov),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=GN(a)&&!j8(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let d,m=0;const f=()=>this.root.updateBlockedByResize=!1;Ne.read(()=>{m=window.innerWidth}),t(a,()=>{const g=window.innerWidth;g!==m&&(m=g,this.root.updateBlockedByResize=!0,d&&d(),d=EH(f,250),fh.hasAnimatedSinceResize&&(fh.hasAnimatedSinceResize=!1,this.nodes.forEach(rE)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||YH,{onLayoutAnimationStart:E,onLayoutAnimationComplete:T}=u.getProps(),v=!this.targetLayout||!T2(this.targetLayout,g),x=!m&&f;if(this.options.layoutRoot||this.resumeFrom||x||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={..._v(w,"layout"),onPlay:E,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,x)}else m||rE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),js(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GH),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&E2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(iE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(sE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(FH),this.nodes.forEach(VH),this.nodes.forEach(LH)):this.nodes.forEach(sE),this.clearAllSnapshots();const o=Ht.now();ut.delta=Vi(0,1e3/60,o-ut.timestamp),ut.timestamp=o,ut.isProcessing=!0,Um.update.process(ut),Um.preRender.process(ut),Um.render.process(ut),ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Tv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HH),this.sharedNodes.forEach($H)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kt(this.snapshot.measuredBox.x)&&!kt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!w2(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||tr(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),WH(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return He();const o=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(QH))){const{scroll:d}=this.root;d&&(va(o.x,d.offset.x),va(o.y,d.offset.y))}return o}removeElementScroll(a){var l;const o=He();if(rn(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:f}=d;d!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&rn(o,a),va(o.x,m.offset.x),va(o.y,m.offset.y))}return o}applyTransform(a,o=!1){const l=He();rn(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xa(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),tr(d.latestValues)&&xa(l,d.latestValues)}return tr(this.latestValues)&&xa(l,this.latestValues),l}removeTransform(a){const o=He();rn(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!tr(u.latestValues))continue;Fg(u.latestValues)&&u.updateSnapshot();const d=He(),m=u.measurePageBox();rn(d,m),QT(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return tr(this.latestValues)&&QT(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=ut.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),Rl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rn(this.target,this.layout.layoutBox),m2(this.target,this.targetDelta)):rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),Rl(this.relativeTargetOrigin,this.target,g.target),rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Fg(this.parent.latestValues)||f2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ut.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;rn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;nH(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=He());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KT(this.prevProjectionDelta.x,this.projectionDelta.x),KT(this.prevProjectionDelta.y,this.projectionDelta.y)),Cl(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==f||!nE(this.projectionDelta.x,this.prevProjectionDelta.x)||!nE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ya(),this.projectionDelta=ya(),this.projectionDeltaWithTransform=ya()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},m=ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=He(),g=l?l.source:void 0,w=this.layout?this.layout.source:void 0,E=g!==w,T=this.getStack(),v=!T||T.members.length<=1,x=!!(E&&!v&&this.options.crossfade===!0&&!this.path.some(KH));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const j=R/1e3;aE(m.x,a.x,j),aE(m.y,a.y,j),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XH(this.relativeTarget,this.relativeTargetOrigin,f,j),b&&kH(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=He()),rn(b,this.relativeTarget)),E&&(this.animationValues=d,AH(d,u,this.latestValues,j,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(js(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ne.update(()=>{fh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ya(0)),this.currentAnimation=_H(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&A2(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||He();const m=kt(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+m;const f=kt(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}rn(o,l),xa(o,d),Cl(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new PH),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Ym("z",a,u,this.animationValues);for(let d=0;d<Km.length;d++)Ym(`rotate${Km[d]}`,a,u,this.animationValues),Ym(`skew${Km[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dh(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!tr(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=jH(this.projectionDeltaWithTransform,this.treeScale,d);l&&(m=l(d,m)),a.transform=m;const{x:f,y:g}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const w in oc){if(d[w]===void 0)continue;const{correct:E,applyTo:T,isCSSVariable:v}=oc[w],x=m==="none"?d[w]:E(d[w],u);if(T){const b=T.length;for(let R=0;R<b;R++)a[T[R]]=x}else v?this.options.visualElement.renderState.vars[w]=x:a[w]=x}this.options.layoutId&&(a.pointerEvents=u===this?dh(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(iE),this.root.sharedNodes.clear()}}}function VH(t){t.updateLayout()}function LH(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?an(m=>{const f=a?e.measuredBox[m]:e.layoutBox[m],g=kt(f);f.min=i[m].min,f.max=f.min+g}):A2(r,e.layoutBox,i)&&an(m=>{const f=a?e.measuredBox[m]:e.layoutBox[m],g=kt(i[m]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+g)});const o=ya();Cl(o,i,e.layoutBox);const l=ya();a?Cl(l,t.applyTransform(s,!0),e.measuredBox):Cl(l,i,e.layoutBox);const u=!w2(o);let d=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:g}=m;if(f&&g){const w=He();Rl(w,e.layoutBox,f.layoutBox);const E=He();Rl(E,i,g.layoutBox),T2(w,E)||(d=!0),m.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=w,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function UH(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HH(t){t.clearSnapshot()}function iE(t){t.clearMeasurements()}function sE(t){t.isLayoutDirty=!1}function FH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zH(t){t.resolveTargetDelta()}function qH(t){t.calcProjection()}function GH(t){t.resetSkewAndRotation()}function $H(t){t.removeLeadSnapshot()}function aE(t,e,n){t.translate=je(e.translate,0,n),t.scale=je(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oE(t,e,n,i){t.min=je(e.min,n.min,i),t.max=je(e.max,n.max,i)}function XH(t,e,n,i){oE(t.x,e.x,n.x,i),oE(t.y,e.y,n.y,i)}function KH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YH={duration:.45,ease:[.4,0,.1,1]},lE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cE=lE("applewebkit/")&&!lE("chrome/")?Math.round:gn;function uE(t){t.min=cE(t.min),t.max=cE(t.max)}function WH(t){uE(t.x),uE(t.y)}function A2(t,e,n){return t==="position"||t==="preserve-aspect"&&!eH(tE(e),tE(n),.2)}function QH(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const JH=S2({attachResizeListener:(t,e)=>cc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wm={current:void 0},C2=S2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wm.current){const t=new JH({});t.mount(window),t.setOptions({layoutScroll:!0}),Wm.current=t}return Wm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZH={pan:{Feature:yH},drag:{Feature:gH,ProjectionNode:C2,MeasureLayout:x2}};function hE(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,r=i[s];r&&Ne.postRender(()=>r(e,Gc(e)))}class eF extends qs{mount(){const{current:e}=this.node;e&&(this.unmount=I8(e,(n,i)=>(hE(this.node,i,"Start"),s=>hE(this.node,s,"End"))))}unmount(){}}class tF extends qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fc(cc(this.node.current,"focus",()=>this.onFocus()),cc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dE(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),r=i[s];r&&Ne.postRender(()=>r(e,Gc(e)))}class nF extends qs{mount(){const{current:e}=this.node;e&&(this.unmount=P8(e,(n,i)=>(dE(this.node,i,"Start"),(s,{success:r})=>dE(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Gg=new WeakMap,Qm=new WeakMap,iF=t=>{const e=Gg.get(t.target);e&&e(t)},sF=t=>{t.forEach(iF)};function rF({root:t,...e}){const n=t||document;Qm.has(n)||Qm.set(n,{});const i=Qm.get(n),s=JSON.stringify(e);return i[s]||(i[s]=new IntersectionObserver(sF,{root:t,...e})),i[s]}function aF(t,e,n){const i=rF(e);return Gg.set(t,n),i.observe(t),()=>{Gg.delete(t),i.unobserve(t)}}const oF={some:0,all:1};class lF extends qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:s="some",once:r}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:oF[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),f=u?d:m;f&&f(l)};return aF(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(cF(e,n))&&this.startObserver()}unmount(){}}function cF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const uF={inView:{Feature:lF},tap:{Feature:nF},focus:{Feature:tF},hover:{Feature:eF}},hF={layout:{ProjectionNode:C2,MeasureLayout:x2}},$g={current:null},R2={current:!1};function dF(){if(R2.current=!0,!!nv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$g.current=t.matches;t.addEventListener("change",e),e()}else $g.current=!1}const fF=new WeakMap;function mF(t,e,n){for(const i in e){const s=e[i],r=n[i];if(At(s))t.addValue(i,s);else if(At(r))t.addValue(i,Ya(s,{owner:t}));else if(r!==s)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Ya(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const fE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pF{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xv,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Ht.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ne.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=vf(n),this.isVariantNode=YN(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in m){const g=m[f];l[f]!==void 0&&At(g)&&g.set(l[f],!1)}}mount(e){this.current=e,fF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),R2.current||dF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$g.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),js(this.notifyUpdate),js(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=bo.has(e);i&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ne.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wa){const n=Wa[e];if(!n)continue;const{isEnabled:i,Feature:s}=n;if(!this.features[e]&&s&&i(this.props)&&(this.features[e]=new s(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<fE.length;i++){const s=fE[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=e[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=mF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Ya(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(iN(i)||rN(i))?i=parseFloat(i):!M8(i)&&Os.test(n)&&(i=BN(e,n)),this.setBaseTarget(e,At(i)?i.get():i)),At(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=kv(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!At(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ov),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class I2 extends pF{constructor(){super(...arguments),this.KeyframeResolver=E8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;At(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function N2(t,{style:e,vars:n},i,s){const r=t.style;let a;for(a in e)r[a]=e[a];s==null||s.applyProjectionStyles(r,i);for(a in n)r.setProperty(a,n[a])}function gF(t){return window.getComputedStyle(t)}class yF extends I2{constructor(){super(...arguments),this.type="html",this.renderInstance=N2}readValueFromInstance(e,n){var i;if(bo.has(n))return(i=this.projection)!=null&&i.isProjecting?Pg(n):zB(e,n);{const s=gF(e),r=(uv(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return p2(e,n)}build(e,n,i){Iv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Pv(e,n,i)}}const D2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vF(t,e,n,i){N2(t,e,void 0,i);for(const s in e.attrs)t.setAttribute(D2.has(s)?s:Rv(s),e.attrs[s])}class xF extends I2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=He}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(bo.has(n)){const i=UN(n);return i&&i.default||0}return n=D2.has(n)?n:Rv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return r2(e,n,i)}build(e,n,i){t2(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,s){vF(e,n,i,s)}mount(e){this.isSVGTag=i2(e.tagName),super.mount(e)}}const bF=(t,e)=>Dv(t)?new xF(e):new yF(e,{allowProjection:t!==D.Fragment}),_F=b7({...$7,...uF,...ZH,...hF},bF),M=G8(_F);class wF extends Zm.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.warn("Error caught by boundary:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-900 flex items-center justify-center p-4",children:h.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-800/90 backdrop-blur-sm rounded-2xl p-8 max-w-md w-full text-center border border-purple-500/30",children:[h.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),h.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),h.jsx("p",{className:"text-gray-300 mb-6",children:"Don't worry, your progress is safe! This is just a temporary glitch."}),h.jsx(M.button,{onClick:()=>window.location.reload(),whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all",children:"🔄 Reload App"}),!1]})}):this.props.children}}const TF=()=>{const[t,e]=D.useState(""),[n,i]=D.useState(""),[s,r]=D.useState(!1),a=Us(),{signInWithEmail:o,signInWithGoogle:l,isAuthenticated:u,error:d,clearError:m}=jn();D.useEffect(()=>{u&&a("/dashboard")},[u,a]),D.useEffect(()=>{m()},[m]);const f=async w=>{if(w.preventDefault(),console.log("Email login clicked",{email:t,password:n}),alert("Login button clicked! Check console for details."),!t||!n){console.log("Missing email or password"),alert("Please enter both email and password");return}r(!0);try{const E=await o(t,n);console.log("Login result:",E),E.success&&a("/dashboard")}catch(E){console.error("Login error:",E)}finally{r(!1)}},g=async()=>{console.log("Google login clicked"),alert("Google login button clicked!"),r(!0);try{const w=await l();console.log("Google login result:",w),w.success&&a("/dashboard")}catch(w){console.error("Google login error:",w)}finally{r(!1)}};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 flex items-center justify-center p-4",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary-500/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl"})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(M.h1,{className:"text-4xl font-gaming font-bold text-gradient mb-2",initial:{scale:.9},animate:{scale:1},transition:{delay:.2,duration:.5},children:"LEVELUP LIFE"}),h.jsx("p",{className:"text-gray-400",children:"Begin your journey to greatness"})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"card-glow p-8",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Welcome Back, Hunter"}),d&&h.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:d}),h.jsx("button",{onClick:()=>alert("Test button works!"),style:{backgroundColor:"red",color:"white",padding:"10px",border:"none",borderRadius:"5px",marginBottom:"10px",cursor:"pointer"},children:"TEST CLICK"}),h.jsxs("form",{onSubmit:f,className:"space-y-4",style:{zIndex:100,position:"relative"},children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),h.jsx("input",{type:"email",value:t,onChange:w=>e(w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Enter your email",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),h.jsx("input",{type:"password",value:n,onChange:w=>i(w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Enter your password",required:!0})]}),h.jsx("button",{type:"submit",disabled:s||!t||!n,style:{width:"100%",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"8px",padding:"12px",cursor:"pointer",fontSize:"16px",fontWeight:"600",zIndex:1e3,position:"relative"},children:s?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"Signing In..."})]}):"Sign In"})]}),h.jsxs("div",{className:"my-6 flex items-center",children:[h.jsx("div",{className:"flex-1 border-t border-dark-600"}),h.jsx("span",{className:"px-4 text-gray-400 text-sm",children:"or"}),h.jsx("div",{className:"flex-1 border-t border-dark-600"})]}),h.jsxs("button",{onClick:w=>{console.log("Google button clicked!"),g()},disabled:s,style:{width:"100%",backgroundColor:"white",color:"#1f2937",border:"1px solid #d1d5db",borderRadius:"8px",padding:"12px",cursor:"pointer",fontSize:"16px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",zIndex:1e3,position:"relative"},children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),h.jsx("span",{children:"Continue with Google"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsxs("p",{className:"text-gray-400",children:["New to LevelUp Life?"," ",h.jsx(Ld,{to:"/signup",className:"text-primary-400 hover:text-primary-300 font-medium transition-colors",children:"Create Account"})]})})]}),h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},className:"text-center mt-8 text-gray-500 text-sm",children:h.jsx("p",{children:"Ready to level up your life? 🚀"})})]})]})},EF=()=>{const[t,e]=D.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,i]=D.useState(!1),s=Us(),{signUpWithEmail:r,signInWithGoogle:a,isAuthenticated:o,error:l,clearError:u}=jn();D.useEffect(()=>{o&&s("/dashboard")},[o,s]),D.useEffect(()=>{u()},[u]);const d=E=>{e({...t,[E.target.name]:E.target.value})},m=()=>t.displayName.trim()?t.email?t.password.length<6?"Password must be at least 6 characters":t.password!==t.confirmPassword?"Passwords do not match":null:"Email is required":"Display name is required",f=async E=>{if(E.preventDefault(),m())return;i(!0),(await r(t.email,t.password,t.displayName)).success&&s("/dashboard"),i(!1)},g=async()=>{i(!0),(await a()).success&&s("/dashboard"),i(!1)},w=m();return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 flex items-center justify-center p-4",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-accent-500/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-primary-500/20 rounded-full blur-3xl"})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"relative w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(M.h1,{className:"text-4xl font-gaming font-bold text-gradient mb-2",initial:{scale:.9},animate:{scale:1},transition:{delay:.2,duration:.5},children:"LEVELUP LIFE"}),h.jsx("p",{className:"text-gray-400",children:"Start your transformation journey"})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"card-glow p-8",children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Become a Hunter"}),l&&h.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-500/50 text-red-400 p-3 rounded-lg mb-4 text-sm",children:l}),h.jsxs("form",{onSubmit:f,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hunter Name"}),h.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:d,className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Choose your hunter name",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),h.jsx("input",{type:"email",name:"email",value:t.email,onChange:d,className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Enter your email",required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),h.jsx("input",{type:"password",name:"password",value:t.password,onChange:d,className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Create a strong password",required:!0}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Must be at least 6 characters"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),h.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:d,className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 focus:ring-1 focus:ring-primary-500 transition-colors",placeholder:"Confirm your password",required:!0})]}),w&&t.confirmPassword&&h.jsx("div",{className:"text-red-400 text-sm",children:w}),h.jsx(M.button,{type:"submit",disabled:n||!!w||!t.email||!t.password,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full btn-primary py-3 text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:n?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"Creating Account..."})]}):"Create Account"})]}),h.jsxs("div",{className:"my-6 flex items-center",children:[h.jsx("div",{className:"flex-1 border-t border-dark-600"}),h.jsx("span",{className:"px-4 text-gray-400 text-sm",children:"or"}),h.jsx("div",{className:"flex-1 border-t border-dark-600"})]}),h.jsxs(M.button,{onClick:g,disabled:n,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-white text-gray-900 font-semibold py-3 px-4 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),h.jsx("span",{children:"Continue with Google"})]}),h.jsx("div",{className:"mt-6 text-center",children:h.jsxs("p",{className:"text-gray-400",children:["Already have an account?"," ",h.jsx(Ld,{to:"/login",className:"text-primary-400 hover:text-primary-300 font-medium transition-colors",children:"Sign In"})]})})]}),h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},className:"text-center mt-8 text-gray-500 text-sm",children:h.jsx("p",{children:"Join thousands of hunters on their journey! ⚔️"})})]})]})};class SF{constructor(){this.sounds={},this.isEnabled=!0,this.volume=.7,this.audioContext=null,this.masterGain=null,this.initializeAudioContext(),this.loadSounds()}initializeAudioContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.masterGain.connect(this.audioContext.destination),this.masterGain.gain.value=this.volume}catch(e){console.warn("Web Audio API not supported:",e)}}loadSounds(){const e={buttonHover:this.createTone(800,.1,"sine"),buttonClick:this.createTone(600,.15,"square"),cardHover:this.createTone(400,.08,"triangle"),levelUp:this.createEpicLevelUpSound(),xpGain:this.createXPGainSound(),questComplete:this.createQuestCompleteSound(),epicSuccess:this.createEpicSuccessSound(),powerUp:this.createPowerUpSound(),achievement:this.createAchievementSound(),backgroundHum:this.createAmbientHum(),magicSparkle:this.createMagicSparkle(),notification:this.createNotificationSound(),warning:this.createWarningSound(),error:this.createErrorSound()};this.sounds=e}createTone(e,n,i="sine"){return()=>{if(!this.audioContext||!this.isEnabled)return;const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.masterGain),s.frequency.value=e,s.type=i,r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.01),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+n),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+n)}}createEpicLevelUpSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;[261.63,329.63,392,523.25].forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.masterGain),s.frequency.value=n,s.type="triangle",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.4,this.audioContext.currentTime+.1),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.8),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+.8)},i*200)})}}createXPGainSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.setValueAtTime(400,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(800,this.audioContext.currentTime+.3),e.type="sawtooth",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.2,this.audioContext.currentTime+.05),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}createQuestCompleteSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;[523.25,659.25,783.99,1046.5].forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.masterGain),s.frequency.value=n,s.type="square",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.05),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.4),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+.4)},i*100)})}}createEpicSuccessSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;[130.81,164.81,196].forEach(n=>{const i=this.audioContext.createOscillator(),s=this.audioContext.createGain();i.connect(s),s.connect(this.masterGain),i.frequency.value=n,i.type="sawtooth",s.gain.setValueAtTime(0,this.audioContext.currentTime),s.gain.linearRampToValueAtTime(.4,this.audioContext.currentTime+.1),s.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+1.2),i.start(this.audioContext.currentTime),i.stop(this.audioContext.currentTime+1.2)})}}createPowerUpSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.setValueAtTime(200,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(1200,this.audioContext.currentTime+.6),e.type="triangle",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.1),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.6),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.6)}}createAchievementSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;[659.25,783.99,987.77,1318.51].forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.masterGain),s.frequency.value=n,s.type="sine",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.25,this.audioContext.currentTime+.05),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.5),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+.5)},i*150)})}}createAmbientHum(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.value=60,e.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.05,this.audioContext.currentTime+2),e.start(this.audioContext.currentTime)}}createMagicSparkle(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.setValueAtTime(2e3,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(4e3,this.audioContext.currentTime+.1),e.frequency.exponentialRampToValueAtTime(1e3,this.audioContext.currentTime+.3),e.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.15,this.audioContext.currentTime+.05),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.3)}}createNotificationSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;[800,1e3].forEach((n,i)=>{setTimeout(()=>{const s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.connect(r),r.connect(this.masterGain),s.frequency.value=n,s.type="triangle",r.gain.setValueAtTime(0,this.audioContext.currentTime),r.gain.linearRampToValueAtTime(.2,this.audioContext.currentTime+.05),r.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.3),s.start(this.audioContext.currentTime),s.stop(this.audioContext.currentTime+.3)},i*200)})}}createWarningSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.value=440,e.type="square",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.1),n.gain.linearRampToValueAtTime(0,this.audioContext.currentTime+.2),n.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.3),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.5),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.5)}}createErrorSound(){return()=>{if(!this.audioContext||!this.isEnabled)return;const e=this.audioContext.createOscillator(),n=this.audioContext.createGain();e.connect(n),n.connect(this.masterGain),e.frequency.setValueAtTime(300,this.audioContext.currentTime),e.frequency.linearRampToValueAtTime(200,this.audioContext.currentTime+.4),e.type="sawtooth",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.4,this.audioContext.currentTime+.1),n.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.4),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+.4)}}play(e){if(this.sounds[e]&&this.isEnabled)try{this.sounds[e]()}catch(n){console.warn(`Failed to play sound: ${e}`,n)}}setVolume(e){this.volume=Math.max(0,Math.min(1,e)),this.masterGain&&(this.masterGain.gain.value=this.volume)}toggle(){return this.isEnabled=!this.isEnabled,this.isEnabled}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}}const Lt=new SF,On=Nc(Ud((t,e)=>({level:1,currentXP:0,totalXP:0,xpToNextLevel:100,recentXPGains:[],achievements:[],showLevelUpModal:!1,showXPGainAnimation:!1,lastXPGain:0,BASE_XP_PER_LEVEL:100,XP_MULTIPLIER:1.1,setLevel:n=>t({level:n}),setCurrentXP:n=>t({currentXP:n}),setTotalXP:n=>t({totalXP:n}),calculateXPToNextLevel:n=>{const{BASE_XP_PER_LEVEL:i,XP_MULTIPLIER:s}=e();return Math.floor(i*Math.pow(s,n-1))},calculateLevelFromXP:n=>{const{BASE_XP_PER_LEVEL:i,XP_MULTIPLIER:s}=e();let r=1,a=0;for(;;){const o=Math.floor(i*Math.pow(s,r-1));if(a+o>n)break;a+=o,r++}return r},addXP:(n,i="habit")=>{const{level:s,currentXP:r,totalXP:a,calculateXPToNextLevel:o,calculateLevelFromXP:l,recentXPGains:u}=e(),d=a+n,m=l(d),f=m>s;let g=0;for(let b=1;b<m;b++){const R=o(b);g+=R}const w=d-g,T=o(m)-w,x=[{amount:n,source:i,timestamp:Date.now(),id:Math.random().toString(36).substr(2,9)},...u].slice(0,10);return t({level:m,currentXP:w,totalXP:d,xpToNextLevel:T-w,recentXPGains:x,showLevelUpModal:f,showXPGainAnimation:!0,lastXPGain:n}),f?(Lt.play("levelUp"),setTimeout(()=>{Lt.play("epicSuccess")},800),setTimeout(()=>{Lt.play("achievement")},1500)):(Lt.play("xpGain"),n>=50&&setTimeout(()=>{Lt.play("powerUp")},300),n>=100&&setTimeout(()=>{Lt.play("magicSparkle")},600)),setTimeout(()=>{t({showXPGainAnimation:!1})},2e3),{leveledUp:f,newLevel:m,xpGained:n,newTotalXP:d}},syncWithProfile:n=>{const{calculateXPToNextLevel:i}=e(),s=n.level||1,r=n.totalXP||0,a=n.xp||0,o=i(s)-a;t({level:s,currentXP:a,totalXP:r,xpToNextLevel:o})},getXPProgress:()=>{const{currentXP:n,xpToNextLevel:i}=e(),s=n+i;return s>0?n/s*100:0},getLevelProgress:()=>{const{level:n,currentXP:i,xpToNextLevel:s,calculateXPToNextLevel:r}=e(),a=r(n),o=i/a*100;return{level:n,currentXP:i,xpToNextLevel:s,totalXPForLevel:a,progress:Math.min(o,100)}},addAchievement:n=>{const{achievements:i}=e(),s={...n,id:Math.random().toString(36).substr(2,9),unlockedAt:Date.now()};return t({achievements:[s,...i]}),s},checkAchievements:()=>{const{level:n,totalXP:i,recentXPGains:s,achievements:r}=e(),a=[];if([5,10,25,50,100].forEach(u=>{n>=u&&!r.find(d=>d.id===`level_${u}`)&&a.push({id:`level_${u}`,name:`Level ${u} Master`,description:`Reached level ${u}!`,icon:"🏆",type:"level",rarity:u>=50?"legendary":u>=25?"epic":"rare"})}),[1e3,5e3,1e4,25e3,5e4].forEach(u=>{i>=u&&!r.find(d=>d.id===`xp_${u}`)&&a.push({id:`xp_${u}`,name:`${u} XP Collector`,description:`Earned ${u} total XP!`,icon:"⭐",type:"xp",rarity:u>=25e3?"legendary":u>=1e4?"epic":"rare"})}),a.length>0){const{achievements:u}=e();t({achievements:[...a,...u]})}return a},closeLevelUpModal:()=>t({showLevelUpModal:!1}),getRecentXPGains:()=>{const{recentXPGains:n}=e();return n.slice(0,5)},clearOldXPGains:()=>{const{recentXPGains:n}=e(),i=Date.now()-60*60*1e3,s=n.filter(r=>r.timestamp>i);t({recentXPGains:s})},resetXP:()=>{t({level:1,currentXP:0,totalXP:0,xpToNextLevel:100,recentXPGains:[],achievements:[],showLevelUpModal:!1,showXPGainAnimation:!1,lastXPGain:0})}}),{name:"xp-storage",partialize:t=>({level:t.level,currentXP:t.currentXP,totalXP:t.totalXP,achievements:t.achievements,recentXPGains:t.recentXPGains})})),Ur=Nc(Ud((t,e)=>({habits:[],completions:{},streaks:{},isLoading:!1,error:null,selectedDate:new Date().toISOString().split("T")[0],setHabits:n=>t({habits:n}),setLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),setSelectedDate:n=>t({selectedDate:n}),loadHabits:async n=>{if(!n)return;t({isLoading:!0,error:null});const{data:i,error:s}=await L9(n);if(s)return t({error:s,isLoading:!1}),{success:!1,error:s};const r={},a={};return i.forEach(o=>{r[o.id]=o.completions||[],a[o.id]=mE(o.completions||[])}),t({habits:i,completions:r,streaks:a,isLoading:!1}),{success:!0,habits:i}},createHabit:async(n,i)=>{t({isLoading:!0,error:null});const s={name:i.name,description:i.description||"",category:i.category||"general",xpValue:i.xpValue||10,icon:i.icon||"⭐",color:i.color||"#0ea5e9",frequency:i.frequency||"daily",isActive:!0,completions:[]},{id:r,error:a}=await V9(n,s);if(a)return t({error:a,isLoading:!1}),{success:!1,error:a};const o={...s,id:r},{habits:l,completions:u,streaks:d}=e();return t({habits:[...l,o],completions:{...u,[r]:[]},streaks:{...d,[r]:0},isLoading:!1}),{success:!0,habit:o}},updateHabit:async(n,i)=>{t({isLoading:!0,error:null});const{error:s}=await U9(n,i);if(s)return t({error:s,isLoading:!1}),{success:!1,error:s};const{habits:r}=e(),a=r.map(o=>o.id===n?{...o,...i}:o);return t({habits:a,isLoading:!1}),{success:!0}},completeHabit:async(n,i)=>{const{habits:s,completions:r,streaks:a}=e(),o=s.find(v=>v.id===i);if(!o)return t({error:"Habit not found"}),{success:!1,error:"Habit not found"};const l=new Date().toISOString().split("T")[0],u=r[i]||[];if(u.includes(l))return t({error:"Habit already completed today"}),{success:!1,error:"Habit already completed today"};t({isLoading:!0,error:null});const{error:d,newLevel:m,currentLevelXP:f,totalXP:g,leveledUp:w}=await B9(n,i,o.xpValue);if(d)return t({error:d,isLoading:!1}),{success:!1,error:d};const E=[...u,l],T=mE(E);return t({completions:{...r,[i]:E},streaks:{...a,[i]:T},isLoading:!1}),Lt.play("questComplete"),T>=7&&setTimeout(()=>{Lt.play("achievement")},600),T>=30&&setTimeout(()=>{Lt.play("epicSuccess")},1200),{success:!0,xpGained:o.xpValue,newLevel:m,currentLevelXP:f,totalXP:g,leveledUp:w,newStreak:T}},isHabitCompleted:(n,i)=>{const{completions:s}=e();return(s[n]||[]).includes(i)},getTodaysHabits:()=>{const{habits:n,selectedDate:i}=e();return n.filter(s=>s.isActive)},getTodaysCompletedHabits:()=>{const{habits:n,completions:i,selectedDate:s}=e();return n.filter(r=>(i[r.id]||[]).includes(s))},getHabitStats:n=>{const{completions:i,streaks:s}=e(),r=i[n]||[],a=s[n]||0,o=new Date;o.setDate(o.getDate()-30);const l=[];for(let m=0;m<30;m++){const f=new Date;f.setDate(f.getDate()-m),l.push(f.toISOString().split("T")[0])}const u=r.filter(m=>l.includes(m)).length,d=Math.round(u/30*100);return{totalCompletions:r.length,currentStreak:a,completionRate:d,last30DaysCompletions:u}},clearError:()=>t({error:null})}),{name:"habit-storage",partialize:t=>({habits:t.habits,completions:t.completions,streaks:t.streaks})}));function mE(t){if(!t||t.length===0)return 0;const e=t.sort((s,r)=>new Date(r)-new Date(s));new Date().toISOString().split("T")[0];let n=0,i=new Date;for(let s=0;s<e.length;s++){const r=e[s],a=i.toISOString().split("T")[0];if(r===a)n++,i.setDate(i.getDate()-1);else break}return n}const AF=({className:t="",showDetails:e=!0,size:n="normal"})=>{const{level:i,currentXP:s,xpToNextLevel:r,getXPProgress:a,showXPGainAnimation:o,lastXPGain:l}=On(),u=a(),d=s+r,m={small:"h-2",normal:"h-3",large:"h-4"},f={small:"text-xs",normal:"text-sm",large:"text-base"};return h.jsxs("div",{className:`relative ${t}`,children:[o&&h.jsx(M.div,{initial:{opacity:0,y:0,scale:.8},animate:{opacity:1,y:-30,scale:1},exit:{opacity:0,y:-50,scale:.8},transition:{duration:2,ease:"easeOut"},className:"absolute -top-8 left-1/2 transform -translate-x-1/2 z-10",children:h.jsxs("div",{className:"bg-accent-500 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg",children:["+",l," XP"]})}),e&&h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs("span",{className:`font-gaming font-bold text-primary-400 ${f[n]}`,children:["LEVEL ",i]})}),h.jsxs("span",{className:`text-gray-400 ${f[n]}`,children:[s," / ",d," XP"]})]}),h.jsxs("div",{className:`xp-bar ${m[n]} relative overflow-hidden`,children:[h.jsx("div",{className:"absolute inset-0 bg-dark-700 rounded-full"}),h.jsx(M.div,{className:"xp-fill relative",initial:{width:0},animate:{width:`${u}%`},transition:{duration:.8,ease:"easeOut"},children:h.jsx(M.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:3,ease:"easeInOut"}})}),h.jsx("div",{className:"absolute inset-0 rounded-full opacity-50",style:{background:`linear-gradient(90deg, transparent 0%, rgba(14, 165, 233, 0.3) ${u}%, transparent ${u+10}%)`,filter:"blur(4px)"}})]}),e&&n!=="small"&&h.jsx("div",{className:"text-center mt-1",children:h.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(u),"% to next level"]})})]})},CF=({className:t=""})=>{const{level:e,currentXP:n,xpToNextLevel:i}=On();return h.jsxs("div",{className:`card-glow p-6 ${t}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient",children:"EXPERIENCE POINTS"}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-2xl font-gaming font-bold text-primary-400",children:["LEVEL ",e]}),h.jsxs("div",{className:"text-sm text-gray-400",children:[i," XP to next level"]})]})]}),h.jsx(AF,{size:"large",showDetails:!0}),h.jsxs("div",{className:"mt-4 flex justify-between text-xs text-gray-500",children:[h.jsxs("span",{children:["Level ",e]}),h.jsxs("span",{children:["Level ",e+1]})]})]})},RF=Nc(Ud((t,e)=>({timeRemaining:25*60,isRunning:!1,isPaused:!1,currentSession:"work",sessionCount:0,totalSessions:0,totalFocusTime:0,intervalId:null,workDuration:25*60,shortBreakDuration:5*60,longBreakDuration:15*60,sessionsUntilLongBreak:4,soundEnabled:!0,notificationsEnabled:!0,workSessionXP:25,breakSessionXP:5,setTimeRemaining:n=>t({timeRemaining:n}),setIsRunning:n=>t({isRunning:n}),setIsPaused:n=>t({isPaused:n}),setCurrentSession:n=>t({currentSession:n}),startTimer:()=>{const{timeRemaining:n,intervalId:i}=e();i&&clearInterval(i);const s=setInterval(()=>{const{timeRemaining:r}=e();r<=0?e().completeSession():t({timeRemaining:r-1})},1e3);t({isRunning:!0,isPaused:!1,intervalId:s})},pauseTimer:()=>{const{intervalId:n}=e();n&&clearInterval(n),t({isRunning:!1,isPaused:!0,intervalId:null})},resumeTimer:()=>{e().startTimer()},stopTimer:()=>{const{intervalId:n}=e();n&&clearInterval(n);const{currentSession:i,workDuration:s,shortBreakDuration:r,longBreakDuration:a}=e();let o;switch(i){case"work":o=s;break;case"shortBreak":o=r;break;case"longBreak":o=a;break;default:o=s}t({isRunning:!1,isPaused:!1,timeRemaining:o,intervalId:null})},resetTimer:()=>{const{intervalId:n}=e();n&&clearInterval(n),t({timeRemaining:25*60,isRunning:!1,isPaused:!1,currentSession:"work",sessionCount:0,intervalId:null})},completeSession:()=>{const{currentSession:n,sessionCount:i,totalSessions:s,totalFocusTime:r,workDuration:a,shortBreakDuration:o,longBreakDuration:l,sessionsUntilLongBreak:u,workSessionXP:d,breakSessionXP:m,soundEnabled:f,notificationsEnabled:g,intervalId:w}=e();w&&clearInterval(w),f&&e().playCompletionSound(),g&&e().showNotification();let E,T,v=i,x=0,b=0;return n==="work"?(v+=1,x=d,b=a,v%u===0?(E="longBreak",T=l):(E="shortBreak",T=o)):(E="work",T=a,x=m),t({currentSession:E,timeRemaining:T,sessionCount:v,totalSessions:s+1,totalFocusTime:r+b,isRunning:!1,isPaused:!1,intervalId:null}),{sessionCompleted:n,nextSession:E,xpGained:x,sessionCount:v}},switchSession:n=>{const{workDuration:i,shortBreakDuration:s,longBreakDuration:r}=e();let a;switch(n){case"work":a=i;break;case"shortBreak":a=s;break;case"longBreak":a=r;break;default:a=i}e().stopTimer(),t({currentSession:n,timeRemaining:a})},updateSettings:n=>{const{workDuration:i,shortBreakDuration:s,longBreakDuration:r,...a}=n,o={...a};i&&(o.workDuration=i*60),s&&(o.shortBreakDuration=s*60),r&&(o.longBreakDuration=r*60),t(o);const{isRunning:l,currentSession:u}=e();if(!l){const{workDuration:d,shortBreakDuration:m,longBreakDuration:f}=e();let g;switch(u){case"work":g=d;break;case"shortBreak":g=m;break;case"longBreak":g=f;break;default:g=d}t({timeRemaining:g})}},formatTime:n=>{const i=Math.floor(n/60),s=n%60;return`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},getCurrentTimeFormatted:()=>{const{timeRemaining:n}=e();return e().formatTime(n)},getSessionProgress:()=>{const{timeRemaining:n,currentSession:i,workDuration:s,shortBreakDuration:r,longBreakDuration:a}=e();let o;switch(i){case"work":o=s;break;case"shortBreak":o=r;break;case"longBreak":o=a;break;default:o=s}return(o-n)/o*100},playCompletionSound:()=>{try{new Audio("/notification.mp3").play().catch(()=>{console.log("Could not play notification sound")})}catch{console.log("Audio not supported")}},showNotification:()=>{const{currentSession:n}=e();if("Notification"in window&&Notification.permission==="granted"){const i=n==="work"?"Work Session Complete!":"Break Time Over!",s=n==="work"?"Great job! Time for a break.":"Break time is over. Ready to focus?";new Notification(i,{body:s,icon:"/favicon.ico",badge:"/favicon.ico"})}},requestNotificationPermission:async()=>{if("Notification"in window){const n=await Notification.requestPermission();return t({notificationsEnabled:n==="granted"}),n==="granted"}return!1},getTimerStats:()=>{const{totalSessions:n,totalFocusTime:i,sessionCount:s}=e();return{totalSessions:n,totalFocusTime:i,currentSessionCount:s,totalFocusHours:Math.floor(i/3600),totalFocusMinutes:Math.floor(i%3600/60)}},cleanup:()=>{const{intervalId:n}=e();n&&(clearInterval(n),t({intervalId:null}))}}),{name:"timer-storage",partialize:t=>({sessionCount:t.sessionCount,totalSessions:t.totalSessions,totalFocusTime:t.totalFocusTime,workDuration:t.workDuration,shortBreakDuration:t.shortBreakDuration,longBreakDuration:t.longBreakDuration,sessionsUntilLongBreak:t.sessionsUntilLongBreak,soundEnabled:t.soundEnabled,notificationsEnabled:t.notificationsEnabled,workSessionXP:t.workSessionXP,breakSessionXP:t.breakSessionXP})})),IF=({className:t="",compact:e=!1})=>{const{timeRemaining:n,isRunning:i,isPaused:s,currentSession:r,sessionCount:a,startTimer:o,pauseTimer:l,resumeTimer:u,stopTimer:d,switchSession:m,getCurrentTimeFormatted:f,getSessionProgress:g,completeSession:w,cleanup:E}=RF(),{addXP:T}=On();D.useEffect(()=>()=>E(),[E]);const v=()=>{i?l():s?u():o()},x=()=>{d()},b=C=>{m(C)},R=g(),j=f(),V=()=>{switch(r){case"work":return"from-red-500 to-orange-500";case"shortBreak":return"from-green-500 to-blue-500";case"longBreak":return"from-purple-500 to-pink-500";default:return"from-primary-500 to-accent-500"}},S=()=>{switch(r){case"work":return"🎯";case"shortBreak":return"☕";case"longBreak":return"🌟";default:return"⏰"}},_=()=>{switch(r){case"work":return"Focus Time";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Timer"}};return e?h.jsxs("div",{className:`card p-4 ${t}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("span",{className:"text-2xl",children:S()}),h.jsxs("div",{children:[h.jsx("div",{className:"font-gaming font-bold text-lg",children:j}),h.jsx("div",{className:"text-xs text-gray-400",children:_()})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(M.button,{onClick:v,whileHover:{scale:1.1},whileTap:{scale:.95},className:"btn-primary p-2 rounded-full",children:i?"⏸️":"▶️"}),(i||s)&&h.jsx(M.button,{onClick:x,whileHover:{scale:1.1},whileTap:{scale:.95},className:"btn-secondary p-2 rounded-full",children:"⏹️"})]})]}),h.jsx("div",{className:"mt-3 w-full bg-dark-700 rounded-full h-2",children:h.jsx(M.div,{className:`h-2 rounded-full bg-gradient-to-r ${V()}`,initial:{width:0},animate:{width:`${R}%`},transition:{duration:.3}})})]}):h.jsxs("div",{className:`card-glow p-6 ${t}`,children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient mb-2",children:"POMODORO TIMER"}),h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("span",{className:"text-3xl",children:S()}),h.jsx("span",{className:"text-lg font-semibold text-white",children:_()})]})]}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(M.div,{initial:{scale:.95},animate:{scale:1},className:"text-6xl font-gaming font-bold text-white mb-4",children:j},j),h.jsxs("div",{className:"text-sm text-gray-400",children:["Session ",a+1," • ",r==="work"?"Focus":"Break"," Mode"]})]}),h.jsx("div",{className:"flex justify-center mb-8",children:h.jsxs("div",{className:"relative w-32 h-32",children:[h.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 100 100",children:[h.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-dark-700"}),h.jsx(M.circle,{cx:"50",cy:"50",r:"45",stroke:"url(#gradient)",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:`${2*Math.PI*45}`,initial:{strokeDashoffset:2*Math.PI*45},animate:{strokeDashoffset:2*Math.PI*45*(1-R/100)},transition:{duration:.3}}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",className:"text-primary-500",stopColor:"currentColor"}),h.jsx("stop",{offset:"100%",className:"text-accent-500",stopColor:"currentColor"})]})})]}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsxs("span",{className:"text-lg font-bold text-white",children:[Math.round(R),"%"]})})]})}),h.jsxs("div",{className:"flex justify-center space-x-4 mb-6",children:[h.jsx(M.button,{onClick:v,whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary px-8 py-3 text-lg font-semibold",children:i?"Pause":s?"Resume":"Start"}),(i||s)&&h.jsx(M.button,{onClick:x,whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-secondary px-6 py-3",children:"Stop"})]}),h.jsxs("div",{className:"flex justify-center space-x-2",children:[h.jsx(M.button,{onClick:()=>b("work"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${r==="work"?"bg-red-500 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,disabled:i,children:"🎯 Work"}),h.jsx(M.button,{onClick:()=>b("shortBreak"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${r==="shortBreak"?"bg-green-500 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,disabled:i,children:"☕ Short Break"}),h.jsx(M.button,{onClick:()=>b("longBreak"),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${r==="longBreak"?"bg-purple-500 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,disabled:i,children:"🌟 Long Break"})]})]})},NF=({habit:t,onEdit:e,onDelete:n,className:i=""})=>{const[s,r]=D.useState(!1),{completeHabit:a,isHabitCompleted:o,getHabitStats:l}=Ur(),{user:u}=jn(),{addXP:d}=On(),m=new Date().toISOString().split("T")[0],f=o(t.id,m),g=l(t.id),w=async()=>{if(!(f||s||!u)){r(!0);try{const v=await a(u.uid,t.id);v.success?(d(v.xpGained,"habit"),console.log(`Completed ${t.name}! +${v.xpGained} XP`)):console.error("Failed to complete habit:",v.error)}catch(v){console.error("Error completing habit:",v)}finally{r(!1)}}},E=v=>v>=30?"text-yellow-400":v>=14?"text-purple-400":v>=7?"text-blue-400":v>=3?"text-green-400":"text-gray-400",T=v=>v>=90?"text-green-400":v>=70?"text-blue-400":v>=50?"text-yellow-400":"text-red-400";return h.jsxs(M.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},className:`card relative overflow-hidden ${i} ${f?"bg-green-900/20 border-green-500/30":""}`,children:[f&&h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-transparent pointer-events-none"}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[h.jsx(M.button,{onClick:w,disabled:f||s,whileHover:{scale:f?1:1.1},whileTap:{scale:f?1:.95},className:`
              relative w-12 h-12 rounded-full flex items-center justify-center text-xl font-bold
              transition-all duration-200 border-2
              ${f?"bg-green-500 border-green-400 text-white shadow-lg shadow-green-500/30":"bg-dark-700 border-dark-600 hover:border-primary-500 hover:bg-primary-500/20 text-gray-300"}
              ${s?"animate-pulse":""}
            `,style:{backgroundColor:f?void 0:t.color+"20"},children:s?h.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):f?"✓":t.icon||"⭐"}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h3",{className:`font-semibold ${f?"text-green-400":"text-white"}`,children:t.name}),h.jsx("span",{className:"text-xs bg-primary-500/20 text-primary-400 px-2 py-1 rounded-full",children:t.category})]}),t.description&&h.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t.description}),h.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs",children:[h.jsxs("span",{className:`flex items-center space-x-1 ${E(g.currentStreak)}`,children:[h.jsx("span",{children:"🔥"}),h.jsxs("span",{children:[g.currentStreak," day streak"]})]}),h.jsxs("span",{className:`${T(g.completionRate)}`,children:[g.completionRate,"% completion"]}),h.jsxs("span",{className:"text-accent-400",children:["+",t.xpValue," XP"]})]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[e&&h.jsx(M.button,{onClick:()=>e(t),whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 text-gray-400 hover:text-blue-400 transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),n&&h.jsx(M.button,{onClick:()=>n(t),whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 text-gray-400 hover:text-red-400 transition-colors",children:h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),g.currentStreak>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[h.jsx("span",{children:"Streak Progress"}),h.jsxs("span",{children:[g.currentStreak," days"]})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-1",children:h.jsx(M.div,{className:"h-1 rounded-full bg-gradient-to-r from-orange-500 to-red-500",initial:{width:0},animate:{width:`${Math.min(g.currentStreak/30*100,100)}%`},transition:{duration:.8,ease:"easeOut"}})})]})]})},DF=({isOpen:t,onClose:e,habit:n=null})=>{const[i,s]=D.useState({name:"",description:"",category:"health",xpValue:10,icon:"⭐",color:"#0ea5e9",frequency:"daily"}),[r,a]=D.useState(!1),[o,l]=D.useState({}),{createHabit:u,updateHabit:d}=Ur(),{user:m}=jn(),f=!!n;D.useEffect(()=>{s(n?{name:n.name||"",description:n.description||"",category:n.category||"health",xpValue:n.xpValue||10,icon:n.icon||"⭐",color:n.color||"#0ea5e9",frequency:n.frequency||"daily"}:{name:"",description:"",category:"health",xpValue:10,icon:"⭐",color:"#0ea5e9",frequency:"daily"}),l({})},[n,t]);const g=[{value:"health",label:"Health & Fitness",icon:"💪"},{value:"productivity",label:"Productivity",icon:"⚡"},{value:"learning",label:"Learning",icon:"📚"},{value:"mindfulness",label:"Mindfulness",icon:"🧘"},{value:"social",label:"Social",icon:"👥"},{value:"creativity",label:"Creativity",icon:"🎨"},{value:"finance",label:"Finance",icon:"💰"},{value:"general",label:"General",icon:"⭐"}],w=["⭐","💪","📚","🧘","🏃","💧","🥗","😴","✍️","🎯","🎨","🎵","💰","📱","🌱","🔥"],E=["#0ea5e9","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1","#14b8a6","#eab308"],T=b=>{const{name:R,value:j}=b.target;s(V=>({...V,[R]:j})),o[R]&&l(V=>({...V,[R]:""}))},v=()=>{const b={};return i.name.trim()||(b.name="Habit name is required"),(i.xpValue<1||i.xpValue>100)&&(b.xpValue="XP value must be between 1 and 100"),l(b),Object.keys(b).length===0},x=async b=>{if(b.preventDefault(),!!v()&&m){a(!0);try{let R;f?R=await d(n.id,i):R=await u(m.uid,i),R.success&&e()}catch(R){console.error("Error saving habit:",R)}finally{a(!1)}}};return h.jsx(Ui,{children:t&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),h.jsxs(M.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-md bg-dark-800 rounded-xl border border-dark-700 shadow-2xl",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-dark-700",children:[h.jsx("h2",{className:"text-xl font-gaming font-bold text-white",children:f?"Edit Quest":"Create New Quest"}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:h.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h.jsxs("form",{onSubmit:x,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quest Name *"}),h.jsx("input",{type:"text",name:"name",value:i.name,onChange:T,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500",placeholder:"e.g., Morning Workout",required:!0}),o.name&&h.jsx("p",{className:"text-red-400 text-sm mt-1",children:o.name})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),h.jsx("textarea",{name:"description",value:i.description,onChange:T,rows:2,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 resize-none",placeholder:"Optional description..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),h.jsx("select",{name:"category",value:i.category,onChange:T,className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:border-primary-500",children:g.map(b=>h.jsxs("option",{value:b.value,children:[b.icon," ",b.label]},b.value))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Icon"}),h.jsx("div",{className:"grid grid-cols-8 gap-2",children:w.map(b=>h.jsx("button",{type:"button",onClick:()=>s(R=>({...R,icon:b})),className:`w-8 h-8 rounded-lg flex items-center justify-center text-lg transition-all ${i.icon===b?"bg-primary-500 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:b},b))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Color"}),h.jsx("div",{className:"grid grid-cols-6 gap-2",children:E.map(b=>h.jsx("button",{type:"button",onClick:()=>s(R=>({...R,color:b})),className:`w-8 h-8 rounded-lg transition-all ${i.color===b?"ring-2 ring-white ring-offset-2 ring-offset-dark-800":"hover:scale-110"}`,style:{backgroundColor:b}},b))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"XP Reward"}),h.jsx("input",{type:"number",name:"xpValue",value:i.xpValue,onChange:T,min:"1",max:"100",className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white focus:outline-none focus:border-primary-500"}),o.xpValue&&h.jsx("p",{className:"text-red-400 text-sm mt-1",children:o.xpValue})]}),h.jsxs("div",{className:"flex space-x-3 pt-4",children:[h.jsx("button",{type:"button",onClick:e,className:"flex-1 btn-secondary py-2",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:r,className:"flex-1 btn-primary py-2 disabled:opacity-50",children:r?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"Saving..."})]}):f?"Update Quest":"Create Quest"})]})]})]})]})})};var pE;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(pE||(pE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gE;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(gE||(gE={}));var yE;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(yE||(yE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=["user","model","function","system"];var xE;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(xE||(xE={}));var bE;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(bE||(bE={}));var _E;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(_E||(_E={}));var wE;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(wE||(wE={}));var Il;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Il||(Il={}));var TE;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(TE||(TE={}));var EE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(EE||(EE={}));var SE;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(SE||(SE={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Xr extends Tt{constructor(e,n){super(e),this.response=n}}class k2 extends Tt{constructor(e,n,i,s){super(e),this.status=n,this.statusText=i,this.errorDetails=s}}class ws extends Tt{}class P2 extends Tt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="https://generativelanguage.googleapis.com",PF="v1beta",jF="0.24.1",OF="genai-js";var Rr;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Rr||(Rr={}));class MF{constructor(e,n,i,s,r){this.model=e,this.task=n,this.apiKey=i,this.stream=s,this.requestOptions=r}toString(){var e,n;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||PF;let r=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||kF}/${i}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}function VF(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${OF}/${jF}`),e.join(" ")}async function LF(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",VF(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(s){throw new ws(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${s.message}`)}for(const[s,r]of i.entries()){if(s==="x-goog-api-key")throw new ws(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new ws(`Header name ${s} can only be set using the apiClient field`);n.append(s,r)}}return n}async function UF(t,e,n,i,s,r){const a=new MF(t,e,n,i,r);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},zF(r)),{method:"POST",headers:await LF(a),body:s})}}async function $c(t,e,n,i,s,r={},a=fetch){const{url:o,fetchOptions:l}=await UF(t,e,n,i,s,r);return BF(o,l,a)}async function BF(t,e,n=fetch){let i;try{i=await n(t,e)}catch(s){HF(s,t)}return i.ok||await FF(i,t),i}function HF(t,e){let n=t;throw n.name==="AbortError"?(n=new P2(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof k2||t instanceof ws||(n=new Tt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function FF(t,e){let n="",i;try{const s=await t.json();n=s.error.message,s.error.details&&(n+=` ${JSON.stringify(s.error.details)}`,i=s.error.details)}catch{}throw new k2(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,i)}function zF(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),mh(t.candidates[0]))throw new Xr(`${Qi(t)}`,t);return qF(t)}else if(t.promptFeedback)throw new Xr(`Text not available. ${Qi(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),mh(t.candidates[0]))throw new Xr(`${Qi(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),AE(t)[0]}else if(t.promptFeedback)throw new Xr(`Function call not available. ${Qi(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),mh(t.candidates[0]))throw new Xr(`${Qi(t)}`,t);return AE(t)}else if(t.promptFeedback)throw new Xr(`Function call not available. ${Qi(t)}`,t)},t}function qF(t){var e,n,i,s;const r=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(s=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.text&&r.push(a.text),a.executableCode&&r.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&r.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return r.length>0?r.join(""):""}function AE(t){var e,n,i,s;const r=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const a of(s=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||s===void 0?void 0:s.parts)a.functionCall&&r.push(a.functionCall);if(r.length>0)return r}const GF=[Il.RECITATION,Il.SAFETY,Il.LANGUAGE];function mh(t){return!!t.finishReason&&GF.includes(t.finishReason)}function Qi(t){var e,n,i;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){const r=t.candidates[0];mh(r)&&(s+=`Candidate was blocked due to ${r.finishReason}`,r.finishMessage&&(s+=`: ${r.finishMessage}`))}return s}function uc(t){return this instanceof uc?(this.v=t,this):new uc(t)}function $F(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,r=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){i[f]&&(s[f]=function(g){return new Promise(function(w,E){r.push([f,g,w,E])>1||o(f,g)})})}function o(f,g){try{l(i[f](g))}catch(w){m(r[0][3],w)}}function l(f){f.value instanceof uc?Promise.resolve(f.value.v).then(u,d):m(r[0][2],f)}function u(f){o("next",f)}function d(f){o("throw",f)}function m(f,g){f(g),r.shift(),r.length&&o(r[0][0],r[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function XF(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=WF(e),[i,s]=n.tee();return{stream:YF(i),response:KF(s)}}async function KF(t){const e=[],n=t.getReader();for(;;){const{done:i,value:s}=await n.read();if(i)return Ov(QF(e));e.push(s)}}function YF(t){return $F(this,arguments,function*(){const n=t.getReader();for(;;){const{value:i,done:s}=yield uc(n.read());if(s)break;yield yield uc(Ov(i))}})}function WF(t){const e=t.getReader();return new ReadableStream({start(i){let s="";return r();function r(){return e.read().then(({value:a,done:o})=>{if(o){if(s.trim()){i.error(new Tt("Failed to parse stream"));return}i.close();return}s+=a;let l=s.match(CE),u;for(;l;){try{u=JSON.parse(l[1])}catch{i.error(new Tt(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(u),s=s.substring(l[0].length),l=s.match(CE)}return r()}).catch(a=>{let o=a;throw o.stack=a.stack,o.name==="AbortError"?o=new P2("Request aborted when reading from the stream"):o=new Tt("Error reading from the stream"),o})}}})}function QF(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const i of t){if(i.candidates){let s=0;for(const r of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[s]||(n.candidates[s]={index:s}),n.candidates[s].citationMetadata=r.citationMetadata,n.candidates[s].groundingMetadata=r.groundingMetadata,n.candidates[s].finishReason=r.finishReason,n.candidates[s].finishMessage=r.finishMessage,n.candidates[s].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[s].content||(n.candidates[s].content={role:r.content.role||"user",parts:[]});const a={};for(const o of r.content.parts)o.text&&(a.text=o.text),o.functionCall&&(a.functionCall=o.functionCall),o.executableCode&&(a.executableCode=o.executableCode),o.codeExecutionResult&&(a.codeExecutionResult=o.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),n.candidates[s].content.parts.push(a)}s++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e,n,i){const s=await $c(e,Rr.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return XF(s)}async function O2(t,e,n,i){const r=await(await $c(e,Rr.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:Ov(r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function hc(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return JF(e)}function JF(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,s=!1;for(const r of t)"functionResponse"in r?(n.parts.push(r),s=!0):(e.parts.push(r),i=!0);if(i&&s)throw new Tt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!s)throw new Tt("No content is provided for sending chat message.");return i?e:n}function ZF(t,e){var n;let i={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new ws("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=t.contents}else if(s)i=Object.assign(Object.assign({},i),t.generateContentRequest);else{const r=hc(t);i.contents=[r]}return{generateContentRequest:i}}function RE(t){let e;return t.contents?e=t:e={contents:[hc(t)]},t.systemInstruction&&(e.systemInstruction=M2(t.systemInstruction)),e}function ez(t){return typeof t=="string"||Array.isArray(t)?{content:hc(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],tz={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function nz(t){let e=!1;for(const n of t){const{role:i,parts:s}=n;if(!e&&i!=="user")throw new Tt(`First content should be with role 'user', got ${i}`);if(!vE.includes(i))throw new Tt(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(vE)}`);if(!Array.isArray(s))throw new Tt("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Tt("Each Content should have at least one part");const r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of IE)l in o&&(r[l]+=1);const a=tz[i];for(const o of IE)if(!a.includes(o)&&r[o]>0)throw new Tt(`Content with role '${i}' can't contain '${o}' part`);e=!0}}function NE(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="SILENT_ERROR";class iz{constructor(e,n,i,s={}){this.model=n,this.params=i,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i!=null&&i.history&&(nz(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var i,s,r,a,o,l;await this._sendPromise;const u=hc(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),n);let f;return this._sendPromise=this._sendPromise.then(()=>O2(this._apiKey,this.model,d,m)).then(g=>{var w;if(NE(g.response)){this._history.push(u);const E=Object.assign({parts:[],role:"model"},(w=g.response.candidates)===null||w===void 0?void 0:w[0].content);this._history.push(E)}else{const E=Qi(g.response);E&&console.warn(`sendMessage() was unsuccessful. ${E}. Inspect response object for details.`)}f=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,f}async sendMessageStream(e,n={}){var i,s,r,a,o,l;await this._sendPromise;const u=hc(e),d={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},m=Object.assign(Object.assign({},this._requestOptions),n),f=j2(this._apiKey,this.model,d,m);return this._sendPromise=this._sendPromise.then(()=>f).catch(g=>{throw new Error(DE)}).then(g=>g.response).then(g=>{if(NE(g)){this._history.push(u);const w=Object.assign({},g.candidates[0].content);w.role||(w.role="model"),this._history.push(w)}else{const w=Qi(g);w&&console.warn(`sendMessageStream() was unsuccessful. ${w}. Inspect response object for details.`)}}).catch(g=>{g.message!==DE&&console.error(g)}),f}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sz(t,e,n,i){return(await $c(e,Rr.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(t,e,n,i){return(await $c(e,Rr.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}async function az(t,e,n,i){const s=n.requests.map(a=>Object.assign(Object.assign({},a),{model:e}));return(await $c(e,Rr.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,n,i={}){this.apiKey=e,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=M2(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var i;const s=RE(e),r=Object.assign(Object.assign({},this._requestOptions),n);return O2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}async generateContentStream(e,n={}){var i;const s=RE(e),r=Object.assign(Object.assign({},this._requestOptions),n);return j2(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},s),r)}startChat(e){var n;return new iz(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const i=ZF(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),n);return sz(this.apiKey,this.model,i,s)}async embedContent(e,n={}){const i=ez(e),s=Object.assign(Object.assign({},this._requestOptions),n);return rz(this.apiKey,this.model,i,s)}async batchEmbedContents(e,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return az(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new Tt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new kE(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,i){if(!e.name)throw new ws("Cached content must contain a `name` field.");if(!e.model)throw new ws("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const a of s)if(n!=null&&n[a]&&e[a]&&(n==null?void 0:n[a])!==e[a]){if(a==="model"){const o=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new ws(`Different value for "${a}" specified in modelParams (${n[a]}) and cachedContent (${e[a]})`)}const r=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new kE(this.apiKey,r,i)}}const PE=new V2("AIzaSyDnXONcQCr0ItuhYQHTGnzZ9UsX3fE3dXc"),Qa=PE?PE.getGenerativeModel({model:"gemini-1.5-flash"}):null,oz=async(t,e,n)=>{if(!Qa)return{reflection:"Great work today! Every step forward is progress. Keep building those positive habits - you're on an amazing journey of growth!",error:null};try{const i=`
    Act as a growth coach and motivational mentor. A user at level ${e} has journaled this: "${t}"
    
    They completed these habits today: ${n.map(o=>o.name).join(", ")}
    
    Provide:
    1. Encouraging feedback (2-3 sentences)
    2. One specific insight about their growth
    3. A motivational message for tomorrow
    
    Keep it personal, uplifting, and focused on their journey. Use a warm but inspiring tone.
    `;return{reflection:(await(await Qa.generateContent(i)).response).text(),error:null}}catch(i){return console.error("Gemini API Error:",i),{reflection:"Great work today! Every step forward is progress. Keep building those positive habits - you're on an amazing journey of growth!",error:i.message}}},lz=async(t,e,n)=>{if(!Qa){const i=["Every level up starts with showing up.","Your consistency is your superpower.","Small habits, massive transformations.","Progress over perfection, always.","You're building the future you deserve."];return{quote:i[Math.floor(Math.random()*i.length)],error:null}}try{const i=`
    Generate a short, powerful motivational quote for a user who is:
    - Level ${t} in their personal growth journey
    - On a ${e}-day streak
    - It's ${n}
    
    Make it personal, inspiring, and relevant to habit building. Keep it under 20 words.
    `;return{quote:(await(await Qa.generateContent(i)).response).text().replace(/"/g,""),error:null}}catch(i){console.error("Gemini API Error:",i);const s=["Every level up starts with showing up.","Your consistency is your superpower.","Small habits, massive transformations.","Progress over perfection, always.","You're building the future you deserve."];return{quote:s[Math.floor(Math.random()*s.length)],error:i.message}}},cz=async(t,e,n)=>{if(!Qa)return{message:`🎉 LEVEL UP! 🎉

Congratulations! You've reached Level ${t}!

Your dedication to growth has unlocked new potential. The habits you've built are transforming you into the person you're meant to become. Ready for the next challenge?`,error:null};try{const i=`
    A user just leveled up from level ${e} to level ${t}!
    Their top habits are: ${n.join(", ")}
    
    Create an epic, celebratory message that:
    1. Congratulates them on this achievement
    2. Acknowledges their growth journey
    3. Hints at new challenges and opportunities ahead
    4. Feels like a video game level-up notification
    
    Make it exciting and empowering! Use emojis sparingly but effectively.
    `;return{message:(await(await Qa.generateContent(i)).response).text(),error:null}}catch(i){return console.error("Gemini API Error:",i),{message:`🎉 LEVEL UP! 🎉

Congratulations! You've reached Level ${t}!

Your dedication to growth has unlocked new potential. The habits you've built are transforming you into the person you're meant to become. Ready for the next challenge?`,error:i.message}}},uz=()=>{const{showLevelUpModal:t,level:e,closeLevelUpModal:n}=On(),[i,s]=D.useState(""),[r,a]=D.useState(!1);D.useEffect(()=>{t&&e>1&&(a(!0),cz(e,e-1,["Daily Workout","Reading","Meditation"]).then(l=>{l.message&&s(l.message)}).catch(l=>{console.error("Error generating level up message:",l),s(`🎉 LEVEL UP! 🎉

Congratulations! You've reached Level ${e}!

Your dedication to growth has unlocked new potential. Ready for the next challenge?`)}).finally(()=>{a(!1)}))},[t,e]);const o=()=>{n(),s("")};return h.jsx(Ui,{children:t&&h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),h.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((l,u)=>h.jsx(M.div,{className:"absolute w-2 h-2 bg-yellow-400 rounded-full",initial:{x:"50vw",y:"50vh",scale:0},animate:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,scale:[0,1,0]},transition:{duration:2,delay:u*.1,ease:"easeOut"}},u))}),h.jsxs(M.div,{initial:{opacity:0,scale:.5,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:50},transition:{type:"spring",stiffness:300,damping:30},className:"relative w-full max-w-lg bg-gradient-to-br from-dark-800 to-dark-900 rounded-2xl border-2 border-yellow-500/50 shadow-2xl overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 animate-pulse"}),h.jsxs("div",{className:"relative p-8 text-center",children:[h.jsx(M.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring",stiffness:300},className:"mx-auto w-24 h-24 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mb-6 shadow-lg shadow-yellow-500/50",children:h.jsx("span",{className:"text-3xl font-gaming font-bold text-white",children:e})}),h.jsx(M.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-4xl font-gaming font-bold text-gradient mb-2",children:"LEVEL UP!"}),h.jsxs(M.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"text-xl text-yellow-400 mb-6",children:["You've reached Level ",e,"!"]}),h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"bg-dark-700/50 rounded-lg p-4 mb-6 border border-yellow-500/30",children:r?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"text-gray-300",children:"Generating celebration message..."})]}):h.jsx("p",{className:"text-gray-200 whitespace-pre-line leading-relaxed",children:i||`🎉 Amazing work! You've reached Level ${e}! Your consistency and dedication are paying off. Keep pushing forward!`})}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},className:"grid grid-cols-3 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-dark-700/30 rounded-lg p-3",children:[h.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e}),h.jsx("div",{className:"text-xs text-gray-400",children:"Current Level"})]}),h.jsxs("div",{className:"bg-dark-700/30 rounded-lg p-3",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"+1"}),h.jsx("div",{className:"text-xs text-gray-400",children:"Level Gained"})]}),h.jsxs("div",{className:"bg-dark-700/30 rounded-lg p-3",children:[h.jsx("div",{className:"text-2xl font-bold text-green-400",children:"∞"}),h.jsx("div",{className:"text-xs text-gray-400",children:"Potential"})]})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.3},className:"mb-6",children:[h.jsx("blockquote",{className:"text-gray-300 italic",children:'"Success is not final, failure is not fatal: it is the courage to continue that counts."'}),h.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"- Winston Churchill"})]}),h.jsx(M.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.5},onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"Continue Your Journey"})]}),h.jsx("div",{className:"absolute top-4 left-4 text-yellow-400 text-2xl animate-bounce",children:"⭐"}),h.jsx("div",{className:"absolute top-4 right-4 text-yellow-400 text-2xl animate-bounce",style:{animationDelay:"0.5s"},children:"🎉"}),h.jsx("div",{className:"absolute bottom-4 left-4 text-yellow-400 text-2xl animate-bounce",style:{animationDelay:"1s"},children:"🏆"}),h.jsx("div",{className:"absolute bottom-4 right-4 text-yellow-400 text-2xl animate-bounce",style:{animationDelay:"1.5s"},children:"🚀"})]})]})})},hz=({className:t=""})=>{const[e,n]=D.useState(!1),[i,s]=D.useState(""),[r,a]=D.useState(""),[o,l]=D.useState(""),[u,d]=D.useState(!1),[m,f]=D.useState(null),{user:g,profile:w}=jn(),{level:E}=On(),{getTodaysCompletedHabits:T}=Ur();D.useEffect(()=>{v()},[E]);const v=async()=>{try{const S=x(),_=await lz(E,0,S);_.quote&&l(_.quote)}catch(S){console.error("Error loading motivational quote:",S)}},x=()=>{const S=new Date().getHours();return S<12?"morning":S<17?"afternoon":S<21?"evening":"night"},b=async()=>{if(!(!i.trim()||u)){d(!0);try{const S=T(),_=await oz(i,E,S);_.reflection&&(a(_.reflection),f(new Date().toISOString().split("T")[0]))}catch(S){console.error("Error generating reflection:",S),a("Thank you for sharing your thoughts! Every reflection is a step toward greater self-awareness and growth. Keep up the amazing work!")}finally{d(!1)}}},R=()=>{s(""),a("")},j=new Date().toISOString().split("T")[0],V=m===j;return e?h.jsxs(M.div,{initial:{height:"auto"},animate:{height:"auto"},className:`card-glow ${t}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient",children:"DAILY REFLECTION"}),h.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white transition-colors",children:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&h.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-gradient-to-r from-primary-500/10 to-accent-500/10 rounded-lg border border-primary-500/30",children:h.jsxs("p",{className:"text-white italic text-sm",children:['"',o,'"']})}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"How was your day? What did you learn or accomplish?"}),h.jsx("textarea",{value:i,onChange:S=>s(S.target.value),placeholder:"Share your thoughts, challenges, wins, or anything on your mind...",className:"w-full h-32 px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-primary-500 resize-none",disabled:u})]}),h.jsxs("div",{className:"flex space-x-3 mb-4",children:[h.jsx(M.button,{onClick:b,disabled:!i.trim()||u,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex-1 btn-primary py-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?h.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),h.jsx("span",{children:"Generating Insights..."})]}):"Get AI Reflection"}),(i||r)&&h.jsx(M.button,{onClick:R,whileHover:{scale:1.02},whileTap:{scale:.98},className:"btn-secondary px-4 py-2",children:"Clear"})]}),h.jsx(Ui,{children:r&&h.jsxs(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gradient-to-r from-accent-500/10 to-primary-500/10 rounded-lg border border-accent-500/30 p-4",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-accent-500 to-primary-500 rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-sm font-bold",children:"AI"})}),h.jsx("h4",{className:"font-semibold text-white",children:"Your Personal Growth Coach"})]}),h.jsx("div",{className:"text-gray-200 whitespace-pre-line leading-relaxed",children:r}),h.jsx("div",{className:"mt-3 pt-3 border-t border-accent-500/20",children:h.jsxs("p",{className:"text-xs text-gray-400",children:["Generated on ",new Date().toLocaleDateString()," • Powered by Gemini AI"]})})]})}),V&&!r&&h.jsxs("div",{className:"text-center py-4",children:[h.jsx("div",{className:"text-green-400 text-2xl mb-2",children:"✅"}),h.jsx("p",{className:"text-green-400 font-medium",children:"Reflection completed today!"}),h.jsx("p",{className:"text-gray-400 text-sm",children:"Come back tomorrow for new insights"})]}),!i&&!r&&h.jsxs("div",{className:"bg-dark-700/30 rounded-lg p-3 mt-4",children:[h.jsx("h5",{className:"text-sm font-semibold text-gray-300 mb-2",children:"💡 Reflection Tips:"}),h.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[h.jsx("li",{children:"• What went well today?"}),h.jsx("li",{children:"• What challenges did you face?"}),h.jsx("li",{children:"• What did you learn about yourself?"}),h.jsx("li",{children:"• How do you feel about your progress?"})]})]})]}):h.jsxs(M.div,{className:`card cursor-pointer ${t}`,whileHover:{scale:1.02},onClick:()=>n(!0),children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient",children:"DAILY REFLECTION"}),h.jsx("p",{className:"text-gray-400 text-sm mt-1",children:V?"Reflection completed today":"Share your thoughts and get AI insights"})]}),h.jsx("div",{className:"text-2xl",children:V?"✅":"💭"})]}),o&&h.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-primary-500/10 to-accent-500/10 rounded-lg border border-primary-500/30",children:h.jsxs("p",{className:"text-white italic text-sm",children:['"',o,'"']})})]})},dz=({level:t,xp:e})=>{const[n,i]=D.useState(!1),[s,r]=D.useState(!1),a=D.useMemo(()=>t>=100?{rank:"SHADOW MONARCH",color:"#000000",glow:"#8B5CF6",avatar:"👤",title:"The Absolute Being",aura:"shadow-monarch"}:t>=50?{rank:"S-RANK",color:"#FFD700",glow:"#FFA500",avatar:"⚡",title:"Elite Hunter",aura:"s-rank"}:t>=25?{rank:"A-RANK",color:"#9333EA",glow:"#A855F7",avatar:"🔥",title:"Advanced Hunter",aura:"a-rank"}:t>=10?{rank:"B-RANK",color:"#3B82F6",glow:"#60A5FA",avatar:"⚔️",title:"Skilled Hunter",aura:"b-rank"}:t>=5?{rank:"C-RANK",color:"#10B981",glow:"#34D399",avatar:"🛡️",title:"Hunter",aura:"c-rank"}:t>=2?{rank:"D-RANK",color:"#F59E0B",glow:"#FBBF24",avatar:"⭐",title:"Novice Hunter",aura:"d-rank"}:{rank:"E-RANK",color:"#6B7280",glow:"#9CA3AF",avatar:"🔰",title:"Awakened",aura:"e-rank"},[t]),o=({count:u,color:d,size:m=4})=>h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(u)].map((f,g)=>h.jsx(M.div,{className:"absolute w-1 h-1 rounded-full",style:{backgroundColor:d},initial:{x:Math.random()*300,y:Math.random()*300,scale:0,opacity:0},animate:{x:Math.random()*300,y:Math.random()*300,scale:[0,1,0],opacity:[0,1,0]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},g))}),l=()=>h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(3)].map((u,d)=>h.jsx(M.div,{className:"absolute text-4xl opacity-30",style:{left:`${20+d*30}%`,top:`${60+Math.sin(d)*20}%`},animate:{y:[0,-10,0],opacity:[.3,.6,.3],scale:[.8,1,.8]},transition:{duration:3,repeat:1/0,delay:d*.5},children:"👥"},d))});return h.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[h.jsx(M.div,{className:"absolute inset-0 rounded-lg",style:{background:`radial-gradient(circle, ${a.glow}20 0%, transparent 70%)`},animate:{scale:[1,1.1,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),t>=10&&h.jsx(o,{count:Math.min(t,20),color:a.glow}),t>=20&&h.jsx(l,{}),h.jsxs(M.div,{className:"relative z-10 flex flex-col items-center",onHoverStart:()=>i(!0),onHoverEnd:()=>i(!1),whileHover:{scale:1.05},animate:{y:[0,-5,0]},transition:{y:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.2}},children:[h.jsx(M.div,{className:"mb-4 px-4 py-2 rounded-lg font-gaming font-bold text-sm border-2 shadow-lg",style:{backgroundColor:a.color,borderColor:a.glow,color:a.rank==="SHADOW MONARCH"?"#FFFFFF":"#000000",boxShadow:`0 0 20px ${a.glow}80`},animate:{boxShadow:[`0 0 20px ${a.glow}80`,`0 0 30px ${a.glow}`,`0 0 20px ${a.glow}80`]},transition:{duration:2,repeat:1/0},children:a.rank}),h.jsx(M.div,{className:"text-8xl mb-4 filter drop-shadow-lg",animate:{rotate:n?[0,5,-5,0]:0,scale:n?1.1:1},transition:{duration:.5},style:{filter:`drop-shadow(0 0 20px ${a.glow})`},children:a.avatar}),h.jsxs(M.div,{className:"text-3xl font-gaming font-bold text-white mb-2",animate:{textShadow:[`0 0 10px ${a.glow}`,`0 0 20px ${a.glow}`,`0 0 10px ${a.glow}`]},transition:{duration:2,repeat:1/0},children:["LEVEL ",t]}),h.jsx("div",{className:"text-sm text-gray-300 font-medium mb-4",children:a.title}),h.jsx("div",{className:"w-48 bg-dark-700 rounded-full h-3 mb-4 overflow-hidden",children:h.jsx(M.div,{className:"h-full rounded-full",style:{background:`linear-gradient(90deg, ${a.color}, ${a.glow})`},initial:{width:0},animate:{width:`${e%100}%`},transition:{duration:1,ease:"easeOut"}})}),h.jsxs("div",{className:"text-sm text-gray-400",children:[e%100,"/100 XP to next level"]}),h.jsx(Ui,{children:s&&h.jsx(M.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:2},exit:{opacity:0,scale:3},transition:{duration:1},children:h.jsx("div",{className:"w-full h-full rounded-full",style:{background:`radial-gradient(circle, ${a.glow} 0%, transparent 70%)`}})})}),a.rank==="SHADOW MONARCH"&&h.jsx(M.div,{className:"absolute inset-0 pointer-events-none",animate:{background:["radial-gradient(circle, #8B5CF6 0%, transparent 70%)","radial-gradient(circle, #000000 0%, transparent 70%)","radial-gradient(circle, #8B5CF6 0%, transparent 70%)"]},transition:{duration:3,repeat:1/0}})]}),n&&h.jsx(M.div,{className:"absolute inset-0 pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:h.jsx(o,{count:30,color:a.glow})})]})},fz=()=>{const{level:t,currentXP:e,totalXP:n}=On(),{getTodaysCompletedHabits:i,habits:s}=Ur(),r=i().length,a=s.length>0?Math.round(r/s.length*100):0;return h.jsxs("div",{className:"w-full h-full relative bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0",children:h.jsx(M.div,{className:"absolute inset-0 opacity-20",style:{background:`
              radial-gradient(circle at 20% 80%, #3B82F6 0%, transparent 50%),
              radial-gradient(circle at 80% 20%, #9333EA 0%, transparent 50%),
              radial-gradient(circle at 40% 40%, #10B981 0%, transparent 50%)
            `},animate:{scale:[1,1.1,1],opacity:[.2,.3,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}})}),h.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:`
            linear-gradient(rgba(59, 130, 246, 0.3) 1px, transparent 1px),
            linear-gradient(90deg, rgba(59, 130, 246, 0.3) 1px, transparent 1px)
          `,backgroundSize:"20px 20px"}}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx(dz,{level:t,xp:e})}),h.jsx("div",{className:"absolute top-4 left-4 z-20",children:h.jsxs(M.div,{className:"bg-dark-800/90 backdrop-blur-sm rounded-lg p-4 border border-primary-500/30",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"TODAY'S PROGRESS"}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("div",{className:"text-lg font-bold text-primary-400",children:[r,"/",s.length]}),h.jsx("div",{className:"text-sm text-gray-300",children:"Habits"})]}),h.jsx("div",{className:"w-24 bg-dark-700 rounded-full h-2 mt-2",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full",initial:{width:0},animate:{width:`${a}%`},transition:{duration:1,delay:.8}})})]})}),h.jsx("div",{className:"absolute top-4 right-4 z-20",children:h.jsxs(M.div,{className:"bg-dark-800/90 backdrop-blur-sm rounded-lg p-4 border border-accent-500/30",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"TOTAL XP"}),h.jsx("div",{className:"text-lg font-bold text-accent-400",children:n.toLocaleString()}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"All-time earned"})]})}),h.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20",children:h.jsx(M.div,{className:"bg-dark-800/90 backdrop-blur-sm rounded-lg px-6 py-3 border border-purple-500/30",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"POWER LEVEL"}),h.jsx(M.div,{className:"text-2xl font-gaming font-bold text-purple-400",animate:{textShadow:["0 0 10px #A855F7","0 0 20px #A855F7","0 0 10px #A855F7"]},transition:{duration:2,repeat:1/0},children:(t*1e3+n).toLocaleString()})]})})}),h.jsx(M.button,{className:"absolute bottom-4 right-4 z-20 w-12 h-12 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center text-2xl shadow-lg",whileHover:{scale:1.1},whileTap:{scale:.9},animate:{boxShadow:["0 0 20px rgba(245, 158, 11, 0.5)","0 0 30px rgba(245, 158, 11, 0.8)","0 0 20px rgba(245, 158, 11, 0.5)"]},transition:{duration:2,repeat:1/0},onClick:()=>{},children:"⚡"})]})},L2=({particleCount:t=25,colors:e=["#3b82f6","#8b5cf6","#ec4899"],speed:n=1,size:i="small",type:s="floating"})=>{const r=D.useRef(null);D.useEffect(()=>{const m=r.current;if(m){m.innerHTML="";for(let f=0;f<t;f++){const g=a(f,e,n,i,s);m.appendChild(g)}return()=>{m&&(m.innerHTML="")}}},[t,e,n,i,s]);const a=(m,f,g,w,E)=>{const T=document.createElement("div");T.className=`particle particle-${E}`;const v=f[Math.floor(Math.random()*f.length)],x={small:Math.random()*4+2,medium:Math.random()*8+4,large:Math.random()*12+6},b=x[w]||x.small,R=Math.random()*100,j=Math.random()*100,V=(Math.random()*10+5)/g,S=Math.random()*5;switch(E){case"floating":o(T,v,b,R,j,V,S);break;case"explosion":l(T,v,b,m,t,V);break;case"spiral":u(T,v,b,m,V,S);break;case"magic":d(T,v,b,R,j,V,S);break;default:o(T,v,b,R,j,V,S)}return T},o=(m,f,g,w,E,T,v)=>{m.style.cssText=`
      position: absolute;
      width: ${g}px;
      height: ${g}px;
      background: radial-gradient(circle, ${f}, transparent);
      border-radius: 50%;
      left: ${w}%;
      top: ${E}%;
      opacity: 0.7;
      animation: particle-float ${T}s ease-in-out infinite;
      animation-delay: ${v}s;
      pointer-events: none;
      z-index: 1;
      box-shadow: 0 0 ${g*2}px ${f}40;
    `},l=(m,f,g,w,E,T)=>{const v=w/E*360,x=Math.random()*200+100;m.style.cssText=`
      position: absolute;
      width: ${g}px;
      height: ${g}px;
      background: radial-gradient(circle, ${f}, transparent);
      border-radius: 50%;
      left: 50%;
      top: 50%;
      opacity: 1;
      transform: translate(-50%, -50%);
      animation: particle-explosion-${w} ${T}s ease-out forwards;
      pointer-events: none;
      z-index: 1;
      box-shadow: 0 0 ${g*3}px ${f};
    `;const b=`
      @keyframes particle-explosion-${w} {
        0% {
          transform: translate(-50%, -50%) scale(0);
          opacity: 1;
        }
        50% {
          opacity: 1;
        }
        100% {
          transform: translate(
            calc(-50% + ${Math.cos(v*Math.PI/180)*x}px),
            calc(-50% + ${Math.sin(v*Math.PI/180)*x}px)
          ) scale(0.5);
          opacity: 0;
        }
      }
    `;if(!document.querySelector(`#explosion-${w}`)){const R=document.createElement("style");R.id=`explosion-${w}`,R.textContent=b,document.head.appendChild(R)}},u=(m,f,g,w,E,T)=>{m.style.cssText=`
      position: absolute;
      width: ${g}px;
      height: ${g}px;
      background: radial-gradient(circle, ${f}, transparent);
      border-radius: 50%;
      left: 50%;
      top: 50%;
      opacity: 0.8;
      transform: translate(-50%, -50%);
      animation: particle-spiral-${w} ${E}s linear infinite;
      animation-delay: ${T}s;
      pointer-events: none;
      z-index: 1;
      box-shadow: 0 0 ${g*2}px ${f}60;
    `;const R=`
      @keyframes particle-spiral-${w} {
        0% {
          transform: translate(-50%, -50%) 
                     rotate(0deg) 
                     translateX(${100*(w/10)}px) 
                     rotate(0deg);
        }
        100% {
          transform: translate(-50%, -50%) 
                     rotate(360deg) 
                     translateX(${100*(w/10)}px) 
                     rotate(-360deg);
        }
      }
    `;if(!document.querySelector(`#spiral-${w}`)){const j=document.createElement("style");j.id=`spiral-${w}`,j.textContent=R,document.head.appendChild(j)}},d=(m,f,g,w,E,T,v)=>{m.style.cssText=`
      position: absolute;
      width: ${g}px;
      height: ${g}px;
      background: radial-gradient(circle, ${f}, transparent);
      border-radius: 50%;
      left: ${w}%;
      top: ${E}%;
      opacity: 0.9;
      animation: particle-magic ${T}s ease-in-out infinite;
      animation-delay: ${v}s;
      pointer-events: none;
      z-index: 1;
      box-shadow: 
        0 0 ${g*2}px ${f},
        0 0 ${g*4}px ${f}40,
        inset 0 0 ${g}px ${f}80;
      filter: blur(0.5px);
    `};return h.jsx("div",{ref:r,className:"particle-container absolute inset-0 overflow-hidden pointer-events-none",style:{zIndex:1}})},jE=t=>h.jsx(L2,{type:"floating",particleCount:30,...t}),yd=t=>h.jsx(L2,{type:"magic",particleCount:25,colors:["#ffd700","#ff6b6b","#4ecdc4","#45b7d1"],...t}),mz=`
  @keyframes particle-magic {
    0%, 100% {
      transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
      opacity: 0.9;
    }
    25% {
      transform: translateY(-15px) translateX(10px) rotate(90deg) scale(1.2);
      opacity: 1;
    }
    50% {
      transform: translateY(-5px) translateX(-8px) rotate(180deg) scale(0.8);
      opacity: 0.7;
    }
    75% {
      transform: translateY(-20px) translateX(15px) rotate(270deg) scale(1.1);
      opacity: 1;
    }
  }
`;if(typeof document<"u"&&!document.querySelector("#magic-particle-styles")){const t=document.createElement("style");t.id="magic-particle-styles",t.textContent=mz,document.head.appendChild(t)}const _o=()=>{const[t,e]=D.useState(!0),[n,i]=D.useState(.7);D.useEffect(()=>{Lt.setVolume(n),t?Lt.enable():Lt.disable()},[t,n]);const s=D.useCallback(l=>{t&&Lt.play(l)},[t]),r={buttonHover:()=>s("buttonHover"),buttonClick:()=>s("buttonClick"),cardHover:()=>s("cardHover"),levelUp:()=>s("levelUp"),xpGain:()=>s("xpGain"),questComplete:()=>s("questComplete"),epicSuccess:()=>s("epicSuccess"),powerUp:()=>s("powerUp"),achievement:()=>s("achievement"),backgroundHum:()=>s("backgroundHum"),magicSparkle:()=>s("magicSparkle"),notification:()=>s("notification"),warning:()=>s("warning"),error:()=>s("error")},a=D.useCallback(()=>{const l=!t;return e(l),l},[t]),o=D.useCallback(l=>{const u=Math.max(0,Math.min(1,l));i(u),Lt.setVolume(u)},[]);return{sounds:r,isEnabled:t,volume:n,toggleSounds:a,changeVolume:o,playSound:s}},Kr=(t,e="buttonClick")=>{const{sounds:n}=_o(),i=D.useCallback(r=>{n[e]&&n[e](),t&&t(r)},[t,n,e]),s=D.useCallback(()=>{n.buttonHover()},[n]);return{onClick:i,onMouseEnter:s}},pz=()=>{const{sounds:t}=_o(),e=D.useCallback(()=>{t.levelUp(),setTimeout(()=>{t.epicSuccess()},800)},[t]),n=D.useCallback(s=>{t.xpGain(),s>=100&&setTimeout(()=>{t.powerUp()},300)},[t]),i=D.useCallback(()=>{t.questComplete(),setTimeout(()=>{t.achievement()},600)},[t]);return{playLevelUp:e,playXPGain:n,playQuestComplete:i}},gz=()=>{const{sounds:t,isEnabled:e,volume:n,toggleSounds:i,changeVolume:s}=_o(),[r,a]=D.useState(!1),o=u=>{const d=parseFloat(u.target.value);s(d)},l=[{name:"levelUp",label:"🎉 Level Up",color:"from-yellow-500 to-orange-500"},{name:"xpGain",label:"⭐ XP Gain",color:"from-blue-500 to-purple-500"},{name:"questComplete",label:"🏆 Quest Complete",color:"from-green-500 to-emerald-500"},{name:"epicSuccess",label:"💥 Epic Success",color:"from-red-500 to-pink-500"},{name:"magicSparkle",label:"✨ Magic Sparkle",color:"from-purple-500 to-indigo-500"},{name:"achievement",label:"🎖️ Achievement",color:"from-amber-500 to-yellow-500"}];return h.jsxs(h.Fragment,{children:[h.jsx(M.button,{onClick:()=>a(!r),whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full flex items-center justify-center text-2xl shadow-lg transition-all duration-300 ${e?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-600 text-gray-300"}`,style:{boxShadow:e?"0 0 20px rgba(59, 130, 246, 0.5), 0 0 40px rgba(147, 51, 234, 0.3)":"0 4px 15px rgba(0, 0, 0, 0.3)"},children:e?"🔊":"🔇"}),h.jsx(Ui,{children:r&&h.jsxs(M.div,{initial:{opacity:0,scale:.8,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:50},transition:{type:"spring",damping:20,stiffness:300},className:"fixed bottom-48 right-6 z-40 w-80 bg-gray-800 border border-gray-700 rounded-xl p-6 shadow-2xl backdrop-blur-sm",style:{background:"linear-gradient(135deg, rgba(31, 41, 55, 0.95), rgba(17, 24, 39, 0.95))",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5), 0 0 30px rgba(59, 130, 246, 0.2)"},children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient",children:"SOUND CONTROL"}),h.jsx(M.button,{onClick:()=>a(!1),whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},className:"text-gray-400 hover:text-white transition-colors",children:"✕"})]}),h.jsxs("div",{className:"space-y-4 mb-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-white font-medium",children:"Sound Effects"}),h.jsx(M.button,{onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},className:`relative w-12 h-6 rounded-full transition-all duration-300 ${e?"bg-blue-500":"bg-gray-600"}`,children:h.jsx(M.div,{animate:{x:e?24:0},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-white font-medium",children:"Volume"}),h.jsxs("span",{className:"text-blue-400 font-bold",children:[Math.round(n*100),"%"]})]}),h.jsx("div",{className:"relative",children:h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:n,onChange:o,disabled:!e,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, #3b82f6 0%, #3b82f6 ${n*100}%, #374151 ${n*100}%, #374151 100%)`}})})]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-sm font-gaming font-bold text-gray-300 mb-3",children:"TEST SOUNDS"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(u=>h.jsx(M.button,{onClick:()=>t[u.name]&&t[u.name](),disabled:!e,whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`p-2 rounded-lg text-xs font-medium text-white transition-all duration-200 ${e?`bg-gradient-to-r ${u.color} hover:shadow-lg`:"bg-gray-600 cursor-not-allowed"}`,style:{boxShadow:e?"0 4px 15px rgba(0, 0, 0, 0.3)":"none"},children:u.label},u.name))})]}),h.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg border border-blue-500/30",children:h.jsx("p",{className:"text-xs text-gray-300 text-center",children:"🎵 Epic Solo Leveling sound effects enhance your productivity journey!"})})]})}),h.jsx("style",{jsx:!0,children:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: linear-gradient(135deg, #3b82f6, #8b5cf6);
          cursor: pointer;
          box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
          transition: all 0.2s ease;
        }
        
        .slider::-webkit-slider-thumb:hover {
          transform: scale(1.2);
          box-shadow: 0 0 15px rgba(59, 130, 246, 0.8);
        }
        
        .slider::-moz-range-thumb {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: linear-gradient(135deg, #3b82f6, #8b5cf6);
          cursor: pointer;
          border: none;
          box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .slider:disabled::-webkit-slider-thumb {
          background: #6b7280;
          box-shadow: none;
        }
        
        .slider:disabled::-moz-range-thumb {
          background: #6b7280;
          box-shadow: none;
        }
      `})]})},yz=({children:t,className:e=""})=>{const n={initial:{opacity:0,scale:.8,rotateX:-15,y:100,filter:"blur(10px)"},in:{opacity:1,scale:1,rotateX:0,y:0,filter:"blur(0px)"},out:{opacity:0,scale:1.2,rotateX:15,y:-100,filter:"blur(10px)"}},i={type:"tween",ease:"anticipate",duration:.8};return h.jsx(M.div,{className:`min-h-screen perspective-1000 ${e}`,initial:"initial",animate:"in",exit:"out",variants:n,transition:i,style:{transformStyle:"preserve-3d"},children:t})},vz=({children:t,className:e=""})=>{const n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}};return h.jsx(M.div,{variants:n,initial:"hidden",animate:"visible",className:e,children:t})},Jm=({children:t,className:e=""})=>{const n={hidden:{opacity:0,y:30,rotateX:-10,scale:.9},visible:{opacity:1,y:0,rotateX:0,scale:1,transition:{duration:.6,type:"spring",stiffness:100}}};return h.jsx(M.div,{variants:n,className:e,style:{transformStyle:"preserve-3d"},children:t})},OE=new V2("AIzaSyDnXONcQCr0ItuhYQHTGnzZ9UsX3fE3dXc"),xz=()=>{const[t,e]=D.useState(!1),[n,i]=D.useState([]),[s,r]=D.useState(""),[a,o]=D.useState(!1),[l,u]=D.useState("motivational"),[d,m]=D.useState("coach"),f=D.useRef(null),{sounds:g}=_o(),{user:w,profile:E}=jn(),{level:T,currentXP:v,totalXP:x}=On(),{habits:b,getTodaysCompletedHabits:R}=Ur(),j={motivational:{name:"Sung Jin-Woo",avatar:"⚡",style:"Epic and motivational like the Shadow Monarch",color:"from-blue-500 to-purple-600"},analytical:{name:"Strategic Advisor",avatar:"🧠",style:"Data-driven and analytical",color:"from-green-500 to-teal-600"},supportive:{name:"Gentle Guide",avatar:"🌟",style:"Supportive and understanding",color:"from-pink-500 to-rose-600"},challenger:{name:"Drill Sergeant",avatar:"🔥",style:"Tough love and challenging",color:"from-red-500 to-orange-600"}};D.useEffect(()=>{n.length===0&&i([{id:1,type:"ai",content:`🌟 **Welcome, ${(w==null?void 0:w.displayName)||"Hunter"}!** 🌟

I'm your **Ultimate AI Productivity Coach** - powered by advanced AI and designed to help you become the most productive version of yourself!

**Current Status:**
⚡ Level ${T}
🎯 ${v} XP
✅ ${R().length} habits completed today

**What can I help you with?**
• 📊 Analyze your productivity patterns
• 🎯 Set and optimize goals
• 💡 Suggest new habits
• 🧠 Provide motivation and coaching
• 📈 Create personalized strategies

Type anything to get started! 🚀`,timestamp:Date.now(),personality:l}])},[w,T,v]),D.useEffect(()=>{var k;(k=f.current)==null||k.scrollIntoView({behavior:"smooth"})},[n]);const V=()=>{const k=R(),P=b.length>0?Math.round(k.length/b.length*100):0;return{user:{name:(w==null?void 0:w.displayName)||"User",level:T,currentXP:v,totalXP:x},productivity:{habitsTotal:b.length,habitsCompletedToday:k.length,completionRate:P,habits:b.map(N=>({name:N.name,category:N.category,difficulty:N.difficulty,xpValue:N.xpValue}))},personality:j[l],timestamp:new Date().toISOString(),context:"You are an advanced AI productivity coach in a Solo Leveling-themed app. Be motivational, insightful, and provide actionable advice."}},S=async k=>{if(!OE)return _(k);try{const P=OE.getGenerativeModel({model:"gemini-pro"}),N=V(),ke=`
You are ${N.personality.name}, an advanced AI productivity coach with the personality: ${N.personality.style}.

USER CONTEXT:
- Name: ${N.user.name}
- Level: ${N.user.level}
- Current XP: ${N.user.currentXP}
- Total XP: ${N.user.totalXP}
- Habits completed today: ${N.productivity.habitsCompletedToday}/${N.productivity.habitsTotal}
- Completion rate: ${N.productivity.completionRate}%

CURRENT HABITS:
${N.productivity.habits.map($=>`• ${$.name} (${$.category}, ${$.xpValue} XP)`).join(`
`)}

USER MESSAGE: "${k}"

INSTRUCTIONS:
1. Respond in character as ${N.personality.name}
2. Be ${N.personality.style.toLowerCase()}
3. Provide specific, actionable advice
4. Reference their current progress and habits when relevant
5. Use emojis and formatting for engagement
6. Keep responses concise but impactful (max 200 words)
7. Include Solo Leveling references when appropriate
8. Suggest specific improvements or new habits when relevant

Respond as ${N.personality.name}:`;return(await(await P.generateContent(ke)).response).text()}catch(P){return console.error("AI Error:",P),_(k)}},_=k=>{const P=V(),N=k.toLowerCase();if(N.includes("progress")||N.includes("analyze"))return`📊 **Progress Analysis** 📊

Great question! Here's what I see:

✅ **Current Status:** Level ${P.user.level} with ${P.user.currentXP} XP
🎯 **Today's Progress:** ${P.productivity.habitsCompletedToday}/${P.productivity.habitsTotal} habits completed (${P.productivity.completionRate}%)

${P.productivity.completionRate>=80?"🔥 **Excellent work!** You're crushing it today!":P.productivity.completionRate>=50?"💪 **Good progress!** Keep pushing forward!":"⚡ **Let's level up!** Every small step counts!"}

**Next Steps:**
• Focus on consistency over perfection
• Celebrate small wins
• ${P.productivity.habitsTotal<5?"Consider adding 1-2 more habits":"Master your current habits first"}

You've got this, Hunter! 🚀`;if(N.includes("motivat")||N.includes("inspire")){const Ze=[`⚡ **Rise, Shadow Monarch!** ⚡

Remember why you started this journey. Every habit you complete, every level you gain, brings you closer to becoming the strongest version of yourself!

🔥 **Your Power Level:** ${P.user.level}
⭐ **XP Earned:** ${P.user.currentXP}
🎯 **Completion Rate:** ${P.productivity.completionRate}%

${P.productivity.completionRate>=70?"You're already showing the discipline of a true Hunter!":"Every Hunter started where you are now. The difference? They never gave up!"}

**Remember:** The system chose you for a reason. Trust the process! 💪`,`🌟 **Hunter, Your Journey Continues!** 🌟

I see the fire in your determination! Level ${P.user.level} is just the beginning of your epic transformation.

**Today's Achievements:**
✅ ${P.productivity.habitsCompletedToday} quests completed
⚡ ${P.user.currentXP} XP earned
🔥 ${P.productivity.completionRate}% success rate

${P.productivity.completionRate>=80?"You're operating at S-Rank level!":"Every A-Rank Hunter had days like this. Keep grinding!"}

The strongest Hunters aren't born - they're forged through consistent daily battles. You're becoming unstoppable! 🚀`];return Ze[Math.floor(Math.random()*Ze.length)]}if(N.includes("habit")||N.includes("suggest")||N.includes("new")){const Ze=["🌅 **Morning Power Hour** - Start each day with 30 minutes of focused work","💧 **Hydration Quest** - Drink 8 glasses of water daily","📚 **Knowledge Absorption** - Read for 20 minutes daily","🧘 **Mental Fortress** - 10 minutes of meditation or deep breathing","🏃 **Physical Training** - 15 minutes of exercise or movement","📝 **Daily Reflection** - Write 3 things you're grateful for","🎯 **Priority Focus** - Identify your top 3 tasks each morning","📱 **Digital Detox** - 1 hour of phone-free time daily"],F=Ze[Math.floor(Math.random()*Ze.length)];return`💡 **Habit Suggestion** 💡

Based on your current level (${P.user.level}) and progress, here's a powerful habit to consider:

${F}

**Why this works:**
• Builds on your existing momentum
• Matches your current skill level
• Creates compound growth over time

**Pro Tip:** Start with just 5 minutes if it feels overwhelming. Consistency beats intensity every time!

Ready to add this to your arsenal? 🚀`}if(N.includes("goal")||N.includes("plan"))return`🎯 **Goal Setting Mastery** 🎯

Let's level up your goal-setting game!

**Your Current Power Level:** ${P.user.level}
**XP Progress:** ${P.user.currentXP}

**SMART Goal Framework:**
📍 **Specific** - What exactly do you want to achieve?
📊 **Measurable** - How will you track progress?
✅ **Achievable** - Is it realistic for your current level?
🎯 **Relevant** - Does it align with your vision?
⏰ **Time-bound** - When will you complete it?

**Next Level Strategy:**
• Break big goals into daily habits
• Focus on systems, not just outcomes
• Celebrate small wins along the way

What specific goal are you working toward? I'll help you create an epic action plan! 💪`;const ke={motivational:`⚡ **Greetings, Hunter!** ⚡

I sense great potential in you! At Level ${P.user.level} with ${P.user.currentXP} XP, you're already on the path to greatness.

**Today's Status:**
🎯 ${P.productivity.habitsCompletedToday}/${P.productivity.habitsTotal} quests completed
📈 ${P.productivity.completionRate}% success rate

Every Shadow Monarch started as an E-Rank Hunter. What matters is your determination to keep leveling up!

What challenge shall we conquer together today? 🚀`,analytical:`📊 **Data Analysis Complete** 📊

Current metrics show promising trends:

**Performance Overview:**
• Level: ${P.user.level}
• XP: ${P.user.currentXP}
• Daily Completion: ${P.productivity.completionRate}%
• Active Habits: ${P.productivity.habitsTotal}

**Optimization Opportunities:**
${P.productivity.completionRate<70?`• Focus on consistency over quantity
• Consider reducing habit difficulty`:`• Ready for increased challenge
• Consider adding advanced habits`}

What specific area would you like to optimize? 🎯`,supportive:`🌟 **You're Doing Amazing!** 🌟

I want you to know that every step you're taking matters. Level ${P.user.level} represents real growth and dedication!

**Today's Wins:**
✨ ${P.productivity.habitsCompletedToday} habits completed
💫 ${P.user.currentXP} XP earned
🌈 ${P.productivity.completionRate}% progress

Remember, progress isn't always linear. Some days are harder than others, and that's completely normal.

**Gentle Reminder:**
• You're stronger than you think
• Small steps lead to big changes
• I believe in your journey

How are you feeling about your progress today? 💝`,challenger:`🔥 **Time to Level Up, Hunter!** 🔥

Level ${P.user.level}? That's just the beginning! I see you've completed ${P.productivity.habitsCompletedToday}/${P.productivity.habitsTotal} habits today.

${P.productivity.completionRate>=80?"💪 **Impressive!** But can you maintain this intensity?":"⚡ **Come on!** I know you can push harder than this!"}

**Challenge Mode Activated:**
• No excuses, only results
• Consistency is your weapon
• Every habit skipped is XP lost

The question is: Are you ready to prove you have what it takes to reach S-Rank?

Show me your determination! 🚀`};return ke[l]||ke.motivational},C=async()=>{if(!s.trim())return;const k={id:Date.now(),type:"user",content:s,timestamp:Date.now()};i(N=>[...N,k]),r(""),o(!0),g.buttonClick();const P=await S(s);setTimeout(()=>{const N={id:Date.now()+1,type:"ai",content:P,timestamp:Date.now(),personality:l};i(ke=>[...ke,N]),o(!1),g.notification()},1500)},I=[{text:"📊 Analyze my progress",icon:"📊"},{text:"🎯 Set new goals",icon:"🎯"},{text:"💡 Suggest habits",icon:"💡"},{text:"🔥 Motivate me",icon:"🔥"},{text:"📈 Optimize routine",icon:"📈"},{text:"🧠 Focus strategies",icon:"🧠"}];return h.jsxs(h.Fragment,{children:[h.jsx(M.button,{onClick:()=>{e(!t),g.magicSparkle()},whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},className:`fixed bottom-6 left-6 z-50 w-16 h-16 rounded-full flex items-center justify-center text-2xl shadow-lg transition-all duration-300 ${t?`bg-gradient-to-r ${j[l].color} text-white`:"bg-gradient-to-r from-purple-500 to-pink-500 text-white"}`,style:{boxShadow:"0 0 30px rgba(147, 51, 234, 0.6), 0 0 60px rgba(236, 72, 153, 0.3)"},children:h.jsx(M.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:j[l].avatar})}),h.jsx(Ui,{children:t&&h.jsxs(M.div,{initial:{opacity:0,scale:.8,x:-50},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:-50},transition:{type:"spring",damping:20,stiffness:300},className:"fixed bottom-24 left-6 z-40 w-96 h-96 bg-gray-800 border border-gray-700 rounded-xl shadow-2xl backdrop-blur-sm overflow-hidden",style:{background:"linear-gradient(135deg, rgba(31, 41, 55, 0.95), rgba(17, 24, 39, 0.95))",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.5), 0 0 30px rgba(147, 51, 234, 0.3)"},children:[h.jsx(yd,{particleCount:15,size:"small"}),h.jsx("div",{className:`p-4 bg-gradient-to-r ${j[l].color} relative`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"text-2xl",children:j[l].avatar}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-gaming font-bold text-white",children:j[l].name}),h.jsx("p",{className:"text-xs text-white/80",children:"Ultimate AI Coach"})]})]}),h.jsx("select",{value:l,onChange:k=>u(k.target.value),className:"bg-white/20 text-white text-xs rounded px-2 py-1 border-none",children:Object.entries(j).map(([k,P])=>h.jsxs("option",{value:k,className:"text-gray-800",children:[P.avatar," ",P.name]},k))})]})}),h.jsxs("div",{className:"flex-1 p-4 overflow-y-auto h-64 space-y-3",children:[n.map(k=>h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${k.type==="user"?"justify-end":"justify-start"}`,children:h.jsx("div",{className:`max-w-xs p-3 rounded-lg text-sm ${k.type==="user"?"bg-blue-600 text-white":`bg-gradient-to-r ${j[k.personality||l].color} text-white`}`,children:h.jsx("div",{dangerouslySetInnerHTML:{__html:k.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>")}})})},k.id)),a&&h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:h.jsx("div",{className:`bg-gradient-to-r ${j[l].color} text-white p-3 rounded-lg`,children:h.jsxs("div",{className:"flex space-x-1",children:[h.jsx(M.div,{animate:{scale:[1,1.5,1]},transition:{duration:.6,repeat:1/0,delay:0},className:"w-2 h-2 bg-white rounded-full"}),h.jsx(M.div,{animate:{scale:[1,1.5,1]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-2 h-2 bg-white rounded-full"}),h.jsx(M.div,{animate:{scale:[1,1.5,1]},transition:{duration:.6,repeat:1/0,delay:.4},className:"w-2 h-2 bg-white rounded-full"})]})})}),h.jsx("div",{ref:f})]}),h.jsx("div",{className:"p-2 border-t border-gray-700",children:h.jsx("div",{className:"grid grid-cols-3 gap-1 mb-2",children:I.map((k,P)=>h.jsx(M.button,{onClick:()=>r(k.text),whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-xs p-1 bg-gray-700 hover:bg-gray-600 rounded text-white transition-colors",children:k.icon},P))})}),h.jsx("div",{className:"p-4 border-t border-gray-700",children:h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("input",{type:"text",value:s,onChange:k=>r(k.target.value),onKeyPress:k=>k.key==="Enter"&&C(),placeholder:"Ask your AI coach anything...",className:"flex-1 bg-gray-700 text-white px-3 py-2 rounded-lg text-sm border-none focus:ring-2 focus:ring-purple-500"}),h.jsx(M.button,{onClick:C,whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 bg-gradient-to-r ${j[l].color} text-white rounded-lg text-sm font-medium`,children:"🚀"})]})})]})})]})},bz=()=>{const[t,e]=D.useState(!1),[n,i]=D.useState(null),{sounds:s}=_o(),r=[{id:"ai-coach",name:"🤖 Ultimate AI Coach",description:"Advanced AI-powered productivity coaching with multiple personalities",status:"active",highlights:["Multiple AI personalities (Motivational, Analytical, Supportive)","Real-time habit analysis and suggestions","Personalized coaching based on your progress","Smart goal optimization and recommendations"],color:"from-blue-500 to-purple-500"},{id:"3d-world",name:"🌍 3D Productivity Worlds",description:"Immersive 3D environments where habits become buildings",status:"active",highlights:["5 unique themed worlds (Castle, Forest, City, Space, Temple)","Interactive 3D habit buildings that grow with streaks","VR/AR ready architecture","Physics-based rewards and visual feedback"],color:"from-green-500 to-teal-500"},{id:"smart-habits",name:"🧠 Smart Habit Generator",description:"AI-powered personalized habit creation based on your goals",status:"active",highlights:["AI analyzes your goals and existing habits","8 focus areas with specialized recommendations","Difficulty-based progressive habit suggestions","Science-backed habit formation principles"],color:"from-yellow-500 to-orange-500"},{id:"social-hub",name:"👥 Advanced Social Hub",description:"Complete social ecosystem with guilds, challenges, and mentorship",status:"active",highlights:["Global leaderboards and competitions","Guild system with specialized communities","Expert mentorship program","Community challenges and tournaments"],color:"from-pink-500 to-rose-500"},{id:"sound-system",name:"🎵 Epic Sound System",description:"Immersive audio experience with Solo Leveling-inspired effects",status:"active",highlights:["Synthesized Solo Leveling-style sound effects","Dynamic audio feedback for all interactions","Customizable sound profiles and volume control","Epic level-up and achievement fanfares"],color:"from-purple-500 to-indigo-500"},{id:"real-world",name:"🌐 Real-World Integration",description:"Connect with IoT devices, smart home, and real-world systems",status:"beta",highlights:["Smart phone sensor integration (motion, battery)","Location-based habit triggers","Smart home device control (lights, thermostat)","Spotify and music service integration"],color:"from-emerald-500 to-cyan-500"},{id:"predictive-ai",name:"🔮 Predictive Analytics",description:"AI predicts optimal productivity times and patterns",status:"beta",highlights:["Productivity DNA analysis and profiling","Optimal timing predictions for habits","Burnout risk assessment and prevention","Performance optimization suggestions"],color:"from-violet-500 to-purple-500"},{id:"enterprise",name:"🏢 Enterprise Solutions",description:"Team productivity management and business integration",status:"coming-soon",highlights:["Team dashboards and analytics","Company-wide productivity challenges","ROI tracking and business metrics","Integration with business tools and APIs"],color:"from-gray-500 to-slate-500"}],a=l=>{switch(l){case"active":return"bg-green-500";case"beta":return"bg-yellow-500";case"coming-soon":return"bg-gray-500";default:return"bg-gray-500"}},o=l=>{switch(l){case"active":return"✅ Active";case"beta":return"🧪 Beta";case"coming-soon":return"🚧 Coming Soon";default:return"Unknown"}};return h.jsxs(h.Fragment,{children:[h.jsx(M.button,{onClick:()=>{e(!t),s.powerUp()},whileHover:{scale:1.1,rotate:5},whileTap:{scale:.9},className:"fixed top-6 right-6 z-50 w-16 h-16 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500 text-white flex items-center justify-center text-2xl shadow-lg",style:{boxShadow:"0 0 30px rgba(251, 191, 36, 0.6)"},children:h.jsx(M.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:"⭐"})}),h.jsx(Ui,{children:t&&h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/80 backdrop-blur-sm",onClick:()=>e(!1),children:h.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"absolute inset-4 bg-gray-900 rounded-xl overflow-hidden",onClick:l=>l.stopPropagation(),children:[h.jsx(yd,{particleCount:30,size:"medium"}),h.jsx("div",{className:"p-6 bg-gradient-to-r from-yellow-600 to-orange-600",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-gaming font-bold text-white",children:"⭐ ULTIMATE PRODUCTIVITY PLATFORM"}),h.jsx("p",{className:"text-white/80 text-lg",children:"The most advanced productivity system ever created"})]}),h.jsx(M.button,{onClick:()=>e(!1),whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},className:"text-white hover:text-red-300 text-2xl",children:"✕"})]})}),h.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(100%-120px)]",children:[h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((l,u)=>h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-gray-800 rounded-xl p-6 border border-gray-700 hover:border-gray-500 transition-all cursor-pointer",onClick:()=>{i(l),s.cardHover()},whileHover:{scale:1.02,y:-5},children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold text-white ${a(l.status)}`,children:o(l.status)})}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:l.name}),h.jsx("p",{className:"text-gray-300 text-sm mb-4",children:l.description}),h.jsxs("div",{className:"space-y-1",children:[l.highlights.slice(0,2).map((d,m)=>h.jsxs("div",{className:"text-xs text-gray-400 flex items-center",children:[h.jsx("span",{className:"w-1 h-1 bg-blue-400 rounded-full mr-2"}),d]},m)),l.highlights.length>2&&h.jsxs("div",{className:"text-xs text-blue-400 font-medium",children:["+",l.highlights.length-2," more features..."]})]}),h.jsx(M.div,{className:`mt-4 w-full py-2 rounded-lg text-center text-white font-medium bg-gradient-to-r ${l.color}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:l.status==="active"?"🚀 Explore":l.status==="beta"?"🧪 Try Beta":"📅 Coming Soon"})]},l.id))}),h.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"8"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Epic Features"})]}),h.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-green-400",children:"6"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Active Systems"})]}),h.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"∞"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Possibilities"})]}),h.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:"100%"}),h.jsx("div",{className:"text-gray-400 text-sm",children:"Epic Level"})]})]}),h.jsxs("div",{className:"mt-8 text-center",children:[h.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"🎉 Welcome to the Future of Productivity!"}),h.jsx("p",{className:"text-gray-300 mb-6",children:"You now have access to the most advanced productivity platform ever created. Every feature is designed to help you become the best version of yourself."}),h.jsx(M.button,{onClick:()=>e(!1),whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-3 rounded-lg font-bold text-lg",children:"🚀 Start Your Epic Journey"})]})]})]})})}),h.jsx(Ui,{children:n&&h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>i(null),children:h.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gray-900 rounded-xl max-w-2xl w-full p-6",onClick:l=>l.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h3",{className:"text-2xl font-bold text-white",children:n.name}),h.jsx(M.button,{onClick:()=>i(null),whileHover:{scale:1.1,rotate:90},whileTap:{scale:.9},className:"text-gray-400 hover:text-white text-xl",children:"✕"})]}),h.jsx("p",{className:"text-gray-300 mb-6",children:n.description}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-lg font-bold text-white",children:"✨ Key Features:"}),n.highlights.map((l,u)=>h.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.1},className:"flex items-center text-gray-300",children:[h.jsx("span",{className:"w-2 h-2 bg-blue-400 rounded-full mr-3"}),l]},u))]}),h.jsx(M.button,{onClick:()=>i(null),whileHover:{scale:1.05},whileTap:{scale:.95},className:`mt-6 w-full py-3 rounded-lg text-white font-bold bg-gradient-to-r ${n.color}`,children:n.status==="active"?"🚀 Start Using":n.status==="beta"?"🧪 Join Beta":"📅 Get Notified"})]})})})]})},_z=()=>{const t=Us(),[e,n]=D.useState(!1),[i,s]=D.useState(null),[r,a]=D.useState(!1),{user:o,profile:l,isAuthenticated:u,signOut:d}=jn(),{syncWithProfile:m}=On(),{habits:f,loadHabits:g,getTodaysCompletedHabits:w}=Ur();_o(),pz();const E=Kr(()=>t("/analytics")),T=Kr(()=>t("/knowledge")),v=Kr(()=>t("/social")),x=Kr(d),b=Kr(()=>n(!0)),R=Kr(()=>a(!0));D.useEffect(()=>{u||t("/login")},[u,t]),D.useEffect(()=>{o&&l&&(m(l),g(o.uid))},[o,l,m,g]);const j=()=>{s(null),n(!0)},V=I=>{s(I),n(!0)},S=()=>{n(!1),s(null)},_=w(),C=f.length>0?Math.round(_.length/f.length*100):0;return!u||!o?h.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:h.jsx("div",{className:"text-white",children:"Loading..."})}):h.jsxs(yz,{className:"bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 relative overflow-hidden",children:[h.jsx(jE,{particleCount:40,colors:["#3b82f6","#8b5cf6","#ec4899","#ffd700"],speed:.8,size:"small"}),h.jsx("header",{className:"bg-dark-800/50 backdrop-blur-sm border-b border-dark-700 glass-morphism relative z-10",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsx("div",{className:"flex items-center space-x-4",children:h.jsx("h1",{className:"text-xl font-gaming font-bold text-gradient",children:"LEVELUP LIFE"})}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs(M.button,{...E,whileHover:{scale:1.05,rotateX:-5},whileTap:{scale:.95},className:"btn-primary px-4 py-2 flex items-center space-x-2 epic-glow float-3d",children:[h.jsx("span",{children:"📊"}),h.jsx("span",{children:"Analytics"})]}),h.jsxs(M.button,{...T,whileHover:{scale:1.05,rotateX:-5},whileTap:{scale:.95},className:"btn-accent px-4 py-2 flex items-center space-x-2 epic-glow float-3d",children:[h.jsx("span",{children:"📚"}),h.jsx("span",{children:"Knowledge Hub"})]}),h.jsxs("span",{className:"text-gray-300",children:["Welcome back, ",(l==null?void 0:l.displayName)||"Hunter","!"]}),h.jsx(M.button,{...x,whileHover:{scale:1.05,rotateX:-3},whileTap:{scale:.95},className:"btn-secondary px-4 py-2 transform-3d",children:"Sign Out"})]})]})})}),h.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsxs(vz,{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs(Jm,{className:"space-y-6",children:[h.jsxs(M.div,{className:"card-glow p-4 float-3d relative",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[h.jsx(yd,{particleCount:15,size:"small"}),h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient mb-4 text-center",children:"YOUR AVATAR"}),h.jsx(fz,{})]}),h.jsx(M.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},children:h.jsx(CF,{})}),h.jsxs(M.div,{className:"card p-6 card-3d epic-glow",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient mb-4",children:"TODAY'S PROGRESS"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Habits Completed"}),h.jsxs("span",{className:"text-green-400 font-bold",children:[_.length," / ",f.length]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Completion Rate"}),h.jsxs("span",{className:"text-primary-400 font-bold",children:[C,"%"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"XP Earned Today"}),h.jsxs("span",{className:"text-accent-400 font-bold",children:[_.reduce((I,k)=>I+k.xpValue,0)," XP"]})]})]})]})]}),h.jsxs(Jm,{className:"space-y-6",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h2",{className:"text-2xl font-gaming font-bold text-white",children:"Daily Quests"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(M.button,{onClick:j,whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary px-4 py-2",children:"+ Add Quest"}),h.jsx(M.button,{...R,whileHover:{scale:1.05,rotateX:-5},whileTap:{scale:.95},className:"btn-accent px-4 py-2 epic-glow",children:"🤖 AI Generate"})]})]}),h.jsx("div",{className:"space-y-4",children:f.length===0?h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8 text-center card-3d epic-glow relative",children:[h.jsx(yd,{particleCount:20,size:"medium"}),h.jsx(M.div,{className:"text-6xl mb-4",animate:{rotateY:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:"🎯"}),h.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-gaming",children:"Ready to Start Your Journey?"}),h.jsx("p",{className:"text-gray-400 mb-6",children:"Create your first habit to begin earning XP and leveling up!"}),h.jsx(M.button,{...b,whileHover:{scale:1.05,rotateX:-5,boxShadow:"0 20px 40px rgba(59, 130, 246, 0.6)"},whileTap:{scale:.95},className:"btn-primary px-6 py-3 epic-glow transform-3d",children:"Create Your First Quest"})]}):f.map((I,k)=>h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:k*.1},children:h.jsx(NF,{habit:I,onEdit:V})},I.id))})]}),h.jsxs(Jm,{className:"space-y-6",children:[h.jsx(IF,{compact:!0}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient mb-4",children:"RECENT ACTIVITY"}),h.jsx("div",{className:"space-y-3",children:h.jsxs("div",{className:"text-center text-gray-400 py-8",children:[h.jsx("div",{className:"text-4xl mb-2",children:"📊"}),h.jsx("p",{children:"Complete some habits to see your activity!"})]})})]}),h.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},children:h.jsx(hz,{})}),h.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.6},children:h.jsxs("div",{className:"card p-6 card-3d epic-glow relative",children:[h.jsx(jE,{particleCount:10,size:"small"}),h.jsx("h3",{className:"text-lg font-gaming font-bold text-gradient mb-4",children:"SOCIAL HUB"}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl mb-1",children:"🏆"}),h.jsx("div",{className:"text-sm text-gray-400",children:"Rank #7"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl mb-1",children:"⚔️"}),h.jsx("div",{className:"text-sm text-gray-400",children:"3 Challenges"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl mb-1",children:"🏰"}),h.jsx("div",{className:"text-sm text-gray-400",children:"No Guild"})]})]}),h.jsx(M.button,{...v,whileHover:{scale:1.02,rotateX:-3,boxShadow:"0 15px 30px rgba(139, 92, 246, 0.5)"},whileTap:{scale:.98},className:"w-full mt-4 btn-accent py-2 epic-glow transform-3d",children:"Enter Social Hub"})]})})]})]})}),h.jsx(DF,{isOpen:e,onClose:S,habit:i}),h.jsx(uz,{}),h.jsx(xz,{}),h.jsx(bz,{}),h.jsx(gz,{})]})},ME=[{id:"s1e1",season:1,episode:1,title:"I'm Used to It",description:"Sung Jin-Woo is the weakest of the weak, an E-rank hunter with no money, no talent, and no prospects. When he enters a high-rank dungeon, disaster strikes.",duration:24,knowledgePoints:["Understanding weakness and perseverance","The importance of family responsibility","How adversity shapes character"],learningObjectives:["Analyze Jin-Woo's initial character traits","Understand the hunter ranking system","Identify themes of sacrifice and determination"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s1e2",season:1,episode:2,title:"If I Don't Do It, Who Will?",description:"Jin-Woo awakens in a hospital and discovers that the System has made him a Player. He must now complete daily quests or face severe penalties.",duration:24,knowledgePoints:["The concept of systematic self-improvement","Discipline and daily habits","Consequences of choices"],learningObjectives:["Understand the System's mechanics","Analyze the importance of daily discipline","Connect to real-world habit formation"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s1e3",season:1,episode:3,title:"It's Like a Game",description:"Jin-Woo begins to understand his new abilities and starts training. He discovers that he can level up like in a video game.",duration:24,knowledgePoints:["Gamification of personal growth","Progressive skill development","The power of visualization"],learningObjectives:["Explore gamification principles","Understand progressive overload in training","Apply gaming concepts to real life"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s1e4",season:1,episode:4,title:"I've Got to Get Stronger",description:"Jin-Woo continues his training and faces his first real challenge in a dungeon. He begins to understand the true nature of his powers.",duration:24,knowledgePoints:["Commitment to continuous improvement","Facing fears and challenges head-on","Understanding personal limitations"],learningObjectives:["Analyze the importance of consistent practice","Understand how to overcome self-doubt","Learn about progressive skill building"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s1e5",season:1,episode:5,title:"A Pretty Good Deal",description:"Jin-Woo encounters other hunters and begins to realize how much he has changed. His new abilities attract attention.",duration:24,knowledgePoints:["Recognition of personal growth","Managing newfound confidence","Dealing with others' perceptions"],learningObjectives:["Understand the psychology of transformation","Learn about handling success and recognition","Explore the social aspects of personal change"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s1e6",season:1,episode:6,title:"The Real Hunt Begins",description:"Jin-Woo faces his first major test as he enters a dangerous dungeon. His strategic thinking and new abilities are put to the test.",duration:24,knowledgePoints:["Strategic planning and execution","Risk assessment and management","Leadership under pressure"],learningObjectives:["Analyze strategic decision-making processes","Understand risk vs. reward calculations","Learn about leadership in challenging situations"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:50},{id:"s2e1",season:2,episode:1,title:"Arise",description:"Jin-Woo's powers evolve as he gains the ability to command shadow soldiers. A new chapter in his journey begins.",duration:24,knowledgePoints:["Evolution of leadership abilities","Building and managing teams","Responsibility that comes with power"],learningObjectives:["Understand advanced leadership concepts","Learn about team building and management","Explore the ethics of power and responsibility"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:60},{id:"s2e2",season:2,episode:2,title:"The Shadow Army",description:"Jin-Woo learns to command his shadow soldiers and faces increasingly difficult challenges that test his strategic abilities.",duration:24,knowledgePoints:["Advanced team coordination","Delegation and trust","Scaling personal effectiveness"],learningObjectives:["Learn about effective delegation","Understand team coordination strategies","Explore how to scale personal impact"],streamingLinks:{crunchyroll:"https://www.crunchyroll.com/solo-leveling",funimation:"https://www.funimation.com/shows/solo-leveling/"},xpReward:60}],Xc=Nc((t,e)=>({episodes:ME,watchedEpisodes:[],knowledgeXP:0,knowledgeLevel:1,currentStreak:0,totalWatchTime:0,learningInsights:[],isLoading:!1,error:null,loadEpisodes:()=>{t({episodes:ME})},loadWatchedEpisodes:async n=>{try{t({isLoading:!0,error:null});const i=XI(nc(Cn,"watchedEpisodes"),KI("userId","==",n),YI("watchedAt","desc")),s=await eN(i),r=[];s.forEach(l=>{r.push({id:l.id,...l.data()})});const a=r.reduce((l,u)=>l+(u.xpGained||0),0),o=Math.floor(a/100)+1;t({watchedEpisodes:r,knowledgeXP:a,knowledgeLevel:o,isLoading:!1})}catch(i){t({error:i.message,isLoading:!1})}},markEpisodeWatched:async(n,i)=>{try{t({isLoading:!0,error:null});const{watchedEpisodes:s}=e();if(s.some(f=>f.episodeId===i.id)){t({isLoading:!1});return}const a={userId:n,episodeId:i.id,season:i.season,episode:i.episode,title:i.title,xpGained:i.xpReward,watchedAt:ni(),duration:i.duration},l={id:(await Q0(nc(Cn,"watchedEpisodes"),a)).id,...a},u=[...s,l],d=e().knowledgeXP+i.xpReward,m=Math.floor(d/100)+1;t({watchedEpisodes:u,knowledgeXP:d,knowledgeLevel:m,isLoading:!1}),await e().updateUserKnowledgeXP(n,d,m)}catch(s){t({error:s.message,isLoading:!1})}},updateUserKnowledgeXP:async(n,i,s)=>{try{const r=Lr(Cn,"users",n);await mf(r,{knowledgeXP:i,knowledgeLevel:s,updatedAt:ni()})}catch(r){console.error("Error updating user knowledge XP:",r)}},generateEpisodeInsight:async n=>{try{const i=e().episodes.find(s=>s.id===n);return i?{summary:`Episode ${i.episode}: ${i.title} explores themes of ${i.knowledgePoints.join(", ")}.`,keyLessons:i.knowledgePoints,realWorldApplications:["Apply systematic improvement to personal goals","Develop daily discipline habits","Embrace challenges as growth opportunities"],characterDevelopment:"Jin-Woo's journey from weakness to strength mirrors real personal development",nextSteps:"Consider how you can implement similar systematic approaches in your own life"}:null}catch(i){return console.error("Error generating insight:",i),null}},getWatchingStreak:()=>{var a,o;const{watchedEpisodes:n}=e();if(n.length===0)return 0;const i=n.sort((l,u)=>{var d,m;return((d=u.watchedAt)==null?void 0:d.seconds)-((m=l.watchedAt)==null?void 0:m.seconds)});let s=1,r=new Date(((a=i[0].watchedAt)==null?void 0:a.seconds)*1e3);for(let l=1;l<i.length;l++){const u=new Date(((o=i[l].watchedAt)==null?void 0:o.seconds)*1e3);if(Math.floor((r-u)/(1e3*60*60*24))===1)s++,r=u;else break}return s},getSeasonProgress:n=>{const{episodes:i,watchedEpisodes:s}=e(),r=i.filter(o=>o.season===n),a=s.filter(o=>o.season===n);return{total:r.length,watched:a.length,percentage:r.length>0?a.length/r.length*100:0}},resetKnowledgeData:()=>{t({watchedEpisodes:[],knowledgeXP:0,knowledgeLevel:1,currentStreak:0,totalWatchTime:0,learningInsights:[]})}})),wz=({episode:t,isWatched:e,onMarkWatched:n})=>{var d,m;const[i,s]=D.useState(!1),[r,a]=D.useState(!1),{generateEpisodeInsight:o}=Xc(),l=()=>{e||n()},u=async()=>{r||await o(t.id),a(!r)};return h.jsxs(M.div,{className:`card-glow relative overflow-hidden ${e?"border-green-500/50":"border-gray-700"}`,whileHover:{scale:1.02},transition:{duration:.2},children:[e&&h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsxs("div",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center",children:[h.jsx("span",{className:"mr-1",children:"✓"}),"WATCHED"]})}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"flex items-start justify-between mb-4",children:h.jsxs("div",{children:[h.jsxs("h3",{className:"text-lg font-gaming font-bold text-white mb-1",children:["Episode ",t.episode]}),h.jsx("h4",{className:"text-primary-400 font-medium mb-2",children:t.title}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[h.jsxs("span",{children:[t.duration," min"]}),h.jsxs("span",{children:["+",t.xpReward," XP"]})]})]})}),h.jsx("p",{className:"text-gray-300 text-sm mb-4 leading-relaxed",children:t.description}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h5",{className:"text-accent-400 font-medium text-sm mb-2",children:"Key Learning Points:"}),h.jsxs("div",{className:"space-y-1",children:[t.knowledgePoints.slice(0,2).map((f,g)=>h.jsxs("div",{className:"text-xs text-gray-400 flex items-center",children:[h.jsx("span",{className:"w-1 h-1 bg-accent-400 rounded-full mr-2"}),f]},g)),t.knowledgePoints.length>2&&h.jsx("button",{onClick:()=>s(!i),className:"text-xs text-primary-400 hover:text-primary-300 transition-colors",children:i?"Show less":`+${t.knowledgePoints.length-2} more`})]})]}),i&&h.jsxs(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 border-t border-gray-700 pt-4",children:[h.jsx("h5",{className:"text-accent-400 font-medium text-sm mb-2",children:"Learning Objectives:"}),h.jsx("div",{className:"space-y-1 mb-4",children:t.learningObjectives.map((f,g)=>h.jsxs("div",{className:"text-xs text-gray-400 flex items-start",children:[h.jsx("span",{className:"w-1 h-1 bg-primary-400 rounded-full mr-2 mt-1.5"}),f]},g))})]}),r&&h.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-4 border-t border-gray-700 pt-4",children:h.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-4",children:[h.jsxs("h5",{className:"text-accent-400 font-medium text-sm mb-2 flex items-center",children:[h.jsx("span",{className:"mr-2",children:"🤖"}),"AI Analysis"]}),h.jsxs("div",{className:"space-y-3 text-xs text-gray-300",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-primary-400 font-medium",children:"Summary:"}),h.jsxs("p",{className:"mt-1",children:["Episode ",t.episode,": ",t.title," explores themes of ",t.knowledgePoints.join(", "),"."]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-primary-400 font-medium",children:"Real-world Applications:"}),h.jsxs("ul",{className:"mt-1 space-y-1",children:[h.jsx("li",{children:"• Apply systematic improvement to personal goals"}),h.jsx("li",{children:"• Develop daily discipline habits"}),h.jsx("li",{children:"• Embrace challenges as growth opportunities"})]})]})]})]})}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(M.button,{onClick:l,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:e,className:`flex-1 py-2 px-4 rounded-lg font-medium text-sm transition-all ${e?"bg-green-600 text-white cursor-default":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:e?"Completed":"Mark as Watched"}),h.jsxs("div",{className:"flex space-x-1",children:[((d=t.streamingLinks)==null?void 0:d.crunchyroll)&&h.jsx(M.a,{href:t.streamingLinks.crunchyroll,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all",children:"CR"}),((m=t.streamingLinks)==null?void 0:m.funimation)&&h.jsx(M.a,{href:t.streamingLinks.funimation,target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all",children:"FUN"})]}),h.jsx(M.button,{onClick:u,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-accent-600 hover:bg-accent-700 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all",children:"🤖"})]})]}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 to-accent-500 opacity-50"})]})},Tz=({episodes:t,watchedEpisodes:e,knowledgeXP:n})=>{const{getWatchingStreak:i,getSeasonProgress:s,knowledgeLevel:r}=Xc(),a=i(),o=s(1),l=s(2),u=e.reduce((g,w)=>g+(w.duration||0),0),d=t.length>0?t.reduce((g,w)=>g+w.duration,0)/t.length:0,m=[{label:"Knowledge Level",value:r,icon:"🎓",color:"text-accent-400"},{label:"Total Knowledge XP",value:n,icon:"⭐",color:"text-primary-400"},{label:"Episodes Watched",value:e.length,icon:"📺",color:"text-green-400"},{label:"Watch Streak",value:`${a} days`,icon:"🔥",color:"text-orange-400"},{label:"Total Watch Time",value:`${Math.floor(u/60)}h ${u%60}m`,icon:"⏱️",color:"text-blue-400"},{label:"Avg Episode Length",value:`${Math.round(d)} min`,icon:"📊",color:"text-purple-400"}],f=[{id:"first_episode",title:"First Step",description:"Watched your first episode",icon:"🎬",unlocked:e.length>=1,requirement:"1 episode"},{id:"season_complete",title:"Season Master",description:"Completed an entire season",icon:"👑",unlocked:o.percentage===100||l.percentage===100,requirement:"Complete 1 season"},{id:"knowledge_seeker",title:"Knowledge Seeker",description:"Reached Knowledge Level 5",icon:"📚",unlocked:r>=5,requirement:"Level 5"},{id:"streak_master",title:"Consistency Master",description:"Maintained a 7-day watching streak",icon:"🔥",unlocked:a>=7,requirement:"7-day streak"},{id:"binge_watcher",title:"Dedicated Hunter",description:"Watched 10+ episodes",icon:"⚡",unlocked:e.length>=10,requirement:"10 episodes"},{id:"knowledge_master",title:"Solo Leveling Scholar",description:"Earned 1000+ Knowledge XP",icon:"🏆",unlocked:n>=1e3,requirement:"1000 XP"}];return h.jsxs("div",{className:"space-y-8",children:[h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:m.map((g,w)=>h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:w*.1},className:"card p-4 text-center",children:[h.jsx("div",{className:"text-2xl mb-2",children:g.icon}),h.jsx("div",{className:`text-2xl font-bold ${g.color} mb-1`,children:g.value}),h.jsx("div",{className:"text-sm text-gray-400",children:g.label})]},g.label))}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-4",children:"Season 1 Progress"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-300",children:"Episodes Watched"}),h.jsxs("span",{className:"text-primary-400 font-bold",children:[o.watched,"/",o.total]})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-3",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full",initial:{width:0},animate:{width:`${o.percentage}%`},transition:{duration:1,ease:"easeOut"}})}),h.jsxs("div",{className:"text-sm text-gray-400",children:[o.percentage.toFixed(1),"% Complete"]})]})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-4",children:"Season 2 Progress"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-300",children:"Episodes Watched"}),h.jsxs("span",{className:"text-primary-400 font-bold",children:[l.watched,"/",l.total]})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-3",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-accent-500 to-purple-500 rounded-full",initial:{width:0},animate:{width:`${l.percentage}%`},transition:{duration:1,ease:"easeOut",delay:.2}})}),h.jsxs("div",{className:"text-sm text-gray-400",children:[l.percentage.toFixed(1),"% Complete"]})]})]})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-4",children:"Knowledge Level Progress"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("span",{className:"text-gray-300",children:["Level ",r]}),h.jsxs("span",{className:"text-accent-400 font-bold",children:[n%100,"/100 XP"]})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-4",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-accent-500 to-purple-500 rounded-full relative",initial:{width:0},animate:{width:`${n%100}%`},transition:{duration:1,ease:"easeOut"},children:h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse rounded-full"})})}),h.jsxs("div",{className:"text-sm text-gray-400",children:[100-n%100," XP to next level"]})]})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-6",children:"Achievements"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map((g,w)=>h.jsx(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.1},className:`p-4 rounded-lg border transition-all ${g.unlocked?"bg-green-900/20 border-green-500/50":"bg-dark-700/50 border-gray-600"}`,children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:`text-2xl ${g.unlocked?"":"grayscale opacity-50"}`,children:g.icon}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:`font-bold ${g.unlocked?"text-green-400":"text-gray-400"}`,children:g.title}),h.jsx("p",{className:"text-sm text-gray-400 mb-1",children:g.description}),h.jsx("div",{className:"text-xs text-gray-500",children:g.requirement})]}),g.unlocked&&h.jsx("div",{className:"text-green-400",children:h.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},g.id))})]})]})},Ez=({season:t,watchedEpisodes:e})=>{const[n,i]=D.useState("jinwoo"),s={jinwoo:{name:"Sung Jin-Woo",title:"The Shadow Monarch",image:"🗡️",description:"The protagonist who transforms from the weakest E-rank hunter to the most powerful being.",traits:["Determination and perseverance","Strategic thinking","Loyalty to family","Continuous self-improvement","Leadership development"],development:{season1:"Awakens to the System and begins his transformation from weakness to strength",season2:"Embraces his role as the Shadow Monarch and faces greater challenges"},realWorldLessons:["Systematic approach to personal growth","Importance of daily discipline and habits","How to turn weaknesses into strengths","The power of consistent effort over time","Leadership through example and competence"],quotes:[`"I'm used to it." - Accepting current circumstances while working to change them`,`"If I don't do it, who will?" - Taking responsibility for your own growth`,'"I will become stronger." - Clear commitment to improvement']},chaehae:{name:"Cha Hae-In",title:"S-Rank Hunter",image:"⚔️",description:"A powerful S-rank hunter who becomes an important ally and eventual romantic interest.",traits:["Strong moral compass","Independent and capable","Protective of others","Professional excellence","Emotional intelligence"],development:{season1:"Establishes herself as a formidable hunter with unique abilities",season2:"Develops deeper connections and shows vulnerability alongside strength"},realWorldLessons:["Balancing strength with compassion","Professional excellence and personal growth","The importance of having strong principles","Building meaningful relationships while maintaining independence","Leading by example in challenging situations"],quotes:[`"Strength isn't just about power." - Understanding true strength`,`"I'll protect what matters." - Clear priorities and values`]},goto:{name:"Goto Ryuji",title:"Japanese S-Rank Hunter",image:"🔥",description:"A powerful Japanese hunter who represents the pinnacle of traditional hunter strength.",traits:["Confidence and pride","Competitive spirit","Recognition of true strength","Honor and respect","Adaptability"],development:{season1:"Represents the established order of powerful hunters",season2:"Learns to recognize and respect new forms of power"},realWorldLessons:["Healthy competition drives improvement","Recognizing when others surpass you","Adapting to changing circumstances","Maintaining dignity in defeat","The value of mutual respect"],quotes:['"True strength recognizes true strength." - Acknowledging excellence in others']}},r=s[n],a=e.filter(o=>o.season===t).length;return h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-4",children:"Character Analysis"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(s).map(([o,l])=>h.jsxs(M.button,{onClick:()=>i(o),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg font-medium transition-all ${n===o?"bg-accent-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:[l.image," ",l.name]},o))})]}),h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"card p-6",children:[h.jsxs("div",{className:"text-center mb-6",children:[h.jsx("div",{className:"text-6xl mb-4",children:r.image}),h.jsx("h2",{className:"text-2xl font-gaming font-bold text-white mb-2",children:r.name}),h.jsx("p",{className:"text-accent-400 font-medium mb-4",children:r.title}),h.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:r.description})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-3",children:"Key Traits:"}),h.jsx("div",{className:"space-y-2",children:r.traits.map((o,l)=>h.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"flex items-center text-sm text-gray-300",children:[h.jsx("span",{className:"w-2 h-2 bg-accent-400 rounded-full mr-3"}),o]},l))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-3",children:"Character Development:"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3",children:[h.jsx("h5",{className:"text-accent-400 text-sm font-medium mb-1",children:"Season 1:"}),h.jsx("p",{className:"text-gray-300 text-sm",children:r.development.season1})]}),h.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3",children:[h.jsx("h5",{className:"text-accent-400 text-sm font-medium mb-1",children:"Season 2:"}),h.jsx("p",{className:"text-gray-300 text-sm",children:r.development.season2})]})]})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"card p-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-4",children:"Real-World Applications:"}),h.jsx("div",{className:"space-y-3",children:r.realWorldLessons.map((o,l)=>h.jsx(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:l*.1},className:"bg-dark-700/50 rounded-lg p-3",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"text-accent-400 mr-2 mt-1",children:"💡"}),h.jsx("p",{className:"text-gray-300 text-sm",children:o})]})},l))})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-4",children:"Memorable Quotes:"}),h.jsx("div",{className:"space-y-4",children:r.quotes.map((o,l)=>h.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:l*.2},className:"bg-gradient-to-r from-dark-700/50 to-dark-600/50 rounded-lg p-4 border-l-4 border-accent-400",children:h.jsx("p",{className:"text-gray-300 text-sm italic leading-relaxed",children:o})},l))})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-4",children:"Your Analysis Progress:"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("span",{className:"text-gray-300 text-sm",children:"Episodes Analyzed"}),h.jsx("span",{className:"text-accent-400 font-bold",children:a})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-2",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-accent-500 to-purple-500 rounded-full",initial:{width:0},animate:{width:`${Math.min(a/12*100,100)}%`},transition:{duration:1,ease:"easeOut"}})}),h.jsx("p",{className:"text-xs text-gray-400",children:a<12?`Watch ${12-a} more episodes to unlock deeper character insights`:"All character insights unlocked! You're a true Solo Leveling scholar."})]})]})]})]},n),a>=5&&h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-4",children:"Character Growth Parallels:"}),h.jsx("div",{className:"bg-dark-700/50 rounded-lg p-4",children:h.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:[h.jsx("span",{className:"text-accent-400 font-medium",children:"Jin-Woo's Transformation:"})," Like Jin-Woo's systematic approach to leveling up, you can apply similar principles to your own personal development. His journey from weakness to strength mirrors the process of building habits, gaining skills, and consistently working toward your goals."]})})]})]})},Sz=()=>{const{knowledgeXP:t,knowledgeLevel:e,watchedEpisodes:n}=Xc(),[i,s]=D.useState(null),r=[{id:"hunter_basics",name:"Hunter Basics",description:"Understanding the fundamentals of the hunter world",icon:"🎯",requiredXP:0,requiredLevel:1,unlocked:!0,benefits:["Basic understanding of hunter ranks","Introduction to dungeon mechanics"]},{id:"system_mastery",name:"System Mastery",description:"Deep understanding of the leveling system",icon:"⚙️",requiredXP:100,requiredLevel:2,unlocked:t>=100,benefits:["Advanced XP optimization","Quest completion strategies","Daily habit formation"]},{id:"strategic_thinking",name:"Strategic Thinking",description:"Learning Jin-Woo's tactical approach",icon:"🧠",requiredXP:250,requiredLevel:3,unlocked:t>=250,benefits:["Problem-solving techniques","Risk assessment skills","Long-term planning"]},{id:"leadership_skills",name:"Leadership Skills",description:"Command and inspire like the Shadow Monarch",icon:"👑",requiredXP:500,requiredLevel:5,unlocked:t>=500,benefits:["Team management","Delegation mastery","Inspiring others"]},{id:"shadow_mastery",name:"Shadow Mastery",description:"Understanding the power of the Shadow Army",icon:"🌑",requiredXP:750,requiredLevel:8,unlocked:t>=750,benefits:["Resource multiplication","Passive income strategies","System automation"]},{id:"monarch_wisdom",name:"Monarch Wisdom",description:"The ultimate understanding of power and responsibility",icon:"⚡",requiredXP:1e3,requiredLevel:10,unlocked:t>=1e3,benefits:["Master-level decision making","Ultimate responsibility","Legacy building"]}],a=o=>o.unlocked?100:Math.min(t/o.requiredXP*100,100);return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-gaming font-bold text-gradient mb-2",children:"Knowledge Skill Tree"}),h.jsx("p",{className:"text-gray-400",children:"Unlock abilities by watching Solo Leveling and gaining Knowledge XP"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((o,l)=>h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},onClick:()=>s(o),className:`relative cursor-pointer transition-all duration-300 ${o.unlocked?"transform hover:scale-105":"opacity-60"}`,children:h.jsxs("div",{className:`card p-4 border-2 transition-all ${o.unlocked?"border-green-500/50 bg-green-900/10":"border-gray-600 bg-gray-800/50"} ${(i==null?void 0:i.id)===o.id?"ring-2 ring-primary-500":""}`,children:[h.jsxs("div",{className:"text-center mb-3",children:[h.jsx("div",{className:`text-4xl mb-2 ${o.unlocked?"":"grayscale"}`,children:o.icon}),h.jsx("h3",{className:`font-gaming font-bold ${o.unlocked?"text-white":"text-gray-400"}`,children:o.name})]}),h.jsxs("div",{className:"mb-3",children:[h.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[h.jsx("span",{children:"Progress"}),h.jsxs("span",{children:[Math.round(a(o)),"%"]})]}),h.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:h.jsx(M.div,{className:`h-full rounded-full ${o.unlocked?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-gray-500 to-gray-400"}`,initial:{width:0},animate:{width:`${a(o)}%`},transition:{duration:1,ease:"easeOut"}})})]}),h.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Required XP:"}),h.jsx("span",{className:t>=o.requiredXP?"text-green-400":"text-red-400",children:o.requiredXP})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Required Level:"}),h.jsx("span",{className:e>=o.requiredLevel?"text-green-400":"text-red-400",children:o.requiredLevel})]})]}),o.unlocked&&h.jsx("div",{className:"absolute top-2 right-2",children:h.jsx("div",{className:"bg-green-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"✓"})})]})},o.id))}),i&&h.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>s(null),children:h.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"card max-w-md w-full p-6",onClick:o=>o.stopPropagation(),children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"text-6xl mb-3",children:i.icon}),h.jsx("h3",{className:"text-xl font-gaming font-bold text-white mb-2",children:i.name}),h.jsx("p",{className:"text-gray-300 text-sm",children:i.description})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h4",{className:"text-primary-400 font-medium mb-3",children:"Benefits:"}),h.jsx("div",{className:"space-y-2",children:i.benefits.map((o,l)=>h.jsxs("div",{className:"flex items-start text-sm text-gray-300",children:[h.jsx("span",{className:"text-accent-400 mr-2",children:"•"}),o]},l))})]}),h.jsx("div",{className:"text-center",children:i.unlocked?h.jsx("div",{className:"bg-green-600 text-white py-2 px-4 rounded-lg font-medium",children:"✓ Unlocked"}):h.jsxs("div",{className:"bg-gray-600 text-white py-2 px-4 rounded-lg font-medium",children:["🔒 Locked - Need ",i.requiredXP-t," more XP"]})}),h.jsx("button",{onClick:()=>s(null),className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:"✕"})]})}),h.jsxs("div",{className:"card p-6 text-center",children:[h.jsx("h3",{className:"text-lg font-gaming font-bold text-white mb-4",children:"Your Knowledge Journey"}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-accent-400",children:e}),h.jsx("div",{className:"text-sm text-gray-400",children:"Knowledge Level"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-primary-400",children:t}),h.jsx("div",{className:"text-sm text-gray-400",children:"Total Knowledge XP"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.filter(o=>o.unlocked).length}),h.jsx("div",{className:"text-sm text-gray-400",children:"Skills Unlocked"})]})]})]})]})},Az=()=>{const t=Us(),[e,n]=D.useState(1),[i,s]=D.useState("episodes"),{user:r,profile:a}=jn(),{episodes:o,watchedEpisodes:l,knowledgeXP:u,loadEpisodes:d,loadWatchedEpisodes:m,markEpisodeWatched:f}=Xc();D.useEffect(()=>{r&&(d(),m(r.uid))},[r,d,m]);const g=o.filter(T=>T.season===e),w=l.filter(T=>T.season===e).length,E=g.length>0?w/g.length*100:0;return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900",children:[h.jsx("header",{className:"bg-dark-800/50 backdrop-blur-sm border-b border-dark-700",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsx(M.button,{onClick:()=>t("/dashboard"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-gray-400 hover:text-white transition-colors",children:"← Back to Dashboard"}),h.jsx("h1",{className:"text-xl font-gaming font-bold text-gradient",children:"KNOWLEDGE HUB"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("span",{className:"text-sm text-gray-400",children:"Knowledge XP:"}),h.jsx("span",{className:"text-lg font-bold text-accent-400",children:u})]})]}),h.jsx("div",{className:"flex items-center space-x-2",children:["episodes","progress","analysis","skills"].map(T=>h.jsx(M.button,{onClick:()=>s(T),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg font-medium transition-all ${i===T?"bg-primary-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:T.charAt(0).toUpperCase()+T.slice(1)},T))})]})})}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-2xl font-gaming font-bold text-white",children:["Solo Leveling - Season ",e]}),h.jsx("div",{className:"flex space-x-2",children:[1,2].map(T=>h.jsxs(M.button,{onClick:()=>n(T),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg font-medium transition-all ${e===T?"bg-accent-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:["Season ",T]},T))})]}),h.jsxs("div",{className:"card p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("span",{className:"text-gray-300",children:["Season ",e," Progress"]}),h.jsxs("span",{className:"text-primary-400 font-bold",children:[w,"/",g.length]})]}),h.jsx("div",{className:"w-full bg-dark-700 rounded-full h-3",children:h.jsx(M.div,{className:"h-full bg-gradient-to-r from-primary-500 to-accent-500 rounded-full",initial:{width:0},animate:{width:`${E}%`},transition:{duration:1,ease:"easeOut"}})}),h.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[E.toFixed(1),"% Complete"]})]})]}),i==="episodes"&&h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map((T,v)=>h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1},children:h.jsx(wz,{episode:T,isWatched:l.some(x=>x.episodeId===T.id),onMarkWatched:()=>f(r.uid,T)})},T.id))}),i==="progress"&&h.jsx(Tz,{episodes:g,watchedEpisodes:l,knowledgeXP:u}),i==="analysis"&&h.jsx(Ez,{season:e,watchedEpisodes:l}),i==="skills"&&h.jsx(Sz,{})]})]})},Cz=()=>{const t=Us(),[e,n]=D.useState("week"),[i,s]=D.useState("overview"),{user:r,profile:a}=jn(),{habits:o,completions:l,getHabitStats:u}=Ur(),{level:d,totalXP:m,xpHistory:f}=On(),{knowledgeXP:g,knowledgeLevel:w,watchedEpisodes:E}=Xc(),T=D.useMemo(()=>{const b=new Date,R=e==="week"?7:e==="month"?30:365,j=Object.values(l).filter(F=>F.includes(b.toISOString().split("T")[0])).length,V=o.length>0?Math.round(j/o.length*100):0,S=o.map(F=>u(F.id).currentStreak),_=S.length>0?Math.round(S.reduce((F,$)=>F+$,0)/S.length):0,C=Math.max(...S,0),I=m>0?Math.round(m/Math.max(1,R)*7):0,k=o.length*R,P=Object.values(l).reduce((F,$)=>F+$.filter(X=>{const he=new Date(X);return Math.floor((b-he)/(1e3*60*60*24))<=R}).length,0),N=k>0?Math.round(P/k*100):0,ke=Math.ceil(((d+1)*100-m%100)/Math.max(1,I/7)),Ze=d+Math.floor(I*4/100);return{productivityScore:V,avgStreak:_,maxStreak:C,xpGrowthRate:I,consistencyScore:N,daysToNextLevel:ke,predictedLevel:Ze,totalHabits:o.length,activeStreaks:S.filter(F=>F>0).length,knowledgeProgress:Math.round(g/1e3*100),episodesWatched:E.length}},[o,l,m,d,e,g,E]),v=({title:b,value:R,subtitle:j,icon:V,color:S,trend:_})=>h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6 hover:shadow-lg transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("div",{className:`text-3xl ${S}`,children:V}),_&&h.jsxs("div",{className:`text-sm px-2 py-1 rounded ${_>0?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:[_>0?"↗":"↘"," ",Math.abs(_),"%"]})]}),h.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:R}),h.jsx("div",{className:"text-sm text-gray-400",children:b}),j&&h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:j})]}),x=({percentage:b,size:R=120,strokeWidth:j=8,color:V="#3B82F6"})=>{const S=(R-j)/2,_=S*2*Math.PI,C=`${_} ${_}`,I=_-b/100*_;return h.jsxs("div",{className:"relative",style:{width:R,height:R},children:[h.jsxs("svg",{width:R,height:R,className:"transform -rotate-90",children:[h.jsx("circle",{cx:R/2,cy:R/2,r:S,stroke:"#374151",strokeWidth:j,fill:"transparent"}),h.jsx(M.circle,{cx:R/2,cy:R/2,r:S,stroke:V,strokeWidth:j,fill:"transparent",strokeDasharray:C,initial:{strokeDashoffset:_},animate:{strokeDashoffset:I},transition:{duration:1,ease:"easeOut"},strokeLinecap:"round"})]}),h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsxs("span",{className:"text-2xl font-bold text-white",children:[b,"%"]})})]})};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900",children:[h.jsx("header",{className:"bg-dark-800/50 backdrop-blur-sm border-b border-dark-700",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsx(M.button,{onClick:()=>t("/dashboard"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-gray-400 hover:text-white transition-colors",children:"← Back to Dashboard"}),h.jsx("h1",{className:"text-xl font-gaming font-bold text-gradient",children:"ADVANCED ANALYTICS"})]}),h.jsx("div",{className:"flex items-center space-x-2",children:["week","month","year"].map(b=>h.jsx(M.button,{onClick:()=>n(b),whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-4 py-2 rounded-lg font-medium transition-all ${e===b?"bg-primary-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:b.charAt(0).toUpperCase()+b.slice(1)},b))})]})})}),h.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[h.jsx(v,{title:"Productivity Score",value:T.productivityScore,subtitle:"Today's completion rate",icon:"⚡",color:"text-yellow-400",trend:5}),h.jsx(v,{title:"Consistency Score",value:T.consistencyScore,subtitle:`${e} average`,icon:"🎯",color:"text-blue-400",trend:3}),h.jsx(v,{title:"XP Growth Rate",value:T.xpGrowthRate,subtitle:"XP per week",icon:"📈",color:"text-green-400",trend:8}),h.jsx(v,{title:"Active Streaks",value:T.activeStreaks,subtitle:`Max: ${T.maxStreak} days`,icon:"🔥",color:"text-orange-400",trend:2})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[h.jsxs("div",{className:"card p-6 text-center",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Overall Progress"}),h.jsx(x,{percentage:T.productivityScore,color:"#3B82F6"}),h.jsxs("p",{className:"text-gray-400 mt-4",children:["Hunter Level ",d]})]}),h.jsxs("div",{className:"card p-6 text-center",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Knowledge Progress"}),h.jsx(x,{percentage:T.knowledgeProgress,color:"#9333EA"}),h.jsxs("p",{className:"text-gray-400 mt-4",children:["Knowledge Level ",w]})]}),h.jsxs("div",{className:"card p-6 text-center",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Consistency"}),h.jsx(x,{percentage:T.consistencyScore,color:"#10B981"}),h.jsxs("p",{className:"text-gray-400 mt-4",children:["Avg Streak: ",T.avgStreak," days"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🔮 Predictions"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex justify-between items-center p-3 bg-dark-700/50 rounded-lg",children:[h.jsx("span",{className:"text-gray-300",children:"Next Level Up"}),h.jsxs("span",{className:"text-primary-400 font-bold",children:[T.daysToNextLevel," days"]})]}),h.jsxs("div",{className:"flex justify-between items-center p-3 bg-dark-700/50 rounded-lg",children:[h.jsx("span",{className:"text-gray-300",children:"Predicted Level (1 month)"}),h.jsxs("span",{className:"text-accent-400 font-bold",children:["Level ",T.predictedLevel]})]}),h.jsxs("div",{className:"flex justify-between items-center p-3 bg-dark-700/50 rounded-lg",children:[h.jsx("span",{className:"text-gray-300",children:"Knowledge Mastery"}),h.jsxs("span",{className:"text-purple-400 font-bold",children:[Math.round(T.knowledgeProgress/100*30)," days"]})]})]})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"💡 AI Insights"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg border border-blue-500/30",children:h.jsxs("p",{className:"text-blue-300 text-sm",children:["🎯 Your consistency is ",T.consistencyScore>70?"excellent":"improving","! Keep focusing on daily habits."]})}),h.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg border border-green-500/30",children:h.jsxs("p",{className:"text-green-300 text-sm",children:["📈 XP growth rate is ",T.xpGrowthRate>50?"outstanding":"steady",". You're on track for major progress!"]})}),h.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg border border-purple-500/30",children:h.jsxs("p",{className:"text-purple-300 text-sm",children:["📚 Knowledge progress: ",T.episodesWatched," episodes watched. Learning fuels growth!"]})})]})]})]}),h.jsxs("div",{className:"card p-6",children:[h.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"📊 Habit Performance"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(b=>{const R=u(b.id),j=Math.round(R.totalCompletions/Math.max(1,R.totalDays)*100);return h.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"p-4 bg-dark-700/50 rounded-lg border border-gray-600",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("span",{className:"text-2xl",children:b.icon||"⭐"}),h.jsxs("span",{className:`text-sm px-2 py-1 rounded ${j>=80?"bg-green-900/30 text-green-400":j>=60?"bg-yellow-900/30 text-yellow-400":"bg-red-900/30 text-red-400"}`,children:[j,"%"]})]}),h.jsx("h4",{className:"font-bold text-white mb-2",children:b.name}),h.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[h.jsxs("div",{children:["Streak: ",R.currentStreak," days"]}),h.jsxs("div",{children:["Total: ",R.totalCompletions," times"]})]})]},b.id)})})]})]})]})},Rz=()=>{const[t,e]=D.useState("leaderboard"),[n,i]=D.useState([]),[s,r]=D.useState([]),[a,o]=D.useState([]),{user:l,profile:u}=jn(),{level:d,totalXP:m}=On();D.useEffect(()=>{r([{id:1,name:"Shadow Hunter",level:15,xp:1250,rank:"A",streak:12,avatar:"🗡️"},{id:2,name:"Iron Warrior",level:12,xp:980,rank:"B",streak:8,avatar:"⚔️"},{id:3,name:"Mage Knight",level:18,xp:1580,rank:"S",streak:15,avatar:"🔮"},{id:4,name:"Beast Tamer",level:10,xp:750,rank:"C",streak:5,avatar:"🐺"},{id:5,name:"Flame Archer",level:14,xp:1100,rank:"B",streak:10,avatar:"🏹"}]),i([{id:1,title:"7-Day Consistency Challenge",description:"Complete all habits for 7 days straight",participants:156,reward:"500 XP + Legendary Badge",timeLeft:"3 days",difficulty:"Hard",icon:"🔥"},{id:2,title:"Knowledge Seeker",description:"Watch 5 Solo Leveling episodes this week",participants:89,reward:"300 XP + Scholar Title",timeLeft:"5 days",difficulty:"Medium",icon:"📚"},{id:3,title:"Early Bird Challenge",description:"Wake up before 6 AM for 5 days",participants:234,reward:"200 XP + Dawn Warrior Badge",timeLeft:"2 days",difficulty:"Medium",icon:"🌅"}]),o([{id:1,name:"Shadow Monarchs",members:45,level:25,description:"Elite hunters seeking ultimate power",requirements:"Level 15+, 80% consistency",icon:"👑",rank:1},{id:2,name:"Iron Will Society",members:78,level:18,description:"Dedicated to building unbreakable habits",requirements:"Level 10+, 30-day streak",icon:"⚡",rank:2},{id:3,name:"Knowledge Seekers",members:92,level:22,description:"Learning and growing together",requirements:"Level 5+, Active participation",icon:"🧠",rank:3}])},[]);const f=({id:T,label:v,icon:x,isActive:b,onClick:R})=>h.jsxs(M.button,{onClick:()=>R(T),whileHover:{scale:1.05},whileTap:{scale:.95},className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-all ${b?"bg-primary-600 text-white":"bg-dark-700 text-gray-300 hover:bg-dark-600"}`,children:[h.jsx("span",{children:x}),h.jsx("span",{children:v})]}),g=({friend:T,position:v})=>h.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.1},className:"flex items-center justify-between p-4 bg-dark-700/50 rounded-lg border border-gray-600 hover:border-primary-500/50 transition-all",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs("span",{className:"text-2xl font-bold text-primary-400",children:["#",v+1]}),h.jsx("span",{className:"text-3xl",children:T.avatar})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-white",children:T.name}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[h.jsxs("span",{children:["Level ",T.level]}),h.jsxs("span",{children:[T.rank,"-Rank"]}),h.jsxs("span",{children:["🔥 ",T.streak," days"]})]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-lg font-bold text-accent-400",children:[T.xp," XP"]}),h.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-sm bg-primary-600 hover:bg-primary-700 text-white px-3 py-1 rounded mt-1",children:"Challenge"})]})]}),w=({challenge:T})=>h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-6 hover:shadow-lg transition-all",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("span",{className:"text-3xl",children:T.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-white",children:T.title}),h.jsx("p",{className:"text-sm text-gray-400",children:T.description})]})]}),h.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${T.difficulty==="Hard"?"bg-red-900/30 text-red-400":T.difficulty==="Medium"?"bg-yellow-900/30 text-yellow-400":"bg-green-900/30 text-green-400"}`,children:T.difficulty})]}),h.jsxs("div",{className:"space-y-3 mb-4",children:[h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"text-gray-400",children:"Participants:"}),h.jsx("span",{className:"text-white font-bold",children:T.participants})]}),h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"text-gray-400",children:"Reward:"}),h.jsx("span",{className:"text-accent-400 font-bold",children:T.reward})]}),h.jsxs("div",{className:"flex justify-between text-sm",children:[h.jsx("span",{className:"text-gray-400",children:"Time Left:"}),h.jsx("span",{className:"text-orange-400 font-bold",children:T.timeLeft})]})]}),h.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-primary-600 to-accent-600 text-white py-2 rounded-lg font-bold",children:"Join Challenge"})]}),E=({guild:T})=>h.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card p-6 hover:shadow-lg transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("span",{className:"text-4xl",children:T.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-white",children:T.name}),h.jsxs("p",{className:"text-sm text-gray-400",children:["Rank #",T.rank," Guild"]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-lg font-bold text-primary-400",children:["Lv.",T.level]}),h.jsxs("div",{className:"text-sm text-gray-400",children:[T.members," members"]})]})]}),h.jsx("p",{className:"text-gray-300 text-sm mb-4",children:T.description}),h.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3 mb-4",children:[h.jsx("h4",{className:"text-sm font-bold text-accent-400 mb-1",children:"Requirements:"}),h.jsx("p",{className:"text-xs text-gray-400",children:T.requirements})]}),h.jsx(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-accent-600 to-purple-600 text-white py-2 rounded-lg font-bold",children:"Apply to Join"})]});return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-gaming font-bold text-gradient mb-2",children:"Social Hub"}),h.jsx("p",{className:"text-gray-400",children:"Compete, collaborate, and conquer together"})]}),h.jsxs("div",{className:"flex justify-center space-x-2",children:[h.jsx(f,{id:"leaderboard",label:"Leaderboard",icon:"🏆",isActive:t==="leaderboard",onClick:e}),h.jsx(f,{id:"challenges",label:"Challenges",icon:"⚔️",isActive:t==="challenges",onClick:e}),h.jsx(f,{id:"guilds",label:"Guilds",icon:"🏰",isActive:t==="guilds",onClick:e})]}),h.jsxs(Ui,{mode:"wait",children:[t==="leaderboard"&&h.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:[h.jsx("div",{className:"card p-4 bg-gradient-to-r from-primary-900/30 to-accent-900/30 border border-primary-500/30",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("span",{className:"text-3xl",children:"👑"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-white",children:"Your Rank"}),h.jsxs("p",{className:"text-sm text-gray-400",children:["Level ",d," • ",m," XP"]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-2xl font-bold text-primary-400",children:"#7"}),h.jsx("div",{className:"text-sm text-gray-400",children:"This week"})]})]})}),s.map((T,v)=>h.jsx(g,{friend:T,position:v},T.id))]},"leaderboard"),t==="challenges"&&h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(T=>h.jsx(w,{challenge:T},T.id))},"challenges"),t==="guilds"&&h.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(T=>h.jsx(E,{guild:T},T.id))},"guilds")]})]})},Iz=()=>{const t=Us();return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900",children:[h.jsx("header",{className:"bg-dark-800/50 backdrop-blur-sm border-b border-dark-700",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"flex justify-between items-center h-16",children:h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsx(M.button,{onClick:()=>t("/dashboard"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"text-gray-400 hover:text-white transition-colors",children:"← Back to Dashboard"}),h.jsx("h1",{className:"text-xl font-gaming font-bold text-gradient",children:"SOCIAL HUB"})]})})})}),h.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:h.jsx(Rz,{})})]})};function Nz(){const{initializeAuth:t,handleRedirectResult:e,isLoading:n,isAuthenticated:i}=jn();return D.useEffect(()=>{const s=t();return e().catch(r=>{console.warn("Redirect result handling failed:",r)}),()=>{s&&s()}},[t,e]),n?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-dark-900 via-dark-800 to-dark-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),h.jsx("h2",{className:"text-xl font-gaming font-bold text-gradient",children:"LEVELUP LIFE"}),h.jsx("p",{className:"text-gray-400 mt-2",children:"Loading your journey..."})]})}):h.jsx(wF,{children:h.jsx(VO,{children:h.jsx("div",{className:"App",children:h.jsxs(fO,{children:[h.jsx(mi,{path:"/login",element:i?h.jsx(fi,{to:"/dashboard",replace:!0}):h.jsx(TF,{})}),h.jsx(mi,{path:"/signup",element:i?h.jsx(fi,{to:"/dashboard",replace:!0}):h.jsx(EF,{})}),h.jsx(mi,{path:"/dashboard",element:i?h.jsx(_z,{}):h.jsx(fi,{to:"/login",replace:!0})}),h.jsx(mi,{path:"/knowledge",element:i?h.jsx(Az,{}):h.jsx(fi,{to:"/login",replace:!0})}),h.jsx(mi,{path:"/analytics",element:i?h.jsx(Cz,{}):h.jsx(fi,{to:"/login",replace:!0})}),h.jsx(mi,{path:"/social",element:i?h.jsx(Iz,{}):h.jsx(fi,{to:"/login",replace:!0})}),h.jsx(mi,{path:"/",element:i?h.jsx(fi,{to:"/dashboard",replace:!0}):h.jsx(fi,{to:"/login",replace:!0})}),h.jsx(mi,{path:"*",element:h.jsx(fi,{to:"/",replace:!0})})]})})})})}fj.createRoot(document.getElementById("root")).render(h.jsx(D.StrictMode,{children:h.jsx(Nz,{})}));
